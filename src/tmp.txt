=== RUN   TestDatabaseSuite
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version ORDER BY version DESC LIMIT 1;"
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 1."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nCREATE TABLE IF NOT EXISTS schema_version (\n    version INTEGER NOT NULL PRIMARY KEY,\n    dirty BOOL NOT NULL,\n    name TEXT NOT NULL\n);\n\n-- The schema_version record for v000001 needs to be explicitly inserted.\n-- Only insert the record if it doesn't already exist.\nINSERT OR IGNORE INTO schema_version VALUES (1, 1, 'base');\n\nCREATE TABLE IF NOT EXISTS app_user (\n    id BLOB NOT NULL PRIMARY KEY,\n    email TEXT NOT NULL UNIQUE,\n    organization_id TEXT NOT NULL,\n    role TEXT NOT NULL,\n    api_key TEXT NOT NULL UNIQUE,\n    auth0_id TEXT NOT NULL UNIQUE\n);\n\nCREATE TABLE IF NOT EXISTS integration (\n    id BLOB NOT NULL PRIMARY KEY,\n    organization_id TEXT NOT NULL,\n    service TEXT NOT NULL,\n    name TEXT NOT NULL,\n    config BLOB NOT NULL,\n    created_at DATETIME NOT NULL,\n    validated BOOL NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS notification (\n    id BLOB NOT NULL PRIMARY KEY,\n    receiver_id BLOB NOT NULL REFERENCES app_user (id),\n    content TEXT NOT NULL,\n    status TEXT NOT NULL,\n    level TEXT NOT NULL,\n    association BLOB NOT NULL,\n    created_at DATETIME NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS workflow (\n    id BLOB NOT NULL PRIMARY KEY,\n    user_id BLOB NOT NULL REFERENCES app_user (id),\n    name TEXT NOT NULL,\n    description TEXT NOT NULL,\n    schedule BLOB NOT NULL,\n    created_at DATETIME NOT NULL,\n    UNIQUE (user_id, name)\n);\n\nCREATE TABLE IF NOT EXISTS workflow_dag (\n    id BLOB NOT NULL PRIMARY KEY,\n    workflow_id BLOB NOT NULL REFERENCES workflow (id),\n    s3_config BLOB NOT NULL,\n    created_at DATETIME NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS operator (\n    id BLOB NOT NULL PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT NOT NULL,\n    spec BLOB NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS artifact (\n    id BLOB NOT NULL PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT NOT NULL,\n    spec BLOB NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS workflow_dag_edge (\n    workflow_dag_id BLOB NOT NULL REFERENCES workflow_dag (id),\n    type TEXT NOT NULL,\n    from_id BLOB NOT NULL,\n    to_id BLOB NOT NULL,\n    idx INTEGER NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS workflow_dag_result (\n    id BLOB NOT NULL PRIMARY KEY,\n    workflow_dag_id BLOB NOT NULL REFERENCES workflow_dag (id),\n    status TEXT NOT NULL,\n    created_at DATETIME NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS operator_result (\n    id BLOB NOT NULL PRIMARY KEY,\n    workflow_dag_result_id BLOB NOT NULL REFERENCES workflow_dag_result (id),\n    operator_id BLOB NOT NULL REFERENCES operator (id),\n    status TEXT NOT NULL,\n    metadata BLOB\n);\n\nCREATE TABLE IF NOT EXISTS artifact_result (\n    id BLOB NOT NULL PRIMARY KEY,\n    workflow_dag_result_id BLOB NOT NULL REFERENCES workflow_dag_result (id),\n    artifact_id BLOB NOT NULL REFERENCES artifact (id),\n    content_path TEXT NOT NULL,\n    status TEXT NOT NULL,\n    metadata BLOB\n);\n\nCREATE TABLE IF NOT EXISTS workflow_watcher (\n    workflow_id BLOB NOT NULL REFERENCES workflow (id),\n    user_id BLOB NOT NULL REFERENCES app_user (id),\n    PRIMARY KEY (workflow_id, user_id)\n);\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 1."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 2."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [2 add integration.user_id true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE integration ADD COLUMN user_id BLOB REFERENCES app_user (id);\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 2."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 3."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [3 add workflow_dag.storage_config true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE workflow_dag\nADD COLUMN storage_config BLOB;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 3."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 4."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [4 backfill workflow_dag.storage_config and operator.spec.storage_path true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, s3_config FROM workflow_dag;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, spec FROM operator;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 4."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 5."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [5 add not null constraint to workflow_dag.storage_config true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nBEGIN TRANSACTION;\n\nALTER TABLE workflow_dag RENAME TO tmp_workflow_dag;\n\nCREATE TABLE workflow_dag (\n    id BLOB NOT NULL PRIMARY KEY,\n    workflow_id BLOB NOT NULL REFERENCES workflow (id),\n    s3_config BLOB NOT NULL,\n    created_at DATETIME NOT NULL,\n    storage_config BLOB NOT NULL\n);\n\nINSERT INTO workflow_dag(id, workflow_id, s3_config, created_at, storage_config)\nSELECT id, workflow_id, s3_config, created_at, storage_config\nFROM tmp_workflow_dag;\n\nDROP TABLE tmp_workflow_dag;\n\nCOMMIT;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 5."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 6."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [6 add workflow.retention_policy true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE workflow\nADD COLUMN retention_policy BLOB NOT NULL;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 6."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 7."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [7 add primary key constraint to workflow_dag_edge on workflow_dag_id, from_id, to_id true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nBEGIN TRANSACTION;\n\nALTER TABLE workflow_dag_edge RENAME TO tmp_workflow_dag_edge;\n\nCREATE TABLE workflow_dag_edge (\n    workflow_dag_id BLOB NOT NULL REFERENCES workflow_dag (id),\n    type TEXT NOT NULL,\n    from_id BLOB NOT NULL,\n    to_id BLOB NOT NULL,\n    idx INTEGER NOT NULL,\n\tPRIMARY KEY (workflow_dag_id, from_id, to_id)\n);\n\nINSERT INTO workflow_dag_edge(workflow_dag_id, type, from_id, to_id, idx)\nSELECT workflow_dag_id, type, from_id, to_id, idx\nFROM tmp_workflow_dag_edge;\n\nDROP TABLE tmp_workflow_dag_edge;\n\nCOMMIT;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 7."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 8."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [8 delete outdated s3_config column true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE workflow_dag\nDROP COLUMN s3_config;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 8."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 9."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [9 backfill metadata in artifact_results true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, metadata FROM artifact_result;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 9."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 10."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [10 add exec state column to operator_result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE operator_result\nADD COLUMN execution_state BLOB;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 10."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 11."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [11]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [11 backfill exec state column in operator_result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, status, metadata FROM operator_result;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 11]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 11."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 12."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [12]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [12 remove metadata in operator_result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE operator_result\nDROP COLUMN metadata;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 12]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 12."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 13."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [13]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [13 add workflow_dag.engine_config true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: Transaction BEGIN"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: ALTER TABLE workflow_dag ADD COLUMN engine_config BLOB;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow_dag SET engine_config = $1 WHERE engine_config IS NULL; with args: [0xc0005f62e8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tALTER TABLE workflow_dag RENAME TO tmp_workflow_dag;\n\n\tCREATE TABLE workflow_dag (\n\t\tid BLOB NOT NULL PRIMARY KEY,\n\t\tworkflow_id BLOB NOT NULL REFERENCES workflow (id),\n\t\tcreated_at DATETIME NOT NULL,\n\t\tstorage_config BLOB NOT NULL,\n\t\tengine_config BLOB NOT NULL\n\t);\n\n\tINSERT INTO workflow_dag(id, workflow_id, created_at, storage_config, engine_config)\n\tSELECT id, workflow_id, created_at, storage_config, engine_config\n\tFROM tmp_workflow_dag;\n\n\tDROP TABLE tmp_workflow_dag;\n\t"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: Transaction COMMIT"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 13]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 13."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 14."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [14]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [14 add exec state column to artifact result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE artifact_result \nADD COLUMN execution_state BLOB;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 14]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 14."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 15."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [15]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [15 backfill exec state column in artifact result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT artifact_result.id, operator_result.execution_state\n\t\tFROM operator_result\n\t\tINNER JOIN operator ON operator_result.operator_id=operator.id\n\t\tINNER JOIN workflow_dag_edge ON operator.id=workflow_dag_edge.from_id\n\t\tINNER JOIN artifact ON workflow_dag_edge.to_id=artifact.id\n\t\tINNER JOIN artifact_result ON artifact.id=artifact_result.artifact_id;\n\t"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 15]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 15."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 16."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [16]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [16 add type column to artifact true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE artifact\nADD COLUMN type TEXT NOT NULL DEFAULT 'untyped';\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, spec FROM artifact;"
time="2023-05-30T17:14:54-07:00" level=info msg="A total of 0 artifact results have been migrated."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE artifact \nDROP COLUMN spec;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 16]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 16."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 17."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [17]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [17 add canceled status to results true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, execution_state FROM artifact_result WHERE status=\"pending\";"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, execution_state FROM operator_result WHERE status=\"pending\";"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, execution_state FROM artifact_result WHERE status=\"failed\";"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 17]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 17."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 18."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [18]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [18 add exec state to workflow_dag_result true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE workflow_dag_result \nADD COLUMN execution_state BLOB;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, status, created_at FROM workflow_dag_result;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 18]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 18."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 19."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [19]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [19 add serialization type and value to param op true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, spec FROM operator;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 19]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 19."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 20."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [20]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [20 add execution environment table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nCREATE TABLE IF NOT EXISTS execution_environment (\n    id BLOB NOT NULL PRIMARY KEY,\n    spec BLOB NOT NULL,\n    hash BLOB NOT NULL UNIQUE\n);\n\nALTER TABLE operator \nADD COLUMN execution_environment_id BLOB REFERENCES execution_environment (id);\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 20]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 20."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 21."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [21]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [21 add gc column to the execution environment table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nDROP TABLE IF EXISTS execution_environment;\n\nCREATE TABLE IF NOT EXISTS execution_environment (\n    id BLOB NOT NULL PRIMARY KEY,\n    spec BLOB NOT NULL,\n    hash BLOB NOT NULL,\n\tgarbage_collected BOOL DEFAULT FALSE NOT NULL\n);\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 21]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 21."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 22."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [22]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [22 backfill python type to the artifact result table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id, content_path, metadata FROM artifact_result;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 22]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 22."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 23."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [23]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [23 add notification_settings column to workflow table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE workflow \nADD COLUMN notification_settings BLOB;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 23]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 23."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 24."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [24]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [24 migrate exec env to conda engine true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nUPDATE operator SET spec = CAST(\n\tjson_set(spec, '$.engine_config', json_object(\n\t\t'type', 'aqueduct_conda', 'aqueduct_conda_config', json_object(\n\t\t\t'env', 'aqueduct_' || execution_environment_id\n\t\t)\n\t)) AS BLOB\n) WHERE execution_environment_id IS NOT NULL;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 24]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 24."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 25."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [25]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [25 add storage migration table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nCREATE TABLE IF NOT EXISTS storage_migration (\n\tid BLOB NOT NULL PRIMARY KEY,\n\tdest_integration_id BLOB REFERENCES integration (id),\n\texecution_state BLOB NOT NULL,\n\tcurrent BOOL NOT NULL\n);\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 25]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 25."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 26."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [26]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [26 remove validated column from integration table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE integration \nDROP COLUMN validated;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 26]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 26."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 27."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [27]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [27 rename integration table to resource true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE integration RENAME TO resource;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 27]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 27."
time="2023-05-30T17:14:54-07:00" level=info msg="Starting migrate up to schema version 28."
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [28]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [28 add should_persist column to artifact table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \nALTER TABLE artifact \nADD COLUMN should_persist BOOL DEFAULT TRUE NOT NULL;\n"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET dirty = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [false 28]"
time="2023-05-30T17:14:54-07:00" level=info msg="Completed migrate up to schema version 28."
=== RUN   TestDatabaseSuite/TestArtifactResult_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [142d556e-596b-4386-bce4-e610cea32444]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [142d556e-596b-4386-bce4-e610cea32444 5c03ee4f-7617-4360-80fe-202641c9eb63 c0c70d60-a19b-4dcd-8ab2-3de8815d0b47 XVlBzgbaiC pending 0xc0001d1830]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_CreateWithExecStateAndMetadata
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [671714c2-1382-46fe-83dc-4bac3bd0d30b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, metadata, execution_state) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [671714c2-1382-46fe-83dc-4bac3bd0d30b 1d9f52e4-b43c-47d9-9b3f-a8676029a52b 491de5bf-9495-4cbc-82a4-7cefa0646808 LDnJObCsNV canceled 0xc0000c24e8 0xc0000c24b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [a7f6ee84-5f7f-45bc-855b-8bdc582d40da]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [a7f6ee84-5f7f-45bc-855b-8bdc582d40da JjPjzpfRFE gmotaFetHsbZRjx numeric true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [cb952416-3de8-426b-a63d-1a661cabb748]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [cb952416-3de8-426b-a63d-1a661cabb748  aqueduct-test  wnwekrBEmfdzdcEkXBAkjQZLCtTMtTCoaNatyyiNKAReKJyiXJrscctNswYN ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [1e914e3c-206f-4338-837c-69dd11dd496e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [1e914e3c-206f-4338-837c-69dd11dd496e cb952416-3de8-426b-a63d-1a661cabb748 GRussVmaoz FZBsbOJiFQGZsnw 0xc0001667c0 2023-05-30 17:14:54.315973 -0700 PDT m=+0.036789940 0xc00070eed8 0xc00078e0d8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [daaaeebd-4f5e-476e-b825-8afd717927f1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [daaaeebd-4f5e-476e-b825-8afd717927f1 1e914e3c-206f-4338-837c-69dd11dd496e 2023-05-30 17:14:54.316203 -0700 PDT m=+0.037019831 0xc0002ace10 0xc0003e6370]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [daaaeebd-4f5e-476e-b825-8afd717927f1 artifact_to_operator a7f6ee84-5f7f-45bc-855b-8bdc582d40da 948c7111-6d57-4093-a17d-e22af323fa64 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [275766b5-aabb-4916-b7ec-d7e52130677a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [275766b5-aabb-4916-b7ec-d7e52130677a daaaeebd-4f5e-476e-b825-8afd717927f1 a7f6ee84-5f7f-45bc-855b-8bdc582d40da SmVoiGLOpb pending 0xc0002ada10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM artifact_result WHERE id IN ($1) with args: [275766b5-aabb-4916-b7ec-d7e52130677a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [31bd9b9a-db97-4808-8efc-911dc2bb7fa8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [31bd9b9a-db97-4808-8efc-911dc2bb7fa8 UOpEdKupdO MeRVjaRzLNTXYeU boolean true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b43a7bd6-c80a-455d-92b5-bb87d697d3ad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b43a7bd6-c80a-455d-92b5-bb87d697d3ad  aqueduct-test  WKsXbGyRAOmBTvKSJfjzaLbtZsyMGeuDtRzQMDQiYCOhgHOvgSeycJPJHYNu ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [29896738-1800-4943-ad63-77938a7f23e3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [29896738-1800-4943-ad63-77938a7f23e3 b43a7bd6-c80a-455d-92b5-bb87d697d3ad NjJhhjUVRu SqfgqVMkPYVkURU 0xc000167500 2023-05-30 17:14:54.317107 -0700 PDT m=+0.037924326 0xc0003c66b8 0xc00078e4a8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [643845d3-e6de-47e5-94bd-dcbbbc56c39e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [643845d3-e6de-47e5-94bd-dcbbbc56c39e 29896738-1800-4943-ad63-77938a7f23e3 2023-05-30 17:14:54.317251 -0700 PDT m=+0.038067815 0xc0002126c0 0xc0003e6af0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [643845d3-e6de-47e5-94bd-dcbbbc56c39e artifact_to_operator 31bd9b9a-db97-4808-8efc-911dc2bb7fa8 730c7297-d71d-42e4-9ca0-64492f5e9960 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [2f009744-2f6f-4bd5-b4d4-a123aaeb64f0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [2f009744-2f6f-4bd5-b4d4-a123aaeb64f0 643845d3-e6de-47e5-94bd-dcbbbc56c39e 31bd9b9a-db97-4808-8efc-911dc2bb7fa8 FvIZRgBmyA pending 0xc000212ae0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [e35b7753-e2e8-443f-a8ed-57c4eb41600c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [e35b7753-e2e8-443f-a8ed-57c4eb41600c 643845d3-e6de-47e5-94bd-dcbbbc56c39e 31bd9b9a-db97-4808-8efc-911dc2bb7fa8 rKCtzkjkZI pending 0xc000212d50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [368e968a-fe79-4ff0-8795-c5478fe00bc7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [368e968a-fe79-4ff0-8795-c5478fe00bc7 643845d3-e6de-47e5-94bd-dcbbbc56c39e 31bd9b9a-db97-4808-8efc-911dc2bb7fa8 vaBjMkXVbW pending 0xc000212fc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag WHERE id IN ($1,$2,$3) with args: [2f009744-2f6f-4bd5-b4d4-a123aaeb64f0 e35b7753-e2e8-443f-a8ed-57c4eb41600c 368e968a-fe79-4ff0-8795-c5478fe00bc7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [0abfc1aa-47ac-4e19-8efa-359cf636def5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [0abfc1aa-47ac-4e19-8efa-359cf636def5 GvbqzgexyA LBsdjSGpngCwFkD picklable true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [212c3c45-238f-40d2-819f-dce7036f2604]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [212c3c45-238f-40d2-819f-dce7036f2604  aqueduct-test  fIBuufFMoWdiTskZoQJMqrTICTojIYxyeSxZyfroRODMbNDRZnPNRWCJPMHD ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [ebca54dc-a35d-4678-b220-95b51b3e5881]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [ebca54dc-a35d-4678-b220-95b51b3e5881 212c3c45-238f-40d2-819f-dce7036f2604 JmHAYORsUf UMApsVgzHblmYYt 0xc0007be380 2023-05-30 17:14:54.318443 -0700 PDT m=+0.039260193 0xc00003ebb8 0xc00078e5a8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [0337b468-5ac5-4743-8b85-fd091e48461d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [0337b468-5ac5-4743-8b85-fd091e48461d ebca54dc-a35d-4678-b220-95b51b3e5881 2023-05-30 17:14:54.31863 -0700 PDT m=+0.039447600 0xc000213ad0 0xc0003e7270]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0337b468-5ac5-4743-8b85-fd091e48461d artifact_to_operator 0abfc1aa-47ac-4e19-8efa-359cf636def5 6364764f-0652-4d54-a89a-1b380bb3b8e0 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0337b468-5ac5-4743-8b85-fd091e48461d operator_to_artifact 6364764f-0652-4d54-a89a-1b380bb3b8e0 0abfc1aa-47ac-4e19-8efa-359cf636def5 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [969498ae-e029-4187-ada1-49c99dec860e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [969498ae-e029-4187-ada1-49c99dec860e 0337b468-5ac5-4743-8b85-fd091e48461d 0abfc1aa-47ac-4e19-8efa-359cf636def5 VgwfFbbGGc pending 0xc000213f80]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state FROM artifact_result WHERE id = $1 with args: [969498ae-e029-4187-ada1-49c99dec860e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [e3bbaaab-a78e-4ac4-8aa4-5680204df553]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [e3bbaaab-a78e-4ac4-8aa4-5680204df553 nqbaEREunU ZjQXmZOtaRLUtmY string true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b5a73907-f3e3-4cb7-bf0e-85744a148e26]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b5a73907-f3e3-4cb7-bf0e-85744a148e26  aqueduct-test  mSVYBADDvoxIfsfgPyCKmxIubeYTNDtjAyRRDedMiyLprucjiOgjhYeVwBTC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [5e8cbd86-e2a5-43a1-8ddf-28375bbe8878]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [5e8cbd86-e2a5-43a1-8ddf-28375bbe8878 b5a73907-f3e3-4cb7-bf0e-85744a148e26 LfrDGXqwpz wVGqMZcLVCxaSJl 0xc0007be800 2023-05-30 17:14:54.319632 -0700 PDT m=+0.040449465 0xc0003336d8 0xc00078e690]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [94447d5e-243c-49bc-8736-206503935147]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [94447d5e-243c-49bc-8736-206503935147 5e8cbd86-e2a5-43a1-8ddf-28375bbe8878 2023-05-30 17:14:54.319806 -0700 PDT m=+0.040623039 0xc000411200 0xc0003e7cc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [94447d5e-243c-49bc-8736-206503935147 artifact_to_operator e3bbaaab-a78e-4ac4-8aa4-5680204df553 e244474f-3243-479c-87ea-8b4d00af28c5 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [05c5c4e0-77bd-476d-9bea-3cf824654f54]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [05c5c4e0-77bd-476d-9bea-3cf824654f54 94447d5e-243c-49bc-8736-206503935147 e3bbaaab-a78e-4ac4-8aa4-5680204df553 YEofkkEYeq pending 0xc000411620]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [3b7db421-0f53-4a9c-bdf7-3afde29d7c47]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [3b7db421-0f53-4a9c-bdf7-3afde29d7c47 94447d5e-243c-49bc-8736-206503935147 e3bbaaab-a78e-4ac4-8aa4-5680204df553 kKHqgBpnbP pending 0xc000411890]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [971e1123-2717-46be-b79d-cba14416c465]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [971e1123-2717-46be-b79d-cba14416c465 94447d5e-243c-49bc-8736-206503935147 e3bbaaab-a78e-4ac4-8aa4-5680204df553 bgHMLUIDjU pending 0xc000411b00]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state FROM artifact_result WHERE id IN ($1,$2,$3); with args: [05c5c4e0-77bd-476d-9bea-3cf824654f54 3b7db421-0f53-4a9c-bdf7-3afde29d7c47 971e1123-2717-46be-b79d-cba14416c465]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetByArtifact
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [6b105f6b-2526-4d74-a1a8-4d8ce348fa0d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [6b105f6b-2526-4d74-a1a8-4d8ce348fa0d MmpBHCSjMJ jxzuaiIsNBakqSw boolean true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [139faf24-6576-4a78-973f-093c19b27e7d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [139faf24-6576-4a78-973f-093c19b27e7d  aqueduct-test  pOQgNczgaczAInLqLIbAatLYHdaopovFOkqIexsFzXzrlcztxcdJJFuyZHRC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [6edbe44f-5af2-4c2e-a314-0d67bf7bdf2c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [6edbe44f-5af2-4c2e-a314-0d67bf7bdf2c 139faf24-6576-4a78-973f-093c19b27e7d vgpVvlGsXa lGqARmneBZBFelh 0xc0007bed00 2023-05-30 17:14:54.321013 -0700 PDT m=+0.041830433 0xc0005f2278 0xc00078e790]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [eb3d7a64-378c-476e-bb9b-a7775e0ff6c9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [eb3d7a64-378c-476e-bb9b-a7775e0ff6c9 6edbe44f-5af2-4c2e-a314-0d67bf7bdf2c 2023-05-30 17:14:54.32116 -0700 PDT m=+0.041977364 0xc0005dc8d0 0xc0001e6460]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [eb3d7a64-378c-476e-bb9b-a7775e0ff6c9 artifact_to_operator 6b105f6b-2526-4d74-a1a8-4d8ce348fa0d 56fec2b8-5a0c-4d5f-9ec0-22627b9ffc99 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [2bd0b499-5250-4848-837a-e8fbdfabd282]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [2bd0b499-5250-4848-837a-e8fbdfabd282 eb3d7a64-378c-476e-bb9b-a7775e0ff6c9 6b105f6b-2526-4d74-a1a8-4d8ce348fa0d zzfNaVtAyy pending 0xc0005dccf0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [f80f566d-3199-46a9-b0b2-d6a679adc25d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [f80f566d-3199-46a9-b0b2-d6a679adc25d eb3d7a64-378c-476e-bb9b-a7775e0ff6c9 6b105f6b-2526-4d74-a1a8-4d8ce348fa0d qWzKqQFbuc pending 0xc0005dcf60]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [12d26940-0da8-4a21-95b6-ef206d8cf15d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [12d26940-0da8-4a21-95b6-ef206d8cf15d eb3d7a64-378c-476e-bb9b-a7775e0ff6c9 6b105f6b-2526-4d74-a1a8-4d8ce348fa0d qNJYWRncGK pending 0xc0005dd1d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state FROM artifact_result WHERE artifact_id = $1; with args: [6b105f6b-2526-4d74-a1a8-4d8ce348fa0d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetByArtifactAndDAGResult
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7 KLdTkNyoCS fkFohsVVxSAZWEX table true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [12e81020-6c49-496e-94af-5c7220e6ccb9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [12e81020-6c49-496e-94af-5c7220e6ccb9  aqueduct-test  jhAquXdaaaZlRHoNXvpayoSsqcnCTuGZamCToZvPynaEphIdXaKUaqmBdtZt ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [d67a97e2-32bb-421d-81ef-8ab5437a1cff]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [d67a97e2-32bb-421d-81ef-8ab5437a1cff 12e81020-6c49-496e-94af-5c7220e6ccb9 OfFSPqKXSL EfZAPaJzldaUEdh 0xc0007bf3c0 2023-05-30 17:14:54.32227 -0700 PDT m=+0.043087268 0xc000788fc8 0xc00078e890]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [5aeef1f2-fd64-44fd-b5f6-cc8949e98730]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [5aeef1f2-fd64-44fd-b5f6-cc8949e98730 d67a97e2-32bb-421d-81ef-8ab5437a1cff 2023-05-30 17:14:54.322425 -0700 PDT m=+0.043241646 0xc000798180 0xc0001e6dc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [5aeef1f2-fd64-44fd-b5f6-cc8949e98730 artifact_to_operator b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7 4c909edb-0379-464a-b270-f023284ef019 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [5aeef1f2-fd64-44fd-b5f6-cc8949e98730 operator_to_artifact 4c909edb-0379-464a-b270-f023284ef019 b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [cf8b175f-f71d-4405-8e96-6949f9464676]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [cf8b175f-f71d-4405-8e96-6949f9464676 5aeef1f2-fd64-44fd-b5f6-cc8949e98730 b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7 GHvBrQPqWA pending 0xc0007988a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state \n\t\tFROM artifact_result \n\t\tWHERE workflow_dag_result_id = $1 AND artifact_id = $2; with args: [5aeef1f2-fd64-44fd-b5f6-cc8949e98730 b563ebc9-bfc1-4cd4-a7f3-3d94d140bbe7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetByArtifactAndWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [1ac5c3fe-5957-4b3c-af24-98f9fb053bb4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [1ac5c3fe-5957-4b3c-af24-98f9fb053bb4 RPXPtPVGNp dGERwVhGCMdfLit dictionary true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [91976e01-15ee-424c-a102-f5bff28f8118]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [91976e01-15ee-424c-a102-f5bff28f8118  aqueduct-test  qwLUecgOczXTbRMGxqPexOUAbUdQrIPjyQyQFStFubVVdHtAknjEQxCqkDIf ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [ea3318d2-3ba5-462a-9705-f1351d70704d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [ea3318d2-3ba5-462a-9705-f1351d70704d 91976e01-15ee-424c-a102-f5bff28f8118 GXeJtuncbf qQUsXTOdPORvAUk 0xc0007bf7c0 2023-05-30 17:14:54.323279 -0700 PDT m=+0.044095994 0xc000016ff8 0xc00078e978]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [c79569d6-5ff6-4f8a-b3e7-358a54b36326]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [c79569d6-5ff6-4f8a-b3e7-358a54b36326 ea3318d2-3ba5-462a-9705-f1351d70704d 2023-05-30 17:14:54.323418 -0700 PDT m=+0.044235103 0xc000799470 0xc0001e78b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c79569d6-5ff6-4f8a-b3e7-358a54b36326 artifact_to_operator 1ac5c3fe-5957-4b3c-af24-98f9fb053bb4 d9ea19fe-2401-49e4-a42f-5d06598ba7bd 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [4db5a484-355b-4dd6-af82-6f6fca76a6a6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [4db5a484-355b-4dd6-af82-6f6fca76a6a6 c79569d6-5ff6-4f8a-b3e7-358a54b36326 1ac5c3fe-5957-4b3c-af24-98f9fb053bb4 wwTndUJHiQ pending 0xc000799890]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [3cf613e5-8c48-4f41-968a-3ad56a172761]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [3cf613e5-8c48-4f41-968a-3ad56a172761 c79569d6-5ff6-4f8a-b3e7-358a54b36326 1ac5c3fe-5957-4b3c-af24-98f9fb053bb4 ecbxzvqzlP pending 0xc000799b00]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [b34820b5-de3b-4e80-a219-b9b24949fe4d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [b34820b5-de3b-4e80-a219-b9b24949fe4d c79569d6-5ff6-4f8a-b3e7-358a54b36326 1ac5c3fe-5957-4b3c-af24-98f9fb053bb4 WyqOsUbLnA pending 0xc000799d70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT DISTINCT artifact_result.id,artifact_result.workflow_dag_result_id,artifact_result.artifact_id,artifact_result.content_path,artifact_result.status,artifact_result.metadata,artifact_result.execution_state FROM artifact_result, artifact, workflow_dag, workflow_dag_edge\n\t\tWHERE workflow_dag.workflow_id = $1\n\t\tAND artifact.name = $2\n\t\tAND (\n\t\t\tworkflow_dag_edge.from_id = artifact.id\n\t\t\tOR\n\t\t\tworkflow_dag_edge.to_id = artifact.id\n\t\t)\n\t\tAND workflow_dag_edge.workflow_dag_id = workflow_dag.id\n\t\tAND artifact_result.artifact_id = artifact.id; with args: [ea3318d2-3ba5-462a-9705-f1351d70704d RPXPtPVGNp]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetByArtifactBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a IPRYxdkhCB cgRVdrSfOWLQrCN image true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [2844421e-115a-416c-87a0-940e718cd428]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [2844421e-115a-416c-87a0-940e718cd428  aqueduct-test  ANWvkkOdejVcugMVTnMUqBcVFohTtUTuWJRGiQjOTcVwHjKVtPoVVTYNXfTj ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [948e705b-28c5-48d5-82aa-dd3090838e86]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [948e705b-28c5-48d5-82aa-dd3090838e86 2844421e-115a-416c-87a0-940e718cd428 cDeMixVduz fhinMkGuotVuZJU 0xc0007bfc80 2023-05-30 17:14:54.324582 -0700 PDT m=+0.045399499 0xc0000239a8 0xc00078ea78]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [0f5a82d5-8d4e-49eb-9e54-df9608280efe]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [0f5a82d5-8d4e-49eb-9e54-df9608280efe 948e705b-28c5-48d5-82aa-dd3090838e86 2023-05-30 17:14:54.324719 -0700 PDT m=+0.045535588 0xc0000a4c90 0xc00012e3c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0f5a82d5-8d4e-49eb-9e54-df9608280efe artifact_to_operator 2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a 13c1f2e7-71ea-4e59-bd8b-bdaae3ebf396 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0f5a82d5-8d4e-49eb-9e54-df9608280efe operator_to_artifact 13c1f2e7-71ea-4e59-bd8b-bdaae3ebf396 2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [b53024aa-89d1-467d-a1f4-97851d5afc1c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [b53024aa-89d1-467d-a1f4-97851d5afc1c 0f5a82d5-8d4e-49eb-9e54-df9608280efe 2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a kJwQsrzoVW pending 0xc0000a5140]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [d59f7bb6-bf8c-4f9d-89f5-f417bd6a17b3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [d59f7bb6-bf8c-4f9d-89f5-f417bd6a17b3 0f5a82d5-8d4e-49eb-9e54-df9608280efe 2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a aYedKZpEKr pending 0xc0000a53b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [ab63c928-07b4-411e-869e-b5535ca9ff87]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [ab63c928-07b4-411e-869e-b5535ca9ff87 0f5a82d5-8d4e-49eb-9e54-df9608280efe 2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a SOKAaKzKaW pending 0xc0000a5620]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state FROM artifact_result\n\t\tWHERE artifact_result.artifact_id IN ($1); with args: [2d37e0fb-dd60-4aa7-8825-eaa98fcd6c7a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_GetByDAGResults
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [20c0d0d4-3014-4d80-a98e-aae1770942fd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [20c0d0d4-3014-4d80-a98e-aae1770942fd lfVcjYMcwV xDrnsfUrCFsVySz image true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [fe8d9fe1-9405-446a-b754-8811c079a0ba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [fe8d9fe1-9405-446a-b754-8811c079a0ba  aqueduct-test  tbpwvkbeRKvUdUyRSgDknQXeAJnkxLkNKWWUEqSfzvxvjTsnzIMKcSiStqDU ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [89f324e2-21fc-40ce-857a-1bf0ce8e6fd4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [89f324e2-21fc-40ce-857a-1bf0ce8e6fd4 fe8d9fe1-9405-446a-b754-8811c079a0ba soLEziJiWm APKvATdjZyEvvms 0xc0004187c0 2023-05-30 17:14:54.326183 -0700 PDT m=+0.046999874 0xc0000d46c8 0xc00078eb80]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [38bcac2d-4e64-4807-835f-1adb6eda5753]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [38bcac2d-4e64-4807-835f-1adb6eda5753 89f324e2-21fc-40ce-857a-1bf0ce8e6fd4 2023-05-30 17:14:54.326399 -0700 PDT m=+0.047216229 0xc0002f0660 0xc00012f220]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [38bcac2d-4e64-4807-835f-1adb6eda5753 artifact_to_operator 20c0d0d4-3014-4d80-a98e-aae1770942fd 89ecaf10-36ed-4a5d-b9bd-9c5a069b3eb9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [38bcac2d-4e64-4807-835f-1adb6eda5753 operator_to_artifact 89ecaf10-36ed-4a5d-b9bd-9c5a069b3eb9 20c0d0d4-3014-4d80-a98e-aae1770942fd 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [2f4f540e-aad6-442c-9453-809572c36eaa]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [2f4f540e-aad6-442c-9453-809572c36eaa 38bcac2d-4e64-4807-835f-1adb6eda5753 20c0d0d4-3014-4d80-a98e-aae1770942fd SJeKovPdQS pending 0xc0002f17a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [6c5526dc-ad7f-4b44-a479-decd5fd2b162]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [6c5526dc-ad7f-4b44-a479-decd5fd2b162 38bcac2d-4e64-4807-835f-1adb6eda5753 20c0d0d4-3014-4d80-a98e-aae1770942fd nyNSLTvmwZ pending 0xc00037e0c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [75048de1-02ca-4e00-b197-2207450df674]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [75048de1-02ca-4e00-b197-2207450df674 38bcac2d-4e64-4807-835f-1adb6eda5753 20c0d0d4-3014-4d80-a98e-aae1770942fd LbKtziYpTp pending 0xc00037ec30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT artifact_result.id,artifact_result.workflow_dag_result_id,artifact_result.artifact_id,artifact_result.content_path,artifact_result.status,artifact_result.metadata,artifact_result.execution_state FROM artifact_result WHERE workflow_dag_result_id IN ($1); with args: [38bcac2d-4e64-4807-835f-1adb6eda5753]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [c1ddb1c5-1f3e-4627-9ee3-44f4e9060210]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [c1ddb1c5-1f3e-4627-9ee3-44f4e9060210 zlFPhUhSWZ dgpyWsRCkctWdcU image true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [c007620c-6089-417b-9707-d26ddce1d145]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [c007620c-6089-417b-9707-d26ddce1d145  aqueduct-test  snpMVHZdiyeoUqzMJGHOxYTsbfqAqtXjkVItIBhgIvarcSbblmmHEfnwcNjQ ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [d3d89aa3-5d6a-4b4b-8201-e2dd70af4eb8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [d3d89aa3-5d6a-4b4b-8201-e2dd70af4eb8 c007620c-6089-417b-9707-d26ddce1d145 kSlxkkUvYx TocDoTiUUJeVakG 0xc000418cc0 2023-05-30 17:14:54.328281 -0700 PDT m=+0.049098021 0xc0000ed2b8 0xc00078ec88]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [bb17638d-e36c-411c-82dd-3ef9a4fcc3c3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [bb17638d-e36c-411c-82dd-3ef9a4fcc3c3 d3d89aa3-5d6a-4b4b-8201-e2dd70af4eb8 2023-05-30 17:14:54.328452 -0700 PDT m=+0.049268950 0xc000020cf0 0xc00012fbd0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [bb17638d-e36c-411c-82dd-3ef9a4fcc3c3 artifact_to_operator c1ddb1c5-1f3e-4627-9ee3-44f4e9060210 0c1f7e0a-596c-427d-ba7c-267916881693 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [315c73e9-a832-469b-aabe-85ef1c867480]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [315c73e9-a832-469b-aabe-85ef1c867480 bb17638d-e36c-411c-82dd-3ef9a4fcc3c3 c1ddb1c5-1f3e-4627-9ee3-44f4e9060210 ALtLhTUZHJ pending 0xc000021110]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE artifact_result SET (content_path, execution_state, metadata) = ($1, $2, $3) WHERE id = $4 RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [OxKmRNwKDO 0xc000418f00 0xc0001e9680 315c73e9-a832-469b-aabe-85ef1c867480]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifactResult_UpdateBatchStatusByStatus
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [562b11fc-1a5d-496a-8d66-e9b82cb6e0cc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [562b11fc-1a5d-496a-8d66-e9b82cb6e0cc SfBigfpkml DQoLjksSjFLLBLb dictionary true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [c43298af-3204-476a-9ed8-6f627e6ca4a7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [c43298af-3204-476a-9ed8-6f627e6ca4a7  aqueduct-test  EhZFxQuvApLIPkPzXDPizdhpgJsjyBqaYFyqjyZdUShIIWpUYaqBhqHzoCIk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [433f97a7-7271-45ac-bb9c-509f50d39137]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [433f97a7-7271-45ac-bb9c-509f50d39137 c43298af-3204-476a-9ed8-6f627e6ca4a7 KQbHjIwqPZ dSYRMmFeYRrkuEq 0xc0004191c0 2023-05-30 17:14:54.329603 -0700 PDT m=+0.050420437 0xc0000f32a8 0xc00078ed70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [58571c9b-db76-4700-8af5-1debca929612]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [58571c9b-db76-4700-8af5-1debca929612 433f97a7-7271-45ac-bb9c-509f50d39137 2023-05-30 17:14:54.329755 -0700 PDT m=+0.050572170 0xc000021f50 0xc000036550]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [58571c9b-db76-4700-8af5-1debca929612 artifact_to_operator 562b11fc-1a5d-496a-8d66-e9b82cb6e0cc c39742c4-9fb9-4736-97c2-dda717e9b8d9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [a3f364cd-de1a-4bf6-8a0c-12590a56f6b6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [a3f364cd-de1a-4bf6-8a0c-12590a56f6b6 58571c9b-db76-4700-8af5-1debca929612 562b11fc-1a5d-496a-8d66-e9b82cb6e0cc PDMNeuiKTx pending 0xc0001523f0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact_result WHERE id = $1 with args: [2284aae2-2b38-4d01-9086-e3a6762572b5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact_result (id, workflow_dag_result_id, artifact_id, content_path, status, execution_state) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [2284aae2-2b38-4d01-9086-e3a6762572b5 58571c9b-db76-4700-8af5-1debca929612 562b11fc-1a5d-496a-8d66-e9b82cb6e0cc RINKSzjAIv pending 0xc000152660]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE artifact_result SET execution_state = $1 WHERE id = $2 RETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [0xc000419640 a3f364cd-de1a-4bf6-8a0c-12590a56f6b6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tUPDATE artifact_result SET\n\t\t\texecution_state = CAST(\n\t\tjson_set(\n\t\t\tjson_set(execution_state, '$.status', $1),\n\t\t\t'$.timestamps.finished_at',\n\t\t\t$2\n\t\t) AS BLOB),\n\t\t\tstatus = $3\n\t\tWHERE\n\t\t\tjson_extract(execution_state, '$.status') = $4\n\t\tRETURNING id,workflow_dag_result_id,artifact_id,content_path,status,metadata,execution_state; with args: [canceled 2023-05-30T17:14:54.33027-07:00 canceled pending]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [b7236b16-5aa6-4413-a5ea-e4b31e1ccb55]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [b7236b16-5aa6-4413-a5ea-e4b31e1ccb55 HZuUiUFXrg XbHMbjeBvZwcJXy untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [17046a1f-1f8a-4933-ae2a-42cad84e2c15]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [17046a1f-1f8a-4933-ae2a-42cad84e2c15 LoetEAKetW XUDXJDUtrnryhmS picklable true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM artifact WHERE id IN ($1) with args: [17046a1f-1f8a-4933-ae2a-42cad84e2c15]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [9fec4061-74e9-4da1-b897-66ac9547ec2f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [9fec4061-74e9-4da1-b897-66ac9547ec2f aOSSUVsZsm HKaNgeqzCZeWGRr picklable true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [507fd288-0d8c-4367-aadc-200b540455c8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [507fd288-0d8c-4367-aadc-200b540455c8 uCuWPtQAqM TyVfpvpkHdgWhxb untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [759f5e6a-51c1-4a6c-8272-fdcd1fdb23a8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [759f5e6a-51c1-4a6c-8272-fdcd1fdb23a8 MSAcmaAvAS RDtXBDGnMCDMOfz string true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM artifact WHERE id IN ($1,$2,$3) with args: [9fec4061-74e9-4da1-b897-66ac9547ec2f 507fd288-0d8c-4367-aadc-200b540455c8 759f5e6a-51c1-4a6c-8272-fdcd1fdb23a8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_Exists
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [e0ef392c-d65b-467a-a4f4-31775b8b4a42]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [e0ef392c-d65b-467a-a4f4-31775b8b4a42 WicMsnOkZl IUNSsCraKQBrSfk boolean true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [e0ef392c-d65b-467a-a4f4-31775b8b4a42]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [04d34343-b9d3-4940-9779-de900d83b1cc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [614603d8-7cee-435b-bb2c-b6434450b2ae]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [614603d8-7cee-435b-bb2c-b6434450b2ae AIStKMupnC MvADvezKymxCWrw string true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,type,should_persist FROM artifact WHERE id = $1; with args: [614603d8-7cee-435b-bb2c-b6434450b2ae]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [f0495091-cc2b-4468-b2ec-52e68d4323fb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [f0495091-cc2b-4468-b2ec-52e68d4323fb UxbdMAyhEc gCTauBGlunxyyOM numeric true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [48b0ee5d-e971-45c9-869b-91297fba6774]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [48b0ee5d-e971-45c9-869b-91297fba6774 mrfxygzWgL cDnnMAWeJSYZBjG tuple true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [1c0c4028-40f0-4d63-b04b-0af4d2293103]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [1c0c4028-40f0-4d63-b04b-0af4d2293103 AeQxmvLHqe eizRbUesPXmQumD json true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,type,should_persist FROM artifact WHERE id IN ($1,$2,$3); with args: [f0495091-cc2b-4468-b2ec-52e68d4323fb 48b0ee5d-e971-45c9-869b-91297fba6774 1c0c4028-40f0-4d63-b04b-0af4d2293103]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_GetByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [a1aaa2f4-325f-4deb-8351-c1c22e99659f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [a1aaa2f4-325f-4deb-8351-c1c22e99659f POnnQVNsqK kejfUlxsWAwWjtp tuple true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [f127af05-248e-4065-ab80-c47a4ad0d548]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [f127af05-248e-4065-ab80-c47a4ad0d548  aqueduct-test  BrWZKvdEANNUPkaNBORKcOQYawyaytedjZtrpZTljvjyNubgyUrETWdtOoPu ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [e5316579-a1fe-4702-afbb-753e7498a658]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [e5316579-a1fe-4702-afbb-753e7498a658 f127af05-248e-4065-ab80-c47a4ad0d548 aFONFwrxmP GDUaMiraBzMlulh 0xc0005f40c0 2023-05-30 17:14:54.333084 -0700 PDT m=+0.053900845 0xc00019bfa8 0xc00078f208]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [5a59965a-b368-488a-a42f-670ba8e5d33f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [5a59965a-b368-488a-a42f-670ba8e5d33f e5316579-a1fe-4702-afbb-753e7498a658 2023-05-30 17:14:54.333229 -0700 PDT m=+0.054045940 0xc000171e60 0xc00019cc30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [5a59965a-b368-488a-a42f-670ba8e5d33f artifact_to_operator a1aaa2f4-325f-4deb-8351-c1c22e99659f d430a735-2b59-486c-b444-9cd2fbb8ab27 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,type,should_persist FROM artifact WHERE id IN\n\t\t\t(\n\t\t\t\tSELECT from_id FROM workflow_dag_edge \n\t\t\t\t\tWHERE workflow_dag_id = $1 AND type = 'artifact_to_operator' \n\t\t\tUNION \n\t\t\t\tSELECT to_id FROM workflow_dag_edge \n\t\t\t\t\tWHERE workflow_dag_id = $1 AND type = 'operator_to_artifact'\n\t\t\t) with args: [5a59965a-b368-488a-a42f-670ba8e5d33f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_GetMetricsByUpstreamArtifactBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [6d03f116-b358-458b-9216-40e9542cbac3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [6d03f116-b358-458b-9216-40e9542cbac3  aqueduct-test  KvSvnXEUmQuNfIqPjHTcdmcQRyRegnCPCePNnimQoCNrtHHZSHVyIifKqRwX ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [9ec3b7c4-8a9f-49a7-85d9-d7c27845f411]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [9ec3b7c4-8a9f-49a7-85d9-d7c27845f411 6d03f116-b358-458b-9216-40e9542cbac3 BMhXNhuqXw vAqhnQXRQSXFJLD 0xc0005f4380 2023-05-30 17:14:54.333824 -0700 PDT m=+0.054640440 0xc0001a1538 0xc00078f2c8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [c869c4f0-e0f6-4732-9eab-99370caacf84]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 9ec3b7c4-8a9f-49a7-85d9-d7c27845f411 2023-05-30 17:14:54.333986 -0700 PDT m=+0.054803282 0xc0001d09f0 0xc00019d360]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ea8ef93d-cdc6-49a4-8407-a3ee89566c3c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ea8ef93d-cdc6-49a4-8407-a3ee89566c3c extract msJvvoFlpVssIAY 0xc00004ecc0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [f8663f18-6b9b-44a2-bb2b-68bdfefb84d7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [f8663f18-6b9b-44a2-bb2b-68bdfefb84d7 extract_artf kbKrImXeoveCluu untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact ea8ef93d-cdc6-49a4-8407-a3ee89566c3c f8663f18-6b9b-44a2-bb2b-68bdfefb84d7 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [40e515f5-da31-4269-8b3a-485db8940426]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [40e515f5-da31-4269-8b3a-485db8940426 function_1 uNdNJGMnLVgpITB 0xc00004ec60 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [a1e73e59-a3fa-4ed4-b754-166d6c1b1857]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [a1e73e59-a3fa-4ed4-b754-166d6c1b1857 function_1_artf PZGJZlDkAcDeOtK untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact 40e515f5-da31-4269-8b3a-485db8940426 a1e73e59-a3fa-4ed4-b754-166d6c1b1857 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator f8663f18-6b9b-44a2-bb2b-68bdfefb84d7 40e515f5-da31-4269-8b3a-485db8940426 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [4e654a42-2881-4298-a261-69c33ce5e3db]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [4e654a42-2881-4298-a261-69c33ce5e3db function_2 ifMofRksnOKExQB 0xc00004ec60 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [8c436d12-944a-456b-86e5-3c8c9e93117c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [8c436d12-944a-456b-86e5-3c8c9e93117c function_2_artf QzIWdJnunSelbYY untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact 4e654a42-2881-4298-a261-69c33ce5e3db 8c436d12-944a-456b-86e5-3c8c9e93117c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator f8663f18-6b9b-44a2-bb2b-68bdfefb84d7 4e654a42-2881-4298-a261-69c33ce5e3db 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [22da86c1-e3fb-45fd-8004-9d41eebc09f6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [22da86c1-e3fb-45fd-8004-9d41eebc09f6 function_3 OzQJYZuYsIIVQni 0xc00004ec60 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [d59fa301-d5f1-46af-b46f-e12fbdc7f183]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [d59fa301-d5f1-46af-b46f-e12fbdc7f183 function_3_artf ApTAIwFjxvlksQb untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact 22da86c1-e3fb-45fd-8004-9d41eebc09f6 d59fa301-d5f1-46af-b46f-e12fbdc7f183 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator a1e73e59-a3fa-4ed4-b754-166d6c1b1857 22da86c1-e3fb-45fd-8004-9d41eebc09f6 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator 8c436d12-944a-456b-86e5-3c8c9e93117c 22da86c1-e3fb-45fd-8004-9d41eebc09f6 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a878a7b2-e49a-4f8d-8324-2e153924ce10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a878a7b2-e49a-4f8d-8324-2e153924ce10 metric_1 JajXgvWVWGCniuy 0xc00004ed80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [b14a1e19-76fd-4d44-b0df-f38ca534225f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [b14a1e19-76fd-4d44-b0df-f38ca534225f metric_1_artf xyhXphnvyQQHwnz untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact a878a7b2-e49a-4f8d-8324-2e153924ce10 b14a1e19-76fd-4d44-b0df-f38ca534225f 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator a1e73e59-a3fa-4ed4-b754-166d6c1b1857 a878a7b2-e49a-4f8d-8324-2e153924ce10 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [782d8f0e-f8cc-489d-9bf6-38bae7313b2d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [782d8f0e-f8cc-489d-9bf6-38bae7313b2d metric_2 DRITguovpoGAtIt 0xc00004ed80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [b184e34c-f6c7-44f4-bf88-e680ba410339]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [b184e34c-f6c7-44f4-bf88-e680ba410339 metric_2_artf TvRaEDtMbmKEEks untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact 782d8f0e-f8cc-489d-9bf6-38bae7313b2d b184e34c-f6c7-44f4-bf88-e680ba410339 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator 8c436d12-944a-456b-86e5-3c8c9e93117c 782d8f0e-f8cc-489d-9bf6-38bae7313b2d 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [6301b46e-e4ee-47e7-a17a-47aea9f140c2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [6301b46e-e4ee-47e7-a17a-47aea9f140c2 check gqibDiuAMPEkWUV 0xc00004ede0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [e54aa995-63e4-4e52-a43a-33d345929071]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [e54aa995-63e4-4e52-a43a-33d345929071 check_artf cnYIYLIFCmbXzmA untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 operator_to_artifact 6301b46e-e4ee-47e7-a17a-47aea9f140c2 e54aa995-63e4-4e52-a43a-33d345929071 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c869c4f0-e0f6-4732-9eab-99370caacf84 artifact_to_operator b14a1e19-76fd-4d44-b0df-f38ca534225f 6301b46e-e4ee-47e7-a17a-47aea9f140c2 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT DISTINCT\n\t\t\tartifact.id,artifact.name,artifact.description,artifact.type,artifact.should_persist,\n\t\t\tedge_artf_to_metrics_op.from_id as upstream_id\n\t\tFROM\n\t\t\tworkflow_dag_edge edge_artf_to_metrics_op,\n\t\t\tworkflow_dag_edge edge_metrics_op_to_artf,\n\t\t\toperator,\n\t\t\tartifact \n\t\tWHERE \n\t\t\tartifact.id = edge_metrics_op_to_artf.to_id\n\t\t\tAND edge_artf_to_metrics_op.to_id = operator.id \n\t\t\tAND edge_metrics_op_to_artf.from_id = operator.id\n\t\t\tAND json_extract(operator.spec, '$.type') = 'metric'\n\t\t\tAND edge_artf_to_metrics_op.from_id IN ($1,$2); with args: [a1e73e59-a3fa-4ed4-b754-166d6c1b1857 8c436d12-944a-456b-86e5-3c8c9e93117c]"
    artifact.go:94: 
        	Error Trace:	/Users/weichen/aqueduct/src/golang/lib/repos/tests/artifact.go:94
        	Error:      	Expected nil, but got: &errors.baseError{msg:"No matching struct field found for column: should_persist", inner:error(nil), stack:[]uintptr{0x100a14a1f, 0x100a14e65, 0x100a144d1, 0x100a15b47, 0x100a18ccf, 0x100a5a19b, 0x1000d3c65, 0x1000d315c, 0x100a4bad6, 0x10011924b, 0x10006f2a1}, framesOnce:sync.Once{done:0x0, m:sync.Mutex{state:0, sema:0x0}}, stackFrames:[]runtime.Frame(nil)}
        	Test:       	TestDatabaseSuite/TestArtifact_GetMetricsByUpstreamArtifactBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_GetNode
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [0cd79528-597e-4867-8289-3b573b7881d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [0cd79528-597e-4867-8289-3b573b7881d0  aqueduct-test  umYLwoHOHbYhEMHUIaCnkiALLfQEADWUAUeUdAOQmFjxfAzsDjAsjwttyMUO ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [df63f81d-e8a5-46ed-a9b0-c8226eb0bdd8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [df63f81d-e8a5-46ed-a9b0-c8226eb0bdd8 0cd79528-597e-4867-8289-3b573b7881d0 pasuhTESsD emerTKSzUdvZOjU 0xc0005f4140 2023-05-30 17:14:54.339593 -0700 PDT m=+0.060409660 0xc000248c00 0xc00078e0a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [636450d9-e521-4049-96a4-6f4eafaf561a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [636450d9-e521-4049-96a4-6f4eafaf561a df63f81d-e8a5-46ed-a9b0-c8226eb0bdd8 2023-05-30 17:14:54.339763 -0700 PDT m=+0.060579545 0xc0001be8d0 0xc0002a00f0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ef9575ab-8b72-4094-b069-ae6999d71b71]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ef9575ab-8b72-4094-b069-ae6999d71b71 extract NyHXgwcGZyYCDAo 0xc0001569c0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [32046254-add6-4ad9-9512-e46a711ca27f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [32046254-add6-4ad9-9512-e46a711ca27f extract_artf kdrOQioJHWwqbeW untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact ef9575ab-8b72-4094-b069-ae6999d71b71 32046254-add6-4ad9-9512-e46a711ca27f 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a8c15fdf-f96a-44f2-87ca-85df7404bd6e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a8c15fdf-f96a-44f2-87ca-85df7404bd6e function_1 PZBPYYlgTvJYNOn 0xc000156960 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [1770699f-a2a6-4a41-8c0a-97784a05cf35]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [1770699f-a2a6-4a41-8c0a-97784a05cf35 function_1_artf KOMIkroYgnQkALV untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact a8c15fdf-f96a-44f2-87ca-85df7404bd6e 1770699f-a2a6-4a41-8c0a-97784a05cf35 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator 32046254-add6-4ad9-9512-e46a711ca27f a8c15fdf-f96a-44f2-87ca-85df7404bd6e 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [baf6ecff-0d16-446b-b7a8-6817ef365d37]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [baf6ecff-0d16-446b-b7a8-6817ef365d37 function_2 SDTcUfAdtzlLwwZ 0xc000156960 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [f0de635c-7a70-4407-8309-ceaf090edca6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [f0de635c-7a70-4407-8309-ceaf090edca6 function_2_artf UBUQPrhVthbTtgj untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact baf6ecff-0d16-446b-b7a8-6817ef365d37 f0de635c-7a70-4407-8309-ceaf090edca6 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator 32046254-add6-4ad9-9512-e46a711ca27f baf6ecff-0d16-446b-b7a8-6817ef365d37 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [d6a6d24c-73ed-4a04-b7b0-fcf82e4af749]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [d6a6d24c-73ed-4a04-b7b0-fcf82e4af749 function_3 FepZBAdbGDyMTho 0xc000156960 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [0ff064b3-4ed4-4357-9d9c-773fcc47cad1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [0ff064b3-4ed4-4357-9d9c-773fcc47cad1 function_3_artf DrRwkOKoYvEcEIk untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact d6a6d24c-73ed-4a04-b7b0-fcf82e4af749 0ff064b3-4ed4-4357-9d9c-773fcc47cad1 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator 1770699f-a2a6-4a41-8c0a-97784a05cf35 d6a6d24c-73ed-4a04-b7b0-fcf82e4af749 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator f0de635c-7a70-4407-8309-ceaf090edca6 d6a6d24c-73ed-4a04-b7b0-fcf82e4af749 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [cfaa21a5-42f7-4f6d-bcd9-7fe5144d4e63]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [cfaa21a5-42f7-4f6d-bcd9-7fe5144d4e63 metric_1 UZpqyyWpLpdgInR 0xc000156a80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [75874f51-a246-4f1f-96c2-6030eaebf6fa]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [75874f51-a246-4f1f-96c2-6030eaebf6fa metric_1_artf QXYUsryZTqryjyD untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact cfaa21a5-42f7-4f6d-bcd9-7fe5144d4e63 75874f51-a246-4f1f-96c2-6030eaebf6fa 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator 1770699f-a2a6-4a41-8c0a-97784a05cf35 cfaa21a5-42f7-4f6d-bcd9-7fe5144d4e63 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [72dc33b6-cc1b-4319-8335-37e27eec78a6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [72dc33b6-cc1b-4319-8335-37e27eec78a6 metric_2 aOtvUvVJhEZGuZI 0xc000156a80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [7d78eb5b-68cb-44aa-86c1-0f240b4aaceb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [7d78eb5b-68cb-44aa-86c1-0f240b4aaceb metric_2_artf TIVyonUOuTKhtdS untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact 72dc33b6-cc1b-4319-8335-37e27eec78a6 7d78eb5b-68cb-44aa-86c1-0f240b4aaceb 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator f0de635c-7a70-4407-8309-ceaf090edca6 72dc33b6-cc1b-4319-8335-37e27eec78a6 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [127651b8-9a33-40c8-855e-6efbe8a76099]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [127651b8-9a33-40c8-855e-6efbe8a76099 check GddzgtAHxOrdVED 0xc000156ae0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [0ef35a72-ecc1-482b-a0f0-c018f6ab7a76]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [0ef35a72-ecc1-482b-a0f0-c018f6ab7a76 check_artf lYNUzOTCyrcQnuM untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a operator_to_artifact 127651b8-9a33-40c8-855e-6efbe8a76099 0ef35a72-ecc1-482b-a0f0-c018f6ab7a76 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [636450d9-e521-4049-96a4-6f4eafaf561a artifact_to_operator 75874f51-a246-4f1f-96c2-6030eaebf6fa 127651b8-9a33-40c8-855e-6efbe8a76099 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [32046254-add6-4ad9-9512-e46a711ca27f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [1770699f-a2a6-4a41-8c0a-97784a05cf35]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [f0de635c-7a70-4407-8309-ceaf090edca6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [0ff064b3-4ed4-4357-9d9c-773fcc47cad1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [75874f51-a246-4f1f-96c2-6030eaebf6fa]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [7d78eb5b-68cb-44aa-86c1-0f240b4aaceb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE id = $1 with args: [0ef35a72-ecc1-482b-a0f0-c018f6ab7a76]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_GetNodesByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [1afcb910-a849-4df6-a8d7-fae0502e16d4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [1afcb910-a849-4df6-a8d7-fae0502e16d4  aqueduct-test  ZnigcFJHUgNTnlLJkTgDCopMSpiJBFCPdPhsGJzkaoIJIxIUZrAIchbkWPjw ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [97bd98e7-704c-454f-a747-7b0b1bad508d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [97bd98e7-704c-454f-a747-7b0b1bad508d 1afcb910-a849-4df6-a8d7-fae0502e16d4 pZlWqgmJVy XXwFqkmXNMGpFlk 0xc0005f51c0 2023-05-30 17:14:54.345336 -0700 PDT m=+0.066153059 0xc00041ce20 0xc00078e4b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [c212f64f-4216-4638-a27a-3d7a64f95218]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 97bd98e7-704c-454f-a747-7b0b1bad508d 2023-05-30 17:14:54.345488 -0700 PDT m=+0.066304815 0xc0002127e0 0xc000036a50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [f0af483e-d00e-4ae1-be41-fbffe29d4445]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [f0af483e-d00e-4ae1-be41-fbffe29d4445 extract FlhYVpIyJaJBWtO 0xc00040ef60 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [1a825547-7a0d-4c59-b8d5-53df58477dcd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [1a825547-7a0d-4c59-b8d5-53df58477dcd extract_artf fGtDtzZJfCTtmKi untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact f0af483e-d00e-4ae1-be41-fbffe29d4445 1a825547-7a0d-4c59-b8d5-53df58477dcd 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [6b8ca98b-69d7-48d6-8386-cdd4b398097b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [6b8ca98b-69d7-48d6-8386-cdd4b398097b function_1 AJuMlZgAzFIbwZI 0xc00040ef00 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [da082bb7-e030-4410-8ffb-88f68ae117c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [da082bb7-e030-4410-8ffb-88f68ae117c0 function_1_artf DZXEiOGZCHZMInt untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 6b8ca98b-69d7-48d6-8386-cdd4b398097b da082bb7-e030-4410-8ffb-88f68ae117c0 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator 1a825547-7a0d-4c59-b8d5-53df58477dcd 6b8ca98b-69d7-48d6-8386-cdd4b398097b 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [5dadf91a-d382-403a-b666-d3cf6bd77da9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [5dadf91a-d382-403a-b666-d3cf6bd77da9 function_2 qKThKtfIudpvNkM 0xc00040ef00 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [bd155d17-a096-42dc-85a6-3e59d48a532c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [bd155d17-a096-42dc-85a6-3e59d48a532c function_2_artf pptmrHQfeakFOeZ untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 5dadf91a-d382-403a-b666-d3cf6bd77da9 bd155d17-a096-42dc-85a6-3e59d48a532c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator 1a825547-7a0d-4c59-b8d5-53df58477dcd 5dadf91a-d382-403a-b666-d3cf6bd77da9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [265c121e-bbe8-4f74-bca3-edd42f5e0648]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [265c121e-bbe8-4f74-bca3-edd42f5e0648 function_3 ddIQVFiRudbwUeM 0xc00040ef00 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [5ab5d57a-6e9c-4b79-bc61-7c5d1e294c1a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [5ab5d57a-6e9c-4b79-bc61-7c5d1e294c1a function_3_artf goeHHrLiHQjgGbL untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 265c121e-bbe8-4f74-bca3-edd42f5e0648 5ab5d57a-6e9c-4b79-bc61-7c5d1e294c1a 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator da082bb7-e030-4410-8ffb-88f68ae117c0 265c121e-bbe8-4f74-bca3-edd42f5e0648 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator bd155d17-a096-42dc-85a6-3e59d48a532c 265c121e-bbe8-4f74-bca3-edd42f5e0648 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [7f7acb0d-0213-42ad-8491-b43ac12895e9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [7f7acb0d-0213-42ad-8491-b43ac12895e9 metric_1 jugFFMZMgFPNXVK 0xc00040f020 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [25dadfea-392c-4185-ab3c-a47c0585b4c3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [25dadfea-392c-4185-ab3c-a47c0585b4c3 metric_1_artf pyMQyfrRaoxIsmS untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 7f7acb0d-0213-42ad-8491-b43ac12895e9 25dadfea-392c-4185-ab3c-a47c0585b4c3 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator da082bb7-e030-4410-8ffb-88f68ae117c0 7f7acb0d-0213-42ad-8491-b43ac12895e9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [1fe902be-d95f-4af6-a510-7fba32f24af0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [1fe902be-d95f-4af6-a510-7fba32f24af0 metric_2 bkYdrnGTUJfiCkQ 0xc00040f020 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [2c6d580e-00d5-4f1a-a52d-7a57c8dfaf32]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [2c6d580e-00d5-4f1a-a52d-7a57c8dfaf32 metric_2_artf ZkLSuZBPWvvYnvT untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 1fe902be-d95f-4af6-a510-7fba32f24af0 2c6d580e-00d5-4f1a-a52d-7a57c8dfaf32 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator bd155d17-a096-42dc-85a6-3e59d48a532c 1fe902be-d95f-4af6-a510-7fba32f24af0 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [99b15e7f-7422-4e27-ad66-3e5ada12f93e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [99b15e7f-7422-4e27-ad66-3e5ada12f93e check KcWRNaacuLGQcqN 0xc00040f080 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [338aee87-fc29-4e24-9ab5-85a30c76bc05]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [338aee87-fc29-4e24-9ab5-85a30c76bc05 check_artf pPxvGOXZaTcxkUZ untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 operator_to_artifact 99b15e7f-7422-4e27-ad66-3e5ada12f93e 338aee87-fc29-4e24-9ab5-85a30c76bc05 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [c212f64f-4216-4638-a27a-3d7a64f95218 artifact_to_operator 25dadfea-392c-4185-ab3c-a47c0585b4c3 99b15e7f-7422-4e27-ad66-3e5ada12f93e 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH artifact_node AS (\n\tWITH artf_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, artifact.id\n\t),\n\tartf_with_input AS ( -- No need to group as input is unique\n\t\tSELECT\n\t\t\tartifact.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\tartifact.name AS name,\n\t\t\tartifact.description AS description,\n\t\t\tartifact.should_persist AS should_persist,\n\t\t\tartifact.type as type,\n\t\t\tworkflow_dag_edge.from_id AS input\n\t\tFROM\n\t\t\tartifact, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND artifact.id = workflow_dag_edge.to_id\n\t)\n\tSELECT -- just do input LEFT JOIN outputs as all artifacts have inputs\n\t\tartf_with_input.id AS id,\n\t\tartf_with_input.dag_id AS dag_id,\n\t\tartf_with_input.name AS name,\n\t\tartf_with_input.description AS description,\n\t\tartf_with_input.should_persist AS should_persist,\n\t\tartf_with_input.type AS type,\n\t\tartf_with_outputs.outputs AS outputs,\n\t\tartf_with_input.input AS input\n\tFROM\n\t\tartf_with_input LEFT JOIN artf_with_outputs\n\tON\n\t\tartf_with_outputs.id = artf_with_input.id\n\t\tAND artf_with_outputs.dag_id = artf_with_input.dag_id\n) SELECT id,name,description,type,should_persist,dag_id,input,outputs FROM artifact_node WHERE dag_id = $1 with args: [c212f64f-4216-4638-a27a-3d7a64f95218]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [b29c6c9d-226e-4451-833b-b5eb8fa4548d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [b29c6c9d-226e-4451-833b-b5eb8fa4548d RzJXLkfbeN GEgdnLLmXSYGluJ image true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE artifact SET (description, type, name) = ($1, $2, $3) WHERE id = $4 RETURNING id,name,description,type,should_persist; with args: [VaGbdRmifvVDtAg dictionary OpzrcMjBUW b29c6c9d-226e-4451-833b-b5eb8fa4548d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestArtifact_ValidateOrg
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [f50506e6-335b-44cf-a151-8c78d3cfec4e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [f50506e6-335b-44cf-a151-8c78d3cfec4e bbfyLMreEp hgESvQlJlfOAtyL tuple true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b08e16ff-63cc-417c-8423-073ddec98d97]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b08e16ff-63cc-417c-8423-073ddec98d97  aqueduct-test  PzAwMFeWLwoeHLFfHWBuwyoYnGivcRCZygoRUjiZNeQedXjqaMxEyWgGuLvu ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [f03ae1ee-0f97-4657-8d78-a679ddc8a1c4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [f03ae1ee-0f97-4657-8d78-a679ddc8a1c4 b08e16ff-63cc-417c-8423-073ddec98d97 ndNGveQSNv QfUzjraaYSFJXXe 0xc000166300 2023-05-30 17:14:54.349497 -0700 PDT m=+0.070313743 0xc0001afed8 0xc00078e758]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [9dd0b578-5fc3-44a2-9b1c-c0046633259d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [9dd0b578-5fc3-44a2-9b1c-c0046633259d f03ae1ee-0f97-4657-8d78-a679ddc8a1c4 2023-05-30 17:14:54.349652 -0700 PDT m=+0.070468166 0xc0005dc570 0xc000473180]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [9dd0b578-5fc3-44a2-9b1c-c0046633259d artifact_to_operator f50506e6-335b-44cf-a151-8c78d3cfec4e 8d3ccadb-c66a-4f78-b568-f1a350e9378d 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [9dd0b578-5fc3-44a2-9b1c-c0046633259d operator_to_artifact 8d3ccadb-c66a-4f78-b568-f1a350e9378d f50506e6-335b-44cf-a151-8c78d3cfec4e 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT COUNT(*) AS count \n\t\tFROM workflow_dag_edge, workflow_dag, workflow, app_user \n\t\tWHERE workflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\tworkflow_dag.workflow_id = workflow.id AND workflow.user_id = app_user.id AND \n\t\tapp_user.organization_id = $1 AND (workflow_dag_edge.from_id = $2 OR workflow_dag_edge.to_id = $2) with args: [aqueduct-test f50506e6-335b-44cf-a151-8c78d3cfec4e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT COUNT(*) AS count \n\t\tFROM workflow_dag_edge, workflow_dag, workflow, app_user \n\t\tWHERE workflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\tworkflow_dag.workflow_id = workflow.id AND workflow.user_id = app_user.id AND \n\t\tapp_user.organization_id = $1 AND (workflow_dag_edge.from_id = $2 OR workflow_dag_edge.to_id = $2) with args: [hQcNSUGOmcjmBWA f50506e6-335b-44cf-a151-8c78d3cfec4e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGEdge_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [7536c12a-35ac-4baf-abb6-55a529e41964]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [7536c12a-35ac-4baf-abb6-55a529e41964  aqueduct-test  ijDehyBvKTMwOQaYLVcMfrmFurHTuhzgZFDgyxRqUZYHbIgKcOYdPshwtqrg ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [dfcd2a30-dc6a-4d0d-821a-ad8958ac8408]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [dfcd2a30-dc6a-4d0d-821a-ad8958ac8408 7536c12a-35ac-4baf-abb6-55a529e41964 uEUQRyzgEL GDmZmwZVwEbNGTk 0xc000167380 2023-05-30 17:14:54.350434 -0700 PDT m=+0.071250072 0xc0001e36e8 0xc00078e828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [b781e300-6b26-4fbd-9182-774f5cd47bed]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [b781e300-6b26-4fbd-9182-774f5cd47bed dfcd2a30-dc6a-4d0d-821a-ad8958ac8408 2023-05-30 17:14:54.350595 -0700 PDT m=+0.071411374 0xc0005dd170 0xc000473a90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [b781e300-6b26-4fbd-9182-774f5cd47bed artifact_to_operator c3bc128b-2861-45c6-af95-af9abb772628 12d78be0-8b90-4c6b-a983-6531454b0e4e 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGEdge_DeleteByDAGBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [8f46d617-bd21-4b5d-a572-9cb0814bc792]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [8f46d617-bd21-4b5d-a572-9cb0814bc792  aqueduct-test  ALZOOltVGfoXjJtInbEVibgCOekxVwsoGswcGOTiSjCwMjvRtpSbrnpsUmmB ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [cbcd8bc5-bc82-41da-bbee-883cea5f3019]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [cbcd8bc5-bc82-41da-bbee-883cea5f3019 8f46d617-bd21-4b5d-a572-9cb0814bc792 QoGVTiZRPu CtaMbnJgcYyKdiL 0xc000167600 2023-05-30 17:14:54.351224 -0700 PDT m=+0.072040821 0xc000002ad8 0xc00078e8e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 cbcd8bc5-bc82-41da-bbee-883cea5f3019 2023-05-30 17:14:54.351405 -0700 PDT m=+0.072221874 0xc0005ddbf0 0xc0000180a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [4273ed39-f517-4c00-b660-0ca73560a58e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [4273ed39-f517-4c00-b660-0ca73560a58e cbcd8bc5-bc82-41da-bbee-883cea5f3019 2023-05-30 17:14:54.351529 -0700 PDT m=+0.072345234 0xc0005dde60 0xc000018370]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 operator_to_artifact beaea93c-7d42-4042-9f8c-1e083043dd0e 34bf56a0-0cc1-4833-8210-ed68ae413402 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 artifact_to_operator fc3314e3-5a3d-476c-9593-edb1008ed5f0 277f9819-6473-4554-9fdc-d5d839bcb72e 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 operator_to_artifact e48a137d-5178-4d2f-b0ba-71fbdb3b04ee 87df42ad-de24-452b-aeb0-67ff4eb895f4 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 artifact_to_operator 62531ff5-4bc9-45e6-8c79-35fd0b6a9a2a 2dd8b747-6fa5-4796-85b7-daa11a4ad7fd 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 artifact_to_operator 7b53c75b-c76d-4263-a89d-844b7c0869f8 e1b8ee2d-6681-40a3-adcc-f36a0fd0900b 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [4273ed39-f517-4c00-b660-0ca73560a58e operator_to_artifact 926b095b-6a41-48e6-901b-0d7b003592bc 0c0378b3-967e-43d4-aa74-4015cf8b453a 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [4273ed39-f517-4c00-b660-0ca73560a58e operator_to_artifact 3de69294-fc76-4b4c-a594-d45566724fbc 4ed86f5e-047d-475c-9c82-c954c2673044 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [4273ed39-f517-4c00-b660-0ca73560a58e artifact_to_operator 23d8b3d4-a694-4457-a2e8-eca85b195a80 5aae2ed1-08cb-4b6e-9eb3-474a2f9087be 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [4273ed39-f517-4c00-b660-0ca73560a58e operator_to_artifact db76783f-e609-4f09-9be5-0801ad0a3c51 8796e032-0b42-4d20-ab5d-da23d0a77f99 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [4273ed39-f517-4c00-b660-0ca73560a58e operator_to_artifact 60b8a81f-0760-47ca-8ba1-4bec2f30791a 588b8112-4741-48ef-8b6f-c99a63928608 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag_edge\n\t\tWHERE workflow_dag_id IN ($1,$2); with args: [73c8e360-4d5c-401d-848d-481f4e0b38e2 4273ed39-f517-4c00-b660-0ca73560a58e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGEdge_GetArtifactToOperatorByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [8e99d997-4da4-4ccc-9192-2a06b8d46423]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [8e99d997-4da4-4ccc-9192-2a06b8d46423  aqueduct-test  bwgADLZbUfouezpAWUMgbIhVnuuXpPxrBhnUwhvrHGPTNAVlIkrfsduYlzJk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [a7881e35-ecbd-4021-9a13-7f2dc1362a09]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [a7881e35-ecbd-4021-9a13-7f2dc1362a09 8e99d997-4da4-4ccc-9192-2a06b8d46423 tlWKeFsyZJ CDgQLrRSlXblKqj 0xc0007be540 2023-05-30 17:14:54.352672 -0700 PDT m=+0.073488332 0xc000023820 0xc00078e9f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 a7881e35-ecbd-4021-9a13-7f2dc1362a09 2023-05-30 17:14:54.352819 -0700 PDT m=+0.073635937 0xc0007991a0 0xc000019d10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 artifact_to_operator 82c4e376-e5d3-4705-8773-973bb65a43c2 cc9cb0fb-ae25-46ff-9b44-36b1c69e98ee 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 operator_to_artifact c04937ce-c6f3-4778-b488-29cc2893d56f b44d1815-d94e-43c4-9786-d15af686ee64 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 artifact_to_operator 3cc4a9ce-2be3-46db-8da8-e26bbb10d7ed 949c6309-4913-4f56-a071-9940c17899ec 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 artifact_to_operator c901f18d-b8c5-4a82-a9f0-0eed099ccf3a f4aa35a5-fb13-4505-8905-2926be48f1e9 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584 artifact_to_operator fbdc1dff-151b-4331-89d2-edf918daed5b 4511f38d-aab5-41bf-9d2c-417efe005e63 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT workflow_dag_id,type,from_id,to_id,idx \n\t\tFROM workflow_dag_edge \n\t\tWHERE \n\t\t\tworkflow_dag_id = $1 \n\t\t\tAND type = 'artifact_to_operator' ORDER BY idx; with args: [ef66878f-b1f9-4be6-bdf4-dd8ba9f01584]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGEdge_GetByDAGBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [ba5c69ea-da93-4642-8aed-8c618e0b1d94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [ba5c69ea-da93-4642-8aed-8c618e0b1d94  aqueduct-test  uUJgGBvtSfwoyjUEzggONwLwFpoNAkHOoVYbntblaDlxLdEmYJuEbgcndwqe ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [6cf84826-3953-436d-b9ac-f30fcdd727ec]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [6cf84826-3953-436d-b9ac-f30fcdd727ec ba5c69ea-da93-4642-8aed-8c618e0b1d94 XdHvEZpLbo MrJlxqtlMkcrqKj 0xc0007be900 2023-05-30 17:14:54.353683 -0700 PDT m=+0.074499322 0xc00002d978 0xc00078ead8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [afb2ec09-916d-4187-96c9-5aac4657e433]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 6cf84826-3953-436d-b9ac-f30fcdd727ec 2023-05-30 17:14:54.353823 -0700 PDT m=+0.074639888 0xc000799f50 0xc00002f770]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [0c44da75-b731-450a-a3ef-5ec79e239bba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba 6cf84826-3953-436d-b9ac-f30fcdd727ec 2023-05-30 17:14:54.353946 -0700 PDT m=+0.074762327 0xc0000a43c0 0xc00002fa40]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 artifact_to_operator 7a0851f8-4221-41cf-990f-c4a912ed520b a5a7971a-f637-45ad-8fcd-cf22d89fe7e5 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 artifact_to_operator 58d89da2-b1f5-4bd9-897d-af77eb2eb9cb 9dc4e33e-ff94-4337-8fd1-38e1b5623b4b 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 artifact_to_operator b1b7d011-4619-48f4-8534-844a8f007c70 612d4641-2e65-4293-b5bc-5009caa27c45 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 operator_to_artifact 59a1b6a0-6e47-4e39-b0a4-404ee3cc700d ac0cc6ef-960d-4fec-be14-0187b39f7617 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [afb2ec09-916d-4187-96c9-5aac4657e433 artifact_to_operator 15fa8507-5113-40c9-922c-f19e3f4cb290 b63bb691-3d64-4948-9c46-f517c786cfbf 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba artifact_to_operator 67e2a355-47a5-403e-846e-08e29a24b2c2 861fb50c-16b5-4eed-b268-69c130098cc9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba artifact_to_operator ac2a4abf-d3e1-4c71-8625-45bba018bd07 c1863620-d50e-4c20-a2ab-c4375cddad75 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba operator_to_artifact 3d6b85f2-0dcc-4054-be91-8e053e396504 e0400924-9e27-43bd-9a9e-b22f52ae7735 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba operator_to_artifact d78149c2-7c8f-42e3-a924-5ad368e43833 f04b7557-df0e-4508-a5b1-e8d2ec96121f 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [0c44da75-b731-450a-a3ef-5ec79e239bba operator_to_artifact 95ec7be6-2582-437b-9999-a2db22591266 18d71499-d00b-477e-8af7-c8dcc122d905 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT workflow_dag_id,type,from_id,to_id,idx \n\t\tFROM workflow_dag_edge \n\t\tWHERE workflow_dag_id IN ($1,$2); with args: [afb2ec09-916d-4187-96c9-5aac4657e433 0c44da75-b731-450a-a3ef-5ec79e239bba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGEdge_GetOperatorToArtifactByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [c577d4fd-fd7c-48c8-bab3-801efb4637e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [c577d4fd-fd7c-48c8-bab3-801efb4637e0  aqueduct-test  stkIHZbTnHzMAKVNJEhSxqssBGMCzIxDjvGFSImnYIkNBaSLsQSBacMfNaDt ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [5e7f7b7d-4e15-4f38-a1bb-aa80a41589cb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [5e7f7b7d-4e15-4f38-a1bb-aa80a41589cb c577d4fd-fd7c-48c8-bab3-801efb4637e0 woPImjYSHE FsbVhAmOjITdNza 0xc0007bef00 2023-05-30 17:14:54.355213 -0700 PDT m=+0.076029879 0xc0000cb058 0xc00078ebf0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [71035c2f-04e8-4dc0-9258-311afb956418]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [71035c2f-04e8-4dc0-9258-311afb956418 5e7f7b7d-4e15-4f38-a1bb-aa80a41589cb 2023-05-30 17:14:54.355353 -0700 PDT m=+0.076169572 0xc0000a53b0 0xc0000ce410]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418 operator_to_artifact 8a217ce0-7b6f-4a79-9420-9108fd619b0e 15639aaf-7bb0-4a90-9453-9000802e245c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418 operator_to_artifact 265cdc71-c016-46f7-8fec-ae34832634ff 9022b5c0-aca8-4fad-8fea-ffb108d4d525 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418 artifact_to_operator 6f305779-998a-4d91-bb8c-1612f408a772 f6589199-87b9-4f1c-bc89-571ade358c09 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418 operator_to_artifact ada1ad7c-660c-4c1a-94e8-90790402597c 02040873-9065-4f04-b6fe-f453110509b1 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418 artifact_to_operator 4f240627-1d9d-46e7-b538-4d64d709fa33 2c0b5c5c-45aa-4302-ac0d-79c66be3d289 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT workflow_dag_id,type,from_id,to_id,idx \n\t\tFROM workflow_dag_edge \n\t\tWHERE \n\t\t\tworkflow_dag_id = $1 \n\t\t\tAND type = 'operator_to_artifact' ORDER BY idx; with args: [71035c2f-04e8-4dc0-9258-311afb956418]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [cf6ec6f4-c71a-4548-87ad-4a564db0fc9a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [cf6ec6f4-c71a-4548-87ad-4a564db0fc9a  aqueduct-test  zAfMxMdqWTNFmOuAhMDwHhxHaILHsHxYgisbMKLjidKYZgucfqxzyTTOyDtp ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [e84afba4-9efe-4ce5-bb02-50fd86262deb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [e84afba4-9efe-4ce5-bb02-50fd86262deb cf6ec6f4-c71a-4548-87ad-4a564db0fc9a yLoBuCvRqT NSfUyKmTMcdUDkm 0xc0007bf2c0 2023-05-30 17:14:54.35635 -0700 PDT m=+0.077166690 0xc0000e1128 0xc00078ecd0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [c88bd12c-ec2e-485d-8083-b4bf0fa88af9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [c88bd12c-ec2e-485d-8083-b4bf0fa88af9 e84afba4-9efe-4ce5-bb02-50fd86262deb 2023-05-30 17:14:54.356533 -0700 PDT m=+0.077349171 0xc00011cae0 0xc0000cfa90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [fa7ad043-5ce3-4720-ba75-376d3f17d10b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [fa7ad043-5ce3-4720-ba75-376d3f17d10b c88bd12c-ec2e-485d-8083-b4bf0fa88af9 pending 2023-05-30 17:14:54.356619 -0700 PDT m=+0.077435649 0xc0000c4648]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b67f926a-2746-4364-9eea-be7b985b0e71]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b67f926a-2746-4364-9eea-be7b985b0e71  aqueduct-test  FIvqBMsZvEFReTNMROfLafVIauAORTtGzTBpTHsPOtxhFxHjMVgLfhzjRHej ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [b1ab918b-0ffd-4be9-8bf7-16ab42099577]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [b1ab918b-0ffd-4be9-8bf7-16ab42099577 b67f926a-2746-4364-9eea-be7b985b0e71 RSchQeMSXI AEyfBsYIYEEtdpx 0xc0007bf600 2023-05-30 17:14:54.357096 -0700 PDT m=+0.077912347 0xc0000ee620 0xc00078eda8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [db4b26d2-e1b4-422d-9e0a-ecfc329497da]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [db4b26d2-e1b4-422d-9e0a-ecfc329497da b1ab918b-0ffd-4be9-8bf7-16ab42099577 2023-05-30 17:14:54.357254 -0700 PDT m=+0.078069959 0xc00037e210 0xc0000cff90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [712494e0-d391-4c8d-8f28-8b5a16a748a3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [712494e0-d391-4c8d-8f28-8b5a16a748a3 db4b26d2-e1b4-422d-9e0a-ecfc329497da pending 2023-05-30 17:14:54.357344 -0700 PDT m=+0.078160369 0xc00037ede0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag_result WHERE id IN ($1) with args: [712494e0-d391-4c8d-8f28-8b5a16a748a3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [324aecbf-1d7a-4157-b1a2-30ca9900fed9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [324aecbf-1d7a-4157-b1a2-30ca9900fed9  aqueduct-test  RGLjwhrTuKqfLWEiCBvSrhBynQuxnjsGOldtFhwWSERElSBYsHMrVxshjpuY ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [954b4b49-4cb7-40f0-97be-ccbe55e244a9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [954b4b49-4cb7-40f0-97be-ccbe55e244a9 324aecbf-1d7a-4157-b1a2-30ca9900fed9 MDzNdKfeRm JUaZMVJCaQgTBWB 0xc0007bf900 2023-05-30 17:14:54.357813 -0700 PDT m=+0.078629362 0xc0000efae0 0xc00078ee70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [6b362575-4371-436d-a343-39a19d452b18]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [6b362575-4371-436d-a343-39a19d452b18 954b4b49-4cb7-40f0-97be-ccbe55e244a9 2023-05-30 17:14:54.357995 -0700 PDT m=+0.078811816 0xc0000209f0 0xc0000f04b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [a2e8fba1-cf7d-4468-82df-60d68a454693]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [a2e8fba1-cf7d-4468-82df-60d68a454693 6b362575-4371-436d-a343-39a19d452b18 pending 2023-05-30 17:14:54.358079 -0700 PDT m=+0.078894938 0xc000020d50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [ddbc40bf-3348-49d3-8977-71392ef5df5c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [ddbc40bf-3348-49d3-8977-71392ef5df5c 6b362575-4371-436d-a343-39a19d452b18 pending 2023-05-30 17:14:54.358199 -0700 PDT m=+0.079015743 0xc000020fc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag_result WHERE id IN ($1,$2) with args: [a2e8fba1-cf7d-4468-82df-60d68a454693 ddbc40bf-3348-49d3-8977-71392ef5df5c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [f329f074-79ac-439a-b41e-99bd6f5433ae]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [f329f074-79ac-439a-b41e-99bd6f5433ae  aqueduct-test  BtKRNQdrJxUabpNXDmOjRypBrvUzpPIRxWkGjflLHnlSzxpvwPrAzZKSBrHN ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [0984113e-5cd5-4103-95e7-1df582d302af]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [0984113e-5cd5-4103-95e7-1df582d302af f329f074-79ac-439a-b41e-99bd6f5433ae ARZQEosqug ZJiwtxqMGUwqDWA 0xc0007bfc80 2023-05-30 17:14:54.358689 -0700 PDT m=+0.079505732 0xc0001592f0 0xc00078ef48]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [97df5bab-8c37-42d6-a803-82c2c49f1f3b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [97df5bab-8c37-42d6-a803-82c2c49f1f3b 0984113e-5cd5-4103-95e7-1df582d302af 2023-05-30 17:14:54.358829 -0700 PDT m=+0.079645168 0xc000021a10 0xc0000f0cd0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [16c25279-6c1c-4589-947e-3a51ba8ebde2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [16c25279-6c1c-4589-947e-3a51ba8ebde2 97df5bab-8c37-42d6-a803-82c2c49f1f3b pending 2023-05-30 17:14:54.35891 -0700 PDT m=+0.079726796 0xc000021c80]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_id,status,created_at,execution_state FROM workflow_dag_result WHERE id = $1; with args: [16c25279-6c1c-4589-947e-3a51ba8ebde2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [8e4c5565-6c9f-4175-a502-d71272a2253c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [8e4c5565-6c9f-4175-a502-d71272a2253c  aqueduct-test  JsTsUotIAeenSWYrpTHopCAezhjIATuUMQTaNgxlSTBBYMyibmQCsWIuxlSj ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [933e7789-a0c1-4b91-8ea1-c1dc62bc8e94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [933e7789-a0c1-4b91-8ea1-c1dc62bc8e94 8e4c5565-6c9f-4175-a502-d71272a2253c AyIObYvzxV ZdkMigvuujzljhn 0xc0007bff80 2023-05-30 17:14:54.359436 -0700 PDT m=+0.080252426 0xc000194980 0xc00078f010]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [30190e50-a01a-4c81-b38f-af337e573e25]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [30190e50-a01a-4c81-b38f-af337e573e25 933e7789-a0c1-4b91-8ea1-c1dc62bc8e94 2023-05-30 17:14:54.359578 -0700 PDT m=+0.080394165 0xc000152840 0xc0000f1310]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [b9952c86-e0ce-414a-b129-d3ff197de101]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [b9952c86-e0ce-414a-b129-d3ff197de101 30190e50-a01a-4c81-b38f-af337e573e25 pending 2023-05-30 17:14:54.359659 -0700 PDT m=+0.080475530 0xc000152ab0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [9373fedc-4f5b-4d65-802d-9581a17e925e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [9373fedc-4f5b-4d65-802d-9581a17e925e 30190e50-a01a-4c81-b38f-af337e573e25 pending 2023-05-30 17:14:54.359783 -0700 PDT m=+0.080599022 0xc000152d20]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [dda04bd6-2fe7-4578-a7c8-9fcb08850c61]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [dda04bd6-2fe7-4578-a7c8-9fcb08850c61 30190e50-a01a-4c81-b38f-af337e573e25 pending 2023-05-30 17:14:54.359904 -0700 PDT m=+0.080720355 0xc000152f90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_id,status,created_at,execution_state FROM workflow_dag_result WHERE id in ($1,$2,$3); with args: [b9952c86-e0ce-414a-b129-d3ff197de101 9373fedc-4f5b-4d65-802d-9581a17e925e dda04bd6-2fe7-4578-a7c8-9fcb08850c61]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_GetByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [938b671d-f568-45a8-a35f-86e0ce19f1ad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [938b671d-f568-45a8-a35f-86e0ce19f1ad  aqueduct-test  ITdYyUhxGhxXnVFKwTLkHNrAGPxLIccTsprySmvGkVUSylgydPIixkGtqlli ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [b552c453-87d1-4f88-97bb-a1d38d7191a5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [b552c453-87d1-4f88-97bb-a1d38d7191a5 938b671d-f568-45a8-a35f-86e0ce19f1ad QNWTGcZMNf jAxZEVqTbSaCLRA 0xc000418840 2023-05-30 17:14:54.360443 -0700 PDT m=+0.081259393 0xc0001b4930 0xc00078f0f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [d650abdb-6746-443f-a186-4a68c7141dc2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [d650abdb-6746-443f-a186-4a68c7141dc2 b552c453-87d1-4f88-97bb-a1d38d7191a5 2023-05-30 17:14:54.360595 -0700 PDT m=+0.081411396 0xc000153b30 0xc0000f1e50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [190954a9-5e67-4543-b9ae-52d4c518ad6c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [190954a9-5e67-4543-b9ae-52d4c518ad6c d650abdb-6746-443f-a186-4a68c7141dc2 pending 2023-05-30 17:14:54.360678 -0700 PDT m=+0.081494048 0xc000153da0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [b4e0e826-193c-4e66-ab00-5679a73dd1d8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [b4e0e826-193c-4e66-ab00-5679a73dd1d8 d650abdb-6746-443f-a186-4a68c7141dc2 pending 2023-05-30 17:14:54.360797 -0700 PDT m=+0.081613204 0xc000170030]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT workflow_dag_result.id,workflow_dag_result.workflow_dag_id,workflow_dag_result.status,workflow_dag_result.created_at,workflow_dag_result.execution_state \n\t\tFROM workflow_dag_result, workflow_dag \n\t\tWHERE \n\t\t\tworkflow_dag_result.workflow_dag_id = workflow_dag.id \n\t\t\tAND workflow_dag.workflow_id = $1; with args: [b552c453-87d1-4f88-97bb-a1d38d7191a5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_GetKOffsetByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [a0046454-329a-4387-b315-af532c871e35]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [a0046454-329a-4387-b315-af532c871e35  aqueduct-test  bGMdIytCwLOabVeaJbeYHxGGPAoucltdjJnSKrJTMDzGMbeJydTGIYhFCWJd ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [b7b41669-f0de-452f-a423-51a8428d43dc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [b7b41669-f0de-452f-a423-51a8428d43dc a0046454-329a-4387-b315-af532c871e35 hlfqApGsnq BrheZWUicqUTgdG 0xc000418bc0 2023-05-30 17:14:54.361339 -0700 PDT m=+0.082154803 0xc0001e4410 0xc00078f1d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [94249ea6-1fb4-4585-a8dc-ae5f623040fb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [94249ea6-1fb4-4585-a8dc-ae5f623040fb b7b41669-f0de-452f-a423-51a8428d43dc 2023-05-30 17:14:54.36148 -0700 PDT m=+0.082296136 0xc000170c00 0xc0001b6730]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [0a68ef45-b92d-4a24-8328-b73909719b6f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [0a68ef45-b92d-4a24-8328-b73909719b6f 94249ea6-1fb4-4585-a8dc-ae5f623040fb pending 2023-05-30 17:14:54.361561 -0700 PDT m=+0.082377741 0xc000170e70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [340b4cd4-b508-43be-8c16-0e52a830eb6a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [340b4cd4-b508-43be-8c16-0e52a830eb6a 94249ea6-1fb4-4585-a8dc-ae5f623040fb pending 2023-05-30 17:14:54.361689 -0700 PDT m=+0.082505009 0xc0001710e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [5663043b-1f9f-45de-96cc-d87e115b916c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [5663043b-1f9f-45de-96cc-d87e115b916c 94249ea6-1fb4-4585-a8dc-ae5f623040fb pending 2023-05-30 17:14:54.361805 -0700 PDT m=+0.082621158 0xc000171350]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [dc185669-b0f8-4986-b57f-284e7d493c44]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [dc185669-b0f8-4986-b57f-284e7d493c44 94249ea6-1fb4-4585-a8dc-ae5f623040fb pending 2023-05-30 17:14:54.361919 -0700 PDT m=+0.082735690 0xc0001715c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT workflow_dag_result.id,workflow_dag_result.workflow_dag_id,workflow_dag_result.status,workflow_dag_result.created_at,workflow_dag_result.execution_state \n\t\tFROM workflow_dag_result, workflow_dag \n\t\tWHERE \n\t\t\tworkflow_dag_result.workflow_dag_id = workflow_dag.id \n\t\t\tAND workflow_dag.workflow_id = $1\n\t\tORDER BY workflow_dag_result.created_at DESC\n\t\tLIMIT $2, -1; with args: [b7b41669-f0de-452f-a423-51a8428d43dc 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_GetWorkflowMetadataBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [9d3c9f25-6b1b-48a9-981e-c7acdbefe5bf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [9d3c9f25-6b1b-48a9-981e-c7acdbefe5bf  aqueduct-test  cjbCrSapBPqczTWWSNnxUSwHAkVuZDnJKjHLOxxclkpUvjwxPNKzCJaCegHk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [b03c9799-0f7d-42fb-b50f-b694c063c988]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [b03c9799-0f7d-42fb-b50f-b694c063c988 9d3c9f25-6b1b-48a9-981e-c7acdbefe5bf OmdATKCXNm ALIEKHUdEutoaAI 0xc000419040 2023-05-30 17:14:54.362546 -0700 PDT m=+0.083362385 0xc00024c518 0xc00078f2c8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [38b3064a-0beb-43a2-9e77-d3b5947d6127]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [38b3064a-0beb-43a2-9e77-d3b5947d6127 b03c9799-0f7d-42fb-b50f-b694c063c988 2023-05-30 17:14:54.362691 -0700 PDT m=+0.083507487 0xc0001d00f0 0xc0001b7540]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [8b2f04bc-3370-46f2-a4b6-445b5bce353a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [8b2f04bc-3370-46f2-a4b6-445b5bce353a 38b3064a-0beb-43a2-9e77-d3b5947d6127 pending 2023-05-30 17:14:54.362775 -0700 PDT m=+0.083591675 0xc0001d0360]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [edf16a33-adb6-4584-a51c-b878c37bb8cd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [edf16a33-adb6-4584-a51c-b878c37bb8cd 38b3064a-0beb-43a2-9e77-d3b5947d6127 pending 2023-05-30 17:14:54.362912 -0700 PDT m=+0.083727869 0xc0001d05d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT \n\t\t\tworkflow.id, workflow.name, workflow_dag_result.id AS dag_result_id\n\t\tFROM \n\t\t\tworkflow, workflow_dag, workflow_dag_result \n\t\tWHERE \n\t\t\tworkflow_dag_result.workflow_dag_id = workflow_dag.id \n\t\t\tAND workflow.id = workflow_dag.workflow_id \n\t\t\tAND workflow_dag_result.id IN ($1,$2); with args: [8b2f04bc-3370-46f2-a4b6-445b5bce353a edf16a33-adb6-4584-a51c-b878c37bb8cd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [74ebed7d-c7e6-4e45-83ea-ec2db22a0b6c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [74ebed7d-c7e6-4e45-83ea-ec2db22a0b6c  aqueduct-test  RBBCEHzwHYqoopOoZuXyQABexIYxgdNdACMbHGwHaDjNBAOdRzqFybNzCQST ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [05621800-26bd-4180-b0ed-ecd64b654123]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [05621800-26bd-4180-b0ed-ecd64b654123 74ebed7d-c7e6-4e45-83ea-ec2db22a0b6c aaKpyRhoRw joJjsNrUNQVzohI 0xc000419580 2023-05-30 17:14:54.363476 -0700 PDT m=+0.084292022 0xc00024dee0 0xc00078f4b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [e2560f53-b245-47c7-89eb-670ce2d52f96]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [e2560f53-b245-47c7-89eb-670ce2d52f96 05621800-26bd-4180-b0ed-ecd64b654123 2023-05-30 17:14:54.363624 -0700 PDT m=+0.084440543 0xc0001d1950 0xc0001b7d60]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [e4b3eff8-ab44-407e-8954-a0148f249662]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [e4b3eff8-ab44-407e-8954-a0148f249662 e2560f53-b245-47c7-89eb-670ce2d52f96 pending 2023-05-30 17:14:54.363716 -0700 PDT m=+0.084532048 0xc000278000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow_dag_result SET execution_state = $1 WHERE id = $2 RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [0xc000278270 e4b3eff8-ab44-407e-8954-a0148f249662]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAGResult_UpdateBatchStatusByStatus
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [381fd978-2137-4e00-8fa8-08db91252474]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [381fd978-2137-4e00-8fa8-08db91252474  aqueduct-test  AhHBprELosxxUqoByopaJwJiQgiWoicVcDakCUQsvvgXHIiBTGeuHSdgzePO ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [093e30fb-788c-45c8-ac35-1344b41cf025]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [093e30fb-788c-45c8-ac35-1344b41cf025 381fd978-2137-4e00-8fa8-08db91252474 wHpDYJryiO donGiPEVeErJOLx 0xc000419880 2023-05-30 17:14:54.364319 -0700 PDT m=+0.085135568 0xc000273580 0xc00078f678]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [da91d636-4f09-4d3a-a153-0d8eb5f00eb9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [da91d636-4f09-4d3a-a153-0d8eb5f00eb9 093e30fb-788c-45c8-ac35-1344b41cf025 2023-05-30 17:14:54.364498 -0700 PDT m=+0.085314355 0xc000278ba0 0xc0002764b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [a6c0bd1b-8ab2-452e-9c79-e5b187e83bfb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [a6c0bd1b-8ab2-452e-9c79-e5b187e83bfb da91d636-4f09-4d3a-a153-0d8eb5f00eb9 pending 2023-05-30 17:14:54.364584 -0700 PDT m=+0.085400019 0xc000278e10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag_result WHERE id = $1 with args: [db53d9cd-2175-4666-9e62-42a2e08b9712]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_result (id, workflow_dag_id, status, created_at, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [db53d9cd-2175-4666-9e62-42a2e08b9712 da91d636-4f09-4d3a-a153-0d8eb5f00eb9 pending 2023-05-30 17:14:54.364714 -0700 PDT m=+0.085530666 0xc000279080]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow_dag_result SET execution_state = $1 WHERE id = $2 RETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [0xc000419b00 a6c0bd1b-8ab2-452e-9c79-e5b187e83bfb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tUPDATE workflow_dag_result SET\n\t\t\texecution_state = CAST(\n\t\tjson_set(\n\t\t\tjson_set(execution_state, '$.status', $1),\n\t\t\t'$.timestamps.finished_at',\n\t\t\t$2\n\t\t) AS BLOB),\n\t\t\tstatus = $3\n\t\tWHERE\n\t\t\tjson_extract(execution_state, '$.status') = $4\n\t\tRETURNING id,workflow_dag_id,status,created_at,execution_state; with args: [canceled 2023-05-30T17:14:54.364927-07:00 canceled pending]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [bd1df65d-6bdb-4301-9f20-2fc34bdab7a7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [bd1df65d-6bdb-4301-9f20-2fc34bdab7a7  aqueduct-test  FSKKVuFuwDHfeVnEuuoBJabJILbqZuuzgvmimEGgDvlIlmBAHAhugbQxiFgC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [cb8ae80c-b738-48fa-9583-45dc43aa91dc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [cb8ae80c-b738-48fa-9583-45dc43aa91dc bd1df65d-6bdb-4301-9f20-2fc34bdab7a7 vgCaZaefIz HgWbaIuLRUjZAgf 0xc000419cc0 2023-05-30 17:14:54.365381 -0700 PDT m=+0.086197464 0xc000287240 0xc00078f770]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [c2c3d660-227e-46bf-a3cc-e9f6c4f0f216]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [c2c3d660-227e-46bf-a3cc-e9f6c4f0f216 cb8ae80c-b738-48fa-9583-45dc43aa91dc 2023-05-30 17:14:54.365539 -0700 PDT m=+0.086354720 0xc00027e278 0xc00027e2a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [680739ff-c362-4d7d-81b1-5312cc16a4b2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [680739ff-c362-4d7d-81b1-5312cc16a4b2  aqueduct-test  AWPiLiMltzEiASSecBesONCODDCfHcZrbzvCPLFdRazyJyiDEDZvvfyYFTXf ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [7e28ac4d-99be-4d10-8f58-400ef316447b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [7e28ac4d-99be-4d10-8f58-400ef316447b 680739ff-c362-4d7d-81b1-5312cc16a4b2 vQvumQRskA sgYFigNIudWCeOa 0xc000419f00 2023-05-30 17:14:54.365982 -0700 PDT m=+0.086798031 0xc00029a380 0xc00078f838]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [b75ba144-abf8-42d3-b194-56abff2bfa64]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [b75ba144-abf8-42d3-b194-56abff2bfa64 7e28ac4d-99be-4d10-8f58-400ef316447b 2023-05-30 17:14:54.366145 -0700 PDT m=+0.086961576 0xc000296750 0xc000277270]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag WHERE id IN ($1) with args: [b75ba144-abf8-42d3-b194-56abff2bfa64]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [d6198cb5-ba00-4e2d-a806-141326172ca1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [d6198cb5-ba00-4e2d-a806-141326172ca1  aqueduct-test  vensEyEcKIpDwevmNURLDBIjbdClcPfErZiTRmUjezbKRPUEQqmBCfGYBdUb ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [ecd557e8-4af1-4ae6-8416-1488d037a83b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [ecd557e8-4af1-4ae6-8416-1488d037a83b d6198cb5-ba00-4e2d-a806-141326172ca1 FgsQnxSPta JNXfnzUJtPGDRfK 0xc00029c180 2023-05-30 17:14:54.366576 -0700 PDT m=+0.087392470 0xc00029b4e0 0xc00078f8f0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [99a8d272-339b-489a-899b-c86c6b7937be]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [99a8d272-339b-489a-899b-c86c6b7937be ecd557e8-4af1-4ae6-8416-1488d037a83b 2023-05-30 17:14:54.366746 -0700 PDT m=+0.087561866 0xc000297230 0xc000277540]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [5ce2c6be-93dc-4768-8d64-db07bcd4c60b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [5ce2c6be-93dc-4768-8d64-db07bcd4c60b ecd557e8-4af1-4ae6-8416-1488d037a83b 2023-05-30 17:14:54.366866 -0700 PDT m=+0.087681788 0xc0002974a0 0xc000277810]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag WHERE id IN ($1,$2) with args: [99a8d272-339b-489a-899b-c86c6b7937be 5ce2c6be-93dc-4768-8d64-db07bcd4c60b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [a4c66ccd-c0e5-4cf8-b53c-a23c35efcdbd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [a4c66ccd-c0e5-4cf8-b53c-a23c35efcdbd  aqueduct-test  cYfOaqaZFXlKqLtgHYfbjEMPeAIldsYhOzKpFSOYRwJIylDmDMmgcquneIXi ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [fd52c640-496f-4982-9b1d-5cc6c86aef1e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [fd52c640-496f-4982-9b1d-5cc6c86aef1e a4c66ccd-c0e5-4cf8-b53c-a23c35efcdbd gQZqFVPbiw FoMjEUxzzTxydBV 0xc0005f40c0 2023-05-30 17:14:54.368059 -0700 PDT m=+0.088875013 0xc0003c6348 0xc00078e018]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [4180f831-d8ca-42e5-adf7-2051b8a63b2e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [4180f831-d8ca-42e5-adf7-2051b8a63b2e fd52c640-496f-4982-9b1d-5cc6c86aef1e 2023-05-30 17:14:54.368219 -0700 PDT m=+0.089034651 0xc000296420 0xc0002a0000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_id,created_at,storage_config,engine_config FROM workflow_dag WHERE id = $1; with args: [4180f831-d8ca-42e5-adf7-2051b8a63b2e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [24365fae-20ef-4cea-924f-ff9ed1b545be]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [24365fae-20ef-4cea-924f-ff9ed1b545be  aqueduct-test  cupIQZwIlqNNKniNVzBnxqEAjGPdGpsqSkYNXqrKeTDgwKPRYQHeHuePvBRh ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [d735d0ef-debb-49aa-80c9-0b1e2ffe0813]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [d735d0ef-debb-49aa-80c9-0b1e2ffe0813 24365fae-20ef-4cea-924f-ff9ed1b545be HOWibCmstp coemJCGRphZjibJ 0xc0005f43c0 2023-05-30 17:14:54.368701 -0700 PDT m=+0.089517247 0xc0003c76c8 0xc00078e0e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [acb9b6c9-3128-4a50-a0df-ecc7de891812]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [acb9b6c9-3128-4a50-a0df-ecc7de891812 d735d0ef-debb-49aa-80c9-0b1e2ffe0813 2023-05-30 17:14:54.368857 -0700 PDT m=+0.089673519 0xc000297020 0xc0002a04b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [f327b6cf-4ddb-47cb-b622-e90ec0f6e5b9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [f327b6cf-4ddb-47cb-b622-e90ec0f6e5b9 d735d0ef-debb-49aa-80c9-0b1e2ffe0813 2023-05-30 17:14:54.368979 -0700 PDT m=+0.089794923 0xc000297290 0xc0002a0780]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [e196dd74-a604-4610-8423-1ca9ccae6436]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [e196dd74-a604-4610-8423-1ca9ccae6436 d735d0ef-debb-49aa-80c9-0b1e2ffe0813 2023-05-30 17:14:54.369094 -0700 PDT m=+0.089910006 0xc000297500 0xc0002a0a50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_id,created_at,storage_config,engine_config FROM workflow_dag WHERE id IN ($1,$2,$3); with args: [acb9b6c9-3128-4a50-a0df-ecc7de891812 f327b6cf-4ddb-47cb-b622-e90ec0f6e5b9 e196dd74-a604-4610-8423-1ca9ccae6436]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetByArtifactResultBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetByDAGResult
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetByOperator
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b017bf2f-8718-4cf7-a57f-48f76213c313]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b017bf2f-8718-4cf7-a57f-48f76213c313  aqueduct-test  HAJKhEqMjdLKBEDNQmiGHoDntNVhkITdEUdDVUoXMFsFFHVeCSQWZkKtvXBf ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [f3bac2af-41f5-440a-b8e9-3104cd003b94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [f3bac2af-41f5-440a-b8e9-3104cd003b94 b017bf2f-8718-4cf7-a57f-48f76213c313 FPQcsXaoKY EPKgntPkqJZVOwp 0xc0005f4880 2023-05-30 17:14:54.370006 -0700 PDT m=+0.090822541 0xc00070e218 0xc00078e4d8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [2db2a8a1-d8f9-458a-bc2a-9d881a91c7b4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [2db2a8a1-d8f9-458a-bc2a-9d881a91c7b4 f3bac2af-41f5-440a-b8e9-3104cd003b94 2023-05-30 17:14:54.370163 -0700 PDT m=+0.090979341 0xc0001becf0 0xc0002a0f00]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [3fb5aded-fc00-4cb8-a9ce-655eed9c3ee0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [3fb5aded-fc00-4cb8-a9ce-655eed9c3ee0 f3bac2af-41f5-440a-b8e9-3104cd003b94 2023-05-30 17:14:54.37029 -0700 PDT m=+0.091106135 0xc0001befc0 0xc0002a11d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [ac4cb8f2-0676-4d9a-9f7d-8ac1ca1c9ee7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [ac4cb8f2-0676-4d9a-9f7d-8ac1ca1c9ee7 f3bac2af-41f5-440a-b8e9-3104cd003b94 2023-05-30 17:14:54.370406 -0700 PDT m=+0.091221952 0xc0001bf230 0xc0002a14a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_id,created_at,storage_config,engine_config FROM workflow_dag WHERE workflow_id = $1; with args: [f3bac2af-41f5-440a-b8e9-3104cd003b94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetLatestByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [081e6449-4892-49e3-b0a4-92ad77cd4d4c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [081e6449-4892-49e3-b0a4-92ad77cd4d4c  aqueduct-test  atperGpincSETxJXLJWnGtOjUZBpsiJlldEiySdiTjamHzsvHugGagpEePbo ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [44cef13a-3c01-428a-88b4-8214f3796996]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [44cef13a-3c01-428a-88b4-8214f3796996 081e6449-4892-49e3-b0a4-92ad77cd4d4c JnSxZMXEkE LRoPmaxYWcmDgsD 0xc0005f4c00 2023-05-30 17:14:54.370926 -0700 PDT m=+0.091742447 0xc000124a58 0xc00078e5b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [b61be336-c8ce-4253-8fc1-57f471a5341f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [b61be336-c8ce-4253-8fc1-57f471a5341f 44cef13a-3c01-428a-88b4-8214f3796996 2023-05-30 17:14:54.371098 -0700 PDT m=+0.091914058 0xc0002ac0c0 0xc0002a1950]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [b5d76ce8-878c-4fa0-b716-6bf338674524]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [b5d76ce8-878c-4fa0-b716-6bf338674524 44cef13a-3c01-428a-88b4-8214f3796996 2023-05-30 17:14:54.371218 -0700 PDT m=+0.092034436 0xc0002ac330 0xc0002a1c20]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [f5667c39-99d4-4032-aaae-c8e3cca04b69]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [f5667c39-99d4-4032-aaae-c8e3cca04b69 44cef13a-3c01-428a-88b4-8214f3796996 2023-05-30 17:14:54.371333 -0700 PDT m=+0.092149483 0xc0002ac5a0 0xc0002a1ef0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_id,created_at,storage_config,engine_config \n\t\tFROM workflow_dag \n\t\tWHERE workflow_id = $1 \n\t\tORDER BY created_at DESC LIMIT 1; with args: [44cef13a-3c01-428a-88b4-8214f3796996]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_GetLatestIDsByOrgAndEngine
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [5a570c44-c728-4515-a24a-9583d7861aa7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [5a570c44-c728-4515-a24a-9583d7861aa7  aqueduct-test  phsTeoUDnHZgpBmcHAIJmCYynfhhpZHkJaQfPMUzRYEeVKFnHLyoxrMLDOQn ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [f4749635-87c9-49a3-ae6d-3e89e82c9424]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [f4749635-87c9-49a3-ae6d-3e89e82c9424 5a570c44-c728-4515-a24a-9583d7861aa7 HVIdkajxwK AFIkZrUuYwsUwKO 0xc0005f4f80 2023-05-30 17:14:54.371826 -0700 PDT m=+0.092641611 0xc00003f518 0xc00078e688]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [7a223fcf-95d9-4630-8db6-3d22a39b9bf3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [7a223fcf-95d9-4630-8db6-3d22a39b9bf3 f4749635-87c9-49a3-ae6d-3e89e82c9424 2023-05-30 17:14:54.371968 -0700 PDT m=+0.092783818 0xc0002ad830 0xc00012e730]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [007207f8-e594-4963-aca0-f690d2337c12]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [007207f8-e594-4963-aca0-f690d2337c12 f4749635-87c9-49a3-ae6d-3e89e82c9424 2023-05-30 17:14:54.372087 -0700 PDT m=+0.092903200 0xc0002adaa0 0xc00012ea50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [5269b9e8-dc64-4484-9603-2ab77606632c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [5269b9e8-dc64-4484-9603-2ab77606632c f4749635-87c9-49a3-ae6d-3e89e82c9424 2023-05-30 17:14:54.372203 -0700 PDT m=+0.093018977 0xc0002add10 0xc00012ee10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT workflow_dag.id \n\t\tFROM workflow_dag \n\t\tWHERE created_at IN \n\t\t(\n\t\t\tSELECT MAX(workflow_dag.created_at) \n\t\t\tFROM app_user, workflow, workflow_dag \n\t\t\tWHERE\n\t\t\t\tworkflow.id = workflow_dag.workflow_id\n\t\t\t\tAND json_extract(workflow_dag.engine_config, '$.type') = $1\n\t\t\t\t\n\t\t\tAND app_user.organization_id = $2\n\t\t\tAND app_user.id = workflow.user_id\n\t\t\n\t\t \tGROUP BY workflow.id\n\t\t); with args: [aqueduct aqueduct-test]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT workflow_dag.id \n\t\tFROM workflow_dag \n\t\tWHERE created_at IN \n\t\t(\n\t\t\tSELECT MAX(workflow_dag.created_at) \n\t\t\tFROM app_user, workflow, workflow_dag \n\t\t\tWHERE\n\t\t\t\tworkflow.id = workflow_dag.workflow_id\n\t\t\t\tAND json_extract(workflow_dag.engine_config, '$.type') = $1\n\t\t\t\t\n\t\t \tGROUP BY workflow.id\n\t\t); with args: [aqueduct]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT workflow_dag.id \n\t\tFROM workflow_dag \n\t\tWHERE created_at IN \n\t\t(\n\t\t\tSELECT MAX(workflow_dag.created_at) \n\t\t\tFROM app_user, workflow, workflow_dag \n\t\t\tWHERE\n\t\t\t\tworkflow.id = workflow_dag.workflow_id\n\t\t\t\tAND json_extract(workflow_dag.engine_config, '$.type') = $1\n\t\t\t\t\n\t\t \tGROUP BY workflow.id\n\t\t); with args: [airflow]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestDAG_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [fc3eff05-1b22-435b-9cb8-ad33a69e6a81]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [fc3eff05-1b22-435b-9cb8-ad33a69e6a81  aqueduct-test  bbuorfAdaqTCBbTrjgbyUIHqNFssgEVqSjLXUvHfunWslQxjhTbACsOCFDal ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [f4519578-6545-4c89-abd9-3fc3f26d851c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [f4519578-6545-4c89-abd9-3fc3f26d851c fc3eff05-1b22-435b-9cb8-ad33a69e6a81 yTaOlIQMnF ctCJmlnjUZxbqoT 0xc0005f5380 2023-05-30 17:14:54.372918 -0700 PDT m=+0.093734090 0xc0003335d0 0xc00078e788]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [1b989545-dc63-47b1-baa5-ee0db7970f14]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [1b989545-dc63-47b1-baa5-ee0db7970f14 f4519578-6545-4c89-abd9-3fc3f26d851c 2023-05-30 17:14:54.373059 -0700 PDT m=+0.093874755 0xc000212a50 0xc00012f1d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow_dag SET storage_config = $1 WHERE id = $2 RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [0xc000212cc0 1b989545-dc63-47b1-baa5-ee0db7970f14]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [015576c0-8782-4597-82ca-db57dd170bcf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [015576c0-8782-4597-82ca-db57dd170bcf 0xc00012f6e0 3d43f900-7e52-43a2-8d13-1bf8127cdeaf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [836a5126-a9d6-4580-a6cc-cc19811e0828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [836a5126-a9d6-4580-a6cc-cc19811e0828 0xc000213920 3d3ce170-baa5-4584-87e5-e5b430a86af0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM artifact_result WHERE id IN ($1) with args: [836a5126-a9d6-4580-a6cc-cc19811e0828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [2fd42268-f148-48bc-a7cf-f990d624e8e3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [2fd42268-f148-48bc-a7cf-f990d624e8e3 0xc00054bbf0 fa7f9766-2f2c-46ac-ac8d-0f8dbcdda6bc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [ce3957d5-9930-4cb9-bfc5-75116cec6800]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [ce3957d5-9930-4cb9-bfc5-75116cec6800 0xc0004109c0 6f526636-c97f-4e3c-93a3-1af5fb762e86]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [4634f669-2fb8-400b-8a2a-77815a8e7221]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [4634f669-2fb8-400b-8a2a-77815a8e7221 0xc000410cc0 68af65f2-25ab-4c60-8119-5304b4dca783]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_dag WHERE id IN ($1,$2,$3) with args: [2fd42268-f148-48bc-a7cf-f990d624e8e3 ce3957d5-9930-4cb9-bfc5-75116cec6800 4634f669-2fb8-400b-8a2a-77815a8e7221]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [6a63fb61-254d-49fc-9068-0889f889a22e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [6a63fb61-254d-49fc-9068-0889f889a22e 0xc0004113b0 f9d81ec7-941c-4b0c-91c0-bf05b77c0dea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,spec,hash,garbage_collected FROM execution_environment WHERE id = $1; with args: [6a63fb61-254d-49fc-9068-0889f889a22e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [05e0c577-c1e9-4df7-88b1-843a6d5e57b4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [05e0c577-c1e9-4df7-88b1-843a6d5e57b4 0xc000411bc0 b3df4d7b-6328-47bd-8fa0-c1e5b1720ca9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [48007b18-7b6f-4da1-9ecd-355a88a5cfd8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [48007b18-7b6f-4da1-9ecd-355a88a5cfd8 0xc000411ef0 0d9bfa12-4eb3-4a0e-bf48-f7bbf526b8fb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [47c1e29c-7d8e-4b7a-bad4-c41cbc4688b9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [47c1e29c-7d8e-4b7a-bad4-c41cbc4688b9 0xc0005dc270 78eb4745-2716-44c3-a257-20f13eb1c992]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,spec,hash,garbage_collected FROM execution_environment WHERE id IN ($1,$2,$3); with args: [05e0c577-c1e9-4df7-88b1-843a6d5e57b4 48007b18-7b6f-4da1-9ecd-355a88a5cfd8 47c1e29c-7d8e-4b7a-bad4-c41cbc4688b9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_GetByHash
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [9502ce50-c253-4429-9a5b-f5ccf7467e12]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [9502ce50-c253-4429-9a5b-f5ccf7467e12 0xc0005dc9f0 cdea7b2c-a1f0-4c50-b717-e5bbf9741f95]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,spec,hash,garbage_collected FROM execution_environment WHERE hash = $1; with args: [cdea7b2c-a1f0-4c50-b717-e5bbf9741f95]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_GetByOperatorBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [54bf0b56-b7f2-4971-ac7a-c4f67d3b3d1d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [54bf0b56-b7f2-4971-ac7a-c4f67d3b3d1d  aqueduct-test  hhHymcEPkDQIsPpAiTEYDpocgUsHKxNbNUWPlvHETrzElcxdWXhtyFmURYCC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [cfde876a-523e-4a34-85f3-372730e24bab]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [cfde876a-523e-4a34-85f3-372730e24bab 54bf0b56-b7f2-4971-ac7a-c4f67d3b3d1d JLGflChGQJ cWDvKWBWLgkvUjL 0xc0007be7c0 2023-05-30 17:14:54.376027 -0700 PDT m=+0.096842825 0xc0007895f0 0xc00078ec08]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e cfde876a-523e-4a34-85f3-372730e24bab 2023-05-30 17:14:54.376305 -0700 PDT m=+0.097121010 0xc0005dd620 0xc00012fcc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [571e9476-518a-4efe-a263-84619087c40e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [571e9476-518a-4efe-a263-84619087c40e 0xc0005dd890 2ea60e78-a263-4272-8ba1-6ad7dd1d242f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [2c99c626-5449-4c24-b893-1e6b51e37f2d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [2c99c626-5449-4c24-b893-1e6b51e37f2d 0xc0005ddbc0 6a358862-6a1e-47f2-ba94-fc8500017867]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [10ea5f46-8ff0-4fee-b178-e452ca82d0eb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [10ea5f46-8ff0-4fee-b178-e452ca82d0eb 0xc0005ddec0 964a8000-a8df-4d12-b80b-90a2bc81cb8a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [cb959cc7-ceb5-42a0-8c42-288d615d159b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [cb959cc7-ceb5-42a0-8c42-288d615d159b 0xc000798360 5dfa4a15-6191-4a50-a123-3d3c856e3047]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [bc559199-7af6-4f80-a54c-47aaf85d7ee8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [bc559199-7af6-4f80-a54c-47aaf85d7ee8 0xc000798720 134a1d38-4dc4-4589-85d3-e780e5282279]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [285bb16e-3631-4b13-b620-a69eda043828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [285bb16e-3631-4b13-b620-a69eda043828 0xc000798b10 7bb3b7ca-79e4-47fa-8545-e1ff813ed6d4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [3702979f-545f-47fd-91d6-43638563c02e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [3702979f-545f-47fd-91d6-43638563c02e WtldXgBkth puzXvMdGrdlaKoJ 0xc0003b1b00 571e9476-518a-4efe-a263-84619087c40e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact 3702979f-545f-47fd-91d6-43638563c02e 9effd4cc-3cbe-47b3-ac3a-23e1fa69c26b 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [34233b4a-7b82-4562-ad12-9df98b3cf865]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [34233b4a-7b82-4562-ad12-9df98b3cf865 gAcrUvFpeZ BDxJBETLftDmsFB 0xc0003b1e60 2c99c626-5449-4c24-b893-1e6b51e37f2d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact 34233b4a-7b82-4562-ad12-9df98b3cf865 c92469ad-bad8-4f24-b711-f6e1a789b2d4 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [9635709f-b8e5-4890-84e3-286ef27a2aac]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [9635709f-b8e5-4890-84e3-286ef27a2aac VyZNbobmFN KvbCAJWzHKcnMQm 0xc0001561e0 10ea5f46-8ff0-4fee-b178-e452ca82d0eb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact 9635709f-b8e5-4890-84e3-286ef27a2aac 2421edad-93a6-43c2-8d14-85a0d5d2ae95 2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [b121f762-7802-4fae-ac13-eb4b3b5d37be]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [b121f762-7802-4fae-ac13-eb4b3b5d37be QFeCdIOyNc CpKYbhFBqBWNDUR 0xc000156540 cb959cc7-ceb5-42a0-8c42-288d615d159b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact b121f762-7802-4fae-ac13-eb4b3b5d37be d16342ae-1715-4996-a321-5b4e6ac7b788 3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ed841fec-a863-4d07-91af-fb2a875900e6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ed841fec-a863-4d07-91af-fb2a875900e6 avEVYxzENU YQWdtMHZeKJiWPu 0xc000156900 bc559199-7af6-4f80-a54c-47aaf85d7ee8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact ed841fec-a863-4d07-91af-fb2a875900e6 012c5480-3577-43b9-b1a8-993fe984861d 4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [41ab9a18-89f8-4d14-bd04-8a30029cc12a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [41ab9a18-89f8-4d14-bd04-8a30029cc12a oGngbHAdbm YKtfVdoURlcWTWc 0xc000156c60 285bb16e-3631-4b13-b620-a69eda043828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [624c4507-2ccb-4fa5-a5ff-7d306198d39e operator_to_artifact 41ab9a18-89f8-4d14-bd04-8a30029cc12a 03e618d3-7392-4943-8a3c-8bbdf28768e2 5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT operator.id AS operator_id, execution_environment.id,execution_environment.spec,execution_environment.hash,execution_environment.garbage_collected\n\t\tFROM execution_environment, operator\n\t\tWHERE operator.execution_environment_id = execution_environment.id\n\t\tAND operator.id IN ($1,$2,$3); with args: [3702979f-545f-47fd-91d6-43638563c02e 9635709f-b8e5-4890-84e3-286ef27a2aac ed841fec-a863-4d07-91af-fb2a875900e6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestExecutionEnvironment_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM execution_environment WHERE id = $1 with args: [d25e7df5-ec1e-4eb7-952a-4d001431fb19]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO execution_environment (id, spec, hash) VALUES ($1, $2, $3) RETURNING id,spec,hash,garbage_collected; with args: [d25e7df5-ec1e-4eb7-952a-4d001431fb19 0xc0000a43f0 81709cf8-59c4-4c29-86e1-09b19bca7af6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE execution_environment SET (spec, hash) = ($1, $2) WHERE id = $3 RETURNING id,spec,hash,garbage_collected; with args: [0xc0000a4720 9b9cfed5-3036-434b-ac9e-ab8360ba32fe d25e7df5-ec1e-4eb7-952a-4d001431fb19]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestNotification_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [cd7a0618-56bd-4b22-a864-785086b045ce]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [cd7a0618-56bd-4b22-a864-785086b045ce  aqueduct-test  ZLbYQhckUqkMVZwiyeGQEOCWkVrSLlrHLkvmWFryvXQnUzFZfoUAqOHCdlzi ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [dc528395-13c5-4094-84a7-36a085fab9b4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO notification (id, receiver_id, content, status, level, association, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,receiver_id,content,status,level,association,created_at; with args: [dc528395-13c5-4094-84a7-36a085fab9b4 cd7a0618-56bd-4b22-a864-785086b045ce wCvDpkwCKz unread success 0xc00015dfa0 2023-05-30 17:14:54.383144 -0700 PDT m=+0.103959512]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestNotification_GetByReceiverAndStatus
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [47b47d3d-04ec-405d-b01f-a021385c7200]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [47b47d3d-04ec-405d-b01f-a021385c7200  aqueduct-test  iiLankwjODNLQaPcSOMslXDzKbNfNZVZOSkVWaOaYSYIsXUtxwOFZOjjJfzb ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [9da9654c-519a-427b-b05d-2017d7835fa3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO notification (id, receiver_id, content, status, level, association, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,receiver_id,content,status,level,association,created_at; with args: [9da9654c-519a-427b-b05d-2017d7835fa3 47b47d3d-04ec-405d-b01f-a021385c7200 sjwcqPMLnd unread success 0xc0005da320 2023-05-30 17:14:54.383631 -0700 PDT m=+0.104446955]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,receiver_id,content,status,level,association,created_at FROM notification WHERE receiver_id = $1 AND status = $2; with args: [47b47d3d-04ec-405d-b01f-a021385c7200 unread]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestNotification_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [a8e9a5e9-a199-47ad-baec-106c7e6e7c56]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [a8e9a5e9-a199-47ad-baec-106c7e6e7c56  aqueduct-test  nQEwaHEBOQqAcEWQZsBZSOazyrLIOOVrgOOLknNTBFlznnZDiGUpTUIjiNNS ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [a4bf0c00-2bae-4e9d-ba11-b026d1789cb3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO notification (id, receiver_id, content, status, level, association, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,receiver_id,content,status,level,association,created_at; with args: [a4bf0c00-2bae-4e9d-ba11-b026d1789cb3 a8e9a5e9-a199-47ad-baec-106c7e6e7c56 OtQlpQcSBJ unread success 0xc0005da460 2023-05-30 17:14:54.384106 -0700 PDT m=+0.104922049]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE notification SET status = $1 WHERE id = $2 RETURNING id,receiver_id,content,status,level,association,created_at; with args: [unread a4bf0c00-2bae-4e9d-ba11-b026d1789cb3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE notification SET status = $1 WHERE id = $2 RETURNING id,receiver_id,content,status,level,association,created_at; with args: [archived a4bf0c00-2bae-4e9d-ba11-b026d1789cb3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestNotification_ValidateUser
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [bc4d0f2e-563c-45e7-a93d-623d887a3705]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [bc4d0f2e-563c-45e7-a93d-623d887a3705  aqueduct-test  VYFUJZsuTxZRVnEHnlhoKjzwdMDWqnEKIKniBRiGgVkcDYPNIbgrCiEEAvKq ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [11a24839-a378-4a3d-b8cc-2ba68f483cad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO notification (id, receiver_id, content, status, level, association, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,receiver_id,content,status,level,association,created_at; with args: [11a24839-a378-4a3d-b8cc-2ba68f483cad bc4d0f2e-563c-45e7-a93d-623d887a3705 gtCICnWYMq unread success 0xc0005da5a0 2023-05-30 17:14:54.384717 -0700 PDT m=+0.105532818]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(*) AS count FROM notification WHERE id = $1 AND receiver_id = $2; with args: [11a24839-a378-4a3d-b8cc-2ba68f483cad bc4d0f2e-563c-45e7-a93d-623d887a3705]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(*) AS count FROM notification WHERE id = $1 AND receiver_id = $2; with args: [11a24839-a378-4a3d-b8cc-2ba68f483cad 2c6df384-c7ce-4327-a1e4-a808d51cf932]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [6518c92a-7567-47fd-ac46-9af2ab1fb341]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [6518c92a-7567-47fd-ac46-9af2ab1fb341 6a5c5c25-a96c-46ab-9761-e19bd28ac6fc f129a912-f149-4515-b26f-28f4a9362c58 pending 0xc0002f1e90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [b960d949-a815-45b8-ba4c-a4c1bd497290]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [b960d949-a815-45b8-ba4c-a4c1bd497290 6d178098-a04b-43ea-b768-42a51b31e45d b0fef70a-44d8-4ab9-988b-0934932865e1 pending 0xc000020150]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM operator_result WHERE id IN ($1) with args: [b960d949-a815-45b8-ba4c-a4c1bd497290]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [8a234a44-5390-483a-ad94-4aaffd53ed2e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [8a234a44-5390-483a-ad94-4aaffd53ed2e 9c239379-fffe-4a21-93bc-2473f12a2e1a 06b3b06b-49b0-4e72-9f5b-6f054f903bb8 pending 0xc000020840]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [7bde1243-ebfd-442d-97f6-4420908ee5dd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [7bde1243-ebfd-442d-97f6-4420908ee5dd 9c239379-fffe-4a21-93bc-2473f12a2e1a 06b3b06b-49b0-4e72-9f5b-6f054f903bb8 pending 0xc000020ae0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [69870452-b0b8-4cc1-8312-9ada41cc2b7f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [69870452-b0b8-4cc1-8312-9ada41cc2b7f 9c239379-fffe-4a21-93bc-2473f12a2e1a 06b3b06b-49b0-4e72-9f5b-6f054f903bb8 pending 0xc000020e10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM operator_result WHERE id IN ($1,$2,$3) with args: [8a234a44-5390-483a-ad94-4aaffd53ed2e 7bde1243-ebfd-442d-97f6-4420908ee5dd 69870452-b0b8-4cc1-8312-9ada41cc2b7f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [5dfe3e7f-348f-49ac-b301-e226388f3800]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [5dfe3e7f-348f-49ac-b301-e226388f3800 40ec559b-2a38-4752-be84-3a616887bbfc cc34b936-245a-43b1-b090-6707d0aa872a pending 0xc000021470]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,operator_id,status,execution_state FROM operator_result WHERE id = $1; with args: [5dfe3e7f-348f-49ac-b301-e226388f3800]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [3634a2e2-8798-49e5-9a18-58ef6c9c904d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [3634a2e2-8798-49e5-9a18-58ef6c9c904d b53dafea-97c3-4a18-a342-217dc48cc72c f9bbe0cb-88b1-45aa-9634-211c31a2583b pending 0xc000021bc0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [0e91b8be-0611-4225-bf83-d148d6ba7258]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [0e91b8be-0611-4225-bf83-d148d6ba7258 b53dafea-97c3-4a18-a342-217dc48cc72c f9bbe0cb-88b1-45aa-9634-211c31a2583b pending 0xc000021e60]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [b37726e9-b643-4213-9645-e776d87793db]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [b37726e9-b643-4213-9645-e776d87793db b53dafea-97c3-4a18-a342-217dc48cc72c f9bbe0cb-88b1-45aa-9634-211c31a2583b pending 0xc0001520f0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,operator_id,status,execution_state FROM operator_result WHERE id IN ($1,$2,$3); with args: [3634a2e2-8798-49e5-9a18-58ef6c9c904d 0e91b8be-0611-4225-bf83-d148d6ba7258 b37726e9-b643-4213-9645-e776d87793db]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_GetByDAGResultAndOperator
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [0cf4fda3-0505-41ea-9565-b55184020035]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [0cf4fda3-0505-41ea-9565-b55184020035 c87ddeff-96e1-4d01-949e-f297be866329 e8e71ccb-9da1-44c6-a7c5-3971f4228b2f pending 0xc0001528d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,operator_id,status,execution_state\n\t\tFROM operator_result\n\t\tWHERE workflow_dag_result_id = $1 AND operator_id = $2; with args: [c87ddeff-96e1-4d01-949e-f297be866329 e8e71ccb-9da1-44c6-a7c5-3971f4228b2f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_GetByDAGResultBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [e1bc8d19-346d-4443-8076-54689b82aa95]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [e1bc8d19-346d-4443-8076-54689b82aa95 31599a9d-54c1-4d63-aa83-2342928b162c 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000152ff0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [ca04dc98-a8d9-403c-910f-cc7b0322d3d2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [ca04dc98-a8d9-403c-910f-cc7b0322d3d2 31599a9d-54c1-4d63-aa83-2342928b162c 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000153290]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [73b8d88e-5629-4d7f-9f1a-0f025043a965]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [73b8d88e-5629-4d7f-9f1a-0f025043a965 31599a9d-54c1-4d63-aa83-2342928b162c 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000153500]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [b4e89169-f98a-421f-a1bf-7930caac25c8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [b4e89169-f98a-421f-a1bf-7930caac25c8 0d292032-df97-45ec-9c61-9624d40334ce 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000153770]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [b342ee71-d4c5-432e-9cc5-f9855cadfd8d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [b342ee71-d4c5-432e-9cc5-f9855cadfd8d 0d292032-df97-45ec-9c61-9624d40334ce 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc0001539e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [7250bf64-3cea-46ba-b4cc-1917e5e04211]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [7250bf64-3cea-46ba-b4cc-1917e5e04211 0d292032-df97-45ec-9c61-9624d40334ce 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000153c50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [7b067cf5-c354-41e3-a39a-4389cb195196]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [7b067cf5-c354-41e3-a39a-4389cb195196 4f07c42b-7215-4ce1-b5dc-2c8d9ffb2306 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000153ec0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [10d25b32-7eab-4780-ba67-e636b8f115e8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [10d25b32-7eab-4780-ba67-e636b8f115e8 4f07c42b-7215-4ce1-b5dc-2c8d9ffb2306 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc000170150]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [bdd7d4da-f8b5-4c0c-8605-532e14317eee]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [bdd7d4da-f8b5-4c0c-8605-532e14317eee 4f07c42b-7215-4ce1-b5dc-2c8d9ffb2306 033eb982-16bc-40d3-9c34-972be40bc2b6 pending 0xc0001703c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,workflow_dag_result_id,operator_id,status,execution_state \n\t\tFROM operator_result \n\t\tWHERE workflow_dag_result_id IN ($1,$2); with args: [31599a9d-54c1-4d63-aa83-2342928b162c 0d292032-df97-45ec-9c61-9624d40334ce]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_GetCheckStatusByArtifactBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [285b51db-826e-4687-b372-aceac8e7d71a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [285b51db-826e-4687-b372-aceac8e7d71a  aqueduct-test  nqDDuEByrXfoIYEuiwwnvItBIOfvYPlaPehSkcmwapgcCBeJZymOyUleiNCz ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [fc047697-ca84-480c-bc5c-867ecb289ca8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [fc047697-ca84-480c-bc5c-867ecb289ca8 285b51db-826e-4687-b372-aceac8e7d71a MjjUPbykfU WNlFWHCcwoqIWxM 0xc000419900 2023-05-30 17:14:54.38958 -0700 PDT m=+0.110395541 0xc0001c28d0 0xc00078f800]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [3e42c372-52c1-4d9e-baa8-56785afdfc09]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [3e42c372-52c1-4d9e-baa8-56785afdfc09 fc047697-ca84-480c-bc5c-867ecb289ca8 2023-05-30 17:14:54.389736 -0700 PDT m=+0.110551138 0xc000171080 0xc0001ab860]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a53a47fb-9326-4a32-a557-460083bbbe64]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a53a47fb-9326-4a32-a557-460083bbbe64 rJsIZqadAw gpheLgcdssHUuSS 0xc00040fbc0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [3e42c372-52c1-4d9e-baa8-56785afdfc09 artifact_to_operator 3cd68a25-d873-4621-983c-939596f13a75 a53a47fb-9326-4a32-a557-460083bbbe64 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [d1542a3f-b7f3-4d8e-8cfb-1b2f45e3b9c2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [d1542a3f-b7f3-4d8e-8cfb-1b2f45e3b9c2 3e42c372-52c1-4d9e-baa8-56785afdfc09 a53a47fb-9326-4a32-a557-460083bbbe64 pending 0xc000171560]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [20ebb6ad-14ba-482b-a814-ab34332e281c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [20ebb6ad-14ba-482b-a814-ab34332e281c 3e42c372-52c1-4d9e-baa8-56785afdfc09 a53a47fb-9326-4a32-a557-460083bbbe64 pending 0xc0001717d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [5a5a327f-ac99-48b2-84fb-94e35b791d88]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [5a5a327f-ac99-48b2-84fb-94e35b791d88 3e42c372-52c1-4d9e-baa8-56785afdfc09 a53a47fb-9326-4a32-a557-460083bbbe64 pending 0xc000171a40]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT DISTINCT\n\t\t\tworkflow_dag_edge.from_id AS artifact_id,\n\t\t\toperator.name AS operator_name,\n\t\t \toperator_result.execution_state as metadata,\n\t\t\toperator_result.workflow_dag_result_id \n\t\tFROM workflow_dag_edge, operator, operator_result \n\t\tWHERE \n\t\t\tworkflow_dag_edge.to_id = operator.id \n\t\t\tAND operator.id = operator_result.operator_id \n\t\t\tAND workflow_dag_edge.from_id IN ($1) \n\t\t\tAND json_extract(operator.spec, '$.type') = 'check'; with args: [3cd68a25-d873-4621-983c-939596f13a75]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_GetStatusByDAGResultAndArtifactBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [56bcd341-e9ef-46d7-861e-56c7c521a000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [56bcd341-e9ef-46d7-861e-56c7c521a000 tNTRXjWtiJ TOqzoubsnFtooYh 0xc0005f81e0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ec6e86a8-d564-4070-864d-e2bde5960903 operator_to_artifact 56bcd341-e9ef-46d7-861e-56c7c521a000 6f4d519c-2066-4d1b-b4f8-83870d711e50 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [8f4f7f97-3712-483f-8360-6ec2aaa7104b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [8f4f7f97-3712-483f-8360-6ec2aaa7104b cqiiVDuIHu RYHfQTCGPLpNkRZ 0xc0005f8540 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71bb25f6-9e48-433a-8e96-37d40d75e95c operator_to_artifact 8f4f7f97-3712-483f-8360-6ec2aaa7104b 933ae086-1c51-4479-ab6b-182f90b0d770 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [9b616339-ffa6-423d-aee1-194ab4f1bde5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [9b616339-ffa6-423d-aee1-194ab4f1bde5 SRpbRYWGZJ hJpeWDyTMLMBRyQ 0xc0005f88a0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71bb25f6-9e48-433a-8e96-37d40d75e95c operator_to_artifact 9b616339-ffa6-423d-aee1-194ab4f1bde5 6f4d519c-2066-4d1b-b4f8-83870d711e50 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [531f69ee-9e43-40d0-9c32-1391131a840f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [531f69ee-9e43-40d0-9c32-1391131a840f OmdpPeyLdq OiOcJveVOHroxnL 0xc0005f8c00 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [71bb25f6-9e48-433a-8e96-37d40d75e95c operator_to_artifact 531f69ee-9e43-40d0-9c32-1391131a840f da052308-f77f-4fda-8d0f-8428641571e7 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [151ee2be-1e46-4d24-a613-3c36a590efec]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [151ee2be-1e46-4d24-a613-3c36a590efec ec6e86a8-d564-4070-864d-e2bde5960903 56bcd341-e9ef-46d7-861e-56c7c521a000 pending 0xc0001d0c90]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [7e708f76-0b29-4737-a68e-cb3c6e9b6e21]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [7e708f76-0b29-4737-a68e-cb3c6e9b6e21 ec6e86a8-d564-4070-864d-e2bde5960903 56bcd341-e9ef-46d7-861e-56c7c521a000 pending 0xc0001d0f30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [92e29d48-0d0d-4700-9ddc-c3834e2f3a5f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [92e29d48-0d0d-4700-9ddc-c3834e2f3a5f ec6e86a8-d564-4070-864d-e2bde5960903 56bcd341-e9ef-46d7-861e-56c7c521a000 pending 0xc0001d1380]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [46fe61d5-fc2d-4d6c-a691-ee41da89145d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [46fe61d5-fc2d-4d6c-a691-ee41da89145d 71bb25f6-9e48-433a-8e96-37d40d75e95c 8f4f7f97-3712-483f-8360-6ec2aaa7104b pending 0xc0001d1a40]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [ddd29c91-1397-4f18-9210-26c143bee670]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [ddd29c91-1397-4f18-9210-26c143bee670 71bb25f6-9e48-433a-8e96-37d40d75e95c 8f4f7f97-3712-483f-8360-6ec2aaa7104b pending 0xc0001d1ef0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [5a27b6dc-8fe4-4e9a-b494-490638bc4c2d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [5a27b6dc-8fe4-4e9a-b494-490638bc4c2d 71bb25f6-9e48-433a-8e96-37d40d75e95c 8f4f7f97-3712-483f-8360-6ec2aaa7104b pending 0xc0002701b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [8993c45d-f4bb-4aef-952e-5418929408f6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [8993c45d-f4bb-4aef-952e-5418929408f6 71bb25f6-9e48-433a-8e96-37d40d75e95c 9b616339-ffa6-423d-aee1-194ab4f1bde5 pending 0xc000270420]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [4c1ce861-ddfd-4a72-aa20-6decf0c60fe5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [4c1ce861-ddfd-4a72-aa20-6decf0c60fe5 71bb25f6-9e48-433a-8e96-37d40d75e95c 9b616339-ffa6-423d-aee1-194ab4f1bde5 pending 0xc000270690]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [49366fbb-0448-49cf-924b-f41ac0798364]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [49366fbb-0448-49cf-924b-f41ac0798364 71bb25f6-9e48-433a-8e96-37d40d75e95c 9b616339-ffa6-423d-aee1-194ab4f1bde5 pending 0xc000270900]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [d6562ed8-50dd-4bf7-a563-3e084a442f39]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [d6562ed8-50dd-4bf7-a563-3e084a442f39 71bb25f6-9e48-433a-8e96-37d40d75e95c 531f69ee-9e43-40d0-9c32-1391131a840f pending 0xc000270b70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [20ab75c0-d708-4245-8172-6e3029c6ec4c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [20ab75c0-d708-4245-8172-6e3029c6ec4c 71bb25f6-9e48-433a-8e96-37d40d75e95c 531f69ee-9e43-40d0-9c32-1391131a840f pending 0xc000270de0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [4cd71324-b53a-4bb7-a85c-073be43a6159]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [4cd71324-b53a-4bb7-a85c-073be43a6159 71bb25f6-9e48-433a-8e96-37d40d75e95c 531f69ee-9e43-40d0-9c32-1391131a840f pending 0xc000271050]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT DISTINCT \n\t\t\tworkflow_dag_edge.to_id AS artifact_id,\n\t\t\toperator_result.execution_state as metadata,\n\t\t\toperator_result.workflow_dag_result_id,\n\t\t\tNULL AS operator_name  \n\t\tFROM workflow_dag_edge, operator_result \n\t\tWHERE \n\t\t\tworkflow_dag_edge.from_id = operator_result.operator_id \n\t\t\tAND workflow_dag_edge.to_id IN ($1,$2) \n\t\t\tAND operator_result.workflow_dag_result_id IN ($3,$4); with args: [6f4d519c-2066-4d1b-b4f8-83870d711e50 933ae086-1c51-4479-ab6b-182f90b0d770 ec6e86a8-d564-4070-864d-e2bde5960903 71bb25f6-9e48-433a-8e96-37d40d75e95c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [1e550f23-f77d-4b77-8530-df98794ee564]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [1e550f23-f77d-4b77-8530-df98794ee564 5b26c4ba-d419-4654-b904-bedb0f01eded 0c530bd2-d90d-4ce7-bd90-ce795cdc6748 pending 0xc0002719e0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator_result SET execution_state = $1 WHERE id = $2 RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [0xc000436000 1e550f23-f77d-4b77-8530-df98794ee564]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperatorResult_UpdateBatchStatusByStatus
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [aed61339-77db-4ba5-b505-041068e732ee]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [aed61339-77db-4ba5-b505-041068e732ee cba322b4-3ebb-4db6-85fd-4a26fdfad59f 25e3b8b0-fcb7-4b01-8b74-945baf383227 pending 0xc0003e65a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator_result WHERE id = $1 with args: [a216630b-0e06-47d6-bd0f-52e3e4485656]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator_result (id, workflow_dag_result_id, operator_id, status, execution_state) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [a216630b-0e06-47d6-bd0f-52e3e4485656 cba322b4-3ebb-4db6-85fd-4a26fdfad59f 25e3b8b0-fcb7-4b01-8b74-945baf383227 pending 0xc0003e6840]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator_result SET execution_state = $1 WHERE id = $2 RETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [0xc000436240 aed61339-77db-4ba5-b505-041068e732ee]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tUPDATE operator_result SET\n\t\t\texecution_state = CAST(\n\t\tjson_set(\n\t\t\tjson_set(execution_state, '$.status', $1),\n\t\t\t'$.timestamps.finished_at',\n\t\t\t$2\n\t\t) AS BLOB),\n\t\t\tstatus = $3\n\t\tWHERE\n\t\t\tjson_extract(execution_state, '$.status') = $4\n\t\tRETURNING id,workflow_dag_result_id,operator_id,status,execution_state; with args: [canceled 2023-05-30T17:14:54.398152-07:00 canceled pending]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [9e46c680-e028-4104-bb6d-0129d65303d8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [9e46c680-e028-4104-bb6d-0129d65303d8 csPVvWLMYK dWIdLiaNWE 0xc0001e8300 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [910f6802-b6d4-412c-8721-5743f880a12b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [910f6802-b6d4-412c-8721-5743f880a12b  aqueduct-test  cauHursOLZWjJZmlNXZOyUabMRbDTzUXvYqBZOIuMSsKKYCMseKDozkPjMtG ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [04a8d049-85b6-4c2c-8cf1-c7bf910409ad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [04a8d049-85b6-4c2c-8cf1-c7bf910409ad 910f6802-b6d4-412c-8721-5743f880a12b yeAGBWZGoU auEkmkyPUGKVJOu 0xc0004364c0 2023-05-30 17:14:54.398944 -0700 PDT m=+0.119759727 0xc0002783f0 0xc0004162c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [7a1d7a04-3d28-43de-ba3d-06c580024dee]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [7a1d7a04-3d28-43de-ba3d-06c580024dee 04a8d049-85b6-4c2c-8cf1-c7bf910409ad 2023-05-30 17:14:54.399091 -0700 PDT m=+0.119906187 0xc0003e79e0 0xc00044cc30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [505123ec-3426-46b7-92a8-04f7ad970b86]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [505123ec-3426-46b7-92a8-04f7ad970b86 910f6802-b6d4-412c-8721-5743f880a12b aqueduct-test SQLite eHhhgIbaxn 0xc0004162f8 2023-05-30 17:14:54.399235 -0700 PDT m=+0.120050839]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [4136cd68-8891-4ab6-a4ef-9dfaeb3317ba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [4136cd68-8891-4ab6-a4ef-9dfaeb3317ba oIOrwuzbCO iutbzIxGikvBBvk 0xc0001e8cc0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [7a1d7a04-3d28-43de-ba3d-06c580024dee operator_to_artifact 4136cd68-8891-4ab6-a4ef-9dfaeb3317ba ae90f47d-471c-430f-85fc-c22404ac40e7 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM operator WHERE id IN ($1) with args: [4136cd68-8891-4ab6-a4ef-9dfaeb3317ba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_DeleteBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3  aqueduct-test  vxhgDzJhSqSriZArvBVgDZxeKpjfRkNUDVvfbsDFiodHMrrUEyOvYtNQHYFm ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [a3e068ff-3448-41db-b229-9c030210ca56]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [a3e068ff-3448-41db-b229-9c030210ca56 ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3 NRANscokTj sygCbUnsAihstUm 0xc0004368c0 2023-05-30 17:14:54.39994 -0700 PDT m=+0.120755380 0xc00070e9c8 0xc0004164a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [a7e514f3-ff8e-4a6d-ab6f-69c214f419d3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [a7e514f3-ff8e-4a6d-ab6f-69c214f419d3 a3e068ff-3448-41db-b229-9c030210ca56 2023-05-30 17:14:54.400078 -0700 PDT m=+0.120893609 0xc000270c30 0xc00044d360]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [1871c06b-1ad4-4925-9b98-8aa3a4bc040c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [1871c06b-1ad4-4925-9b98-8aa3a4bc040c ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3 aqueduct-test SQLite IcUllxAazc 0xc0004164d8 2023-05-30 17:14:54.400201 -0700 PDT m=+0.121016524]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [94b9f885-881f-4535-9ad9-4e79779fe0f6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [94b9f885-881f-4535-9ad9-4e79779fe0f6 byhlvTalQA dyHnynKYeLGKkcd 0xc0001e9560 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [a7e514f3-ff8e-4a6d-ab6f-69c214f419d3 operator_to_artifact 94b9f885-881f-4535-9ad9-4e79779fe0f6 ac3fdede-eb72-40d6-9544-125e9ab4dec2 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [aeb85475-c243-4b8e-9440-41f54277d2b1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [aeb85475-c243-4b8e-9440-41f54277d2b1 ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3 aqueduct-test SQLite jVGYgvFOZm 0xc000416520 2023-05-30 17:14:54.400516 -0700 PDT m=+0.121331241]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [18da3b93-997f-4006-9239-7848b18713f6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [18da3b93-997f-4006-9239-7848b18713f6 OjRgjlqvfE cREHLcgWUlQGEII 0xc0001e98c0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [a7e514f3-ff8e-4a6d-ab6f-69c214f419d3 artifact_to_operator ac3fdede-eb72-40d6-9544-125e9ab4dec2 18da3b93-997f-4006-9239-7848b18713f6 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [12abe1d1-ce16-4b33-8488-d726350f3e1f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [12abe1d1-ce16-4b33-8488-d726350f3e1f ea49a0bb-048c-4d01-8d4a-fd3bc8d52bc3 aqueduct-test SQLite wgLdYCWLcM 0xc000416560 2023-05-30 17:14:54.400826 -0700 PDT m=+0.121640886]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ec988c83-0629-4766-842a-dc97e2383fd7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ec988c83-0629-4766-842a-dc97e2383fd7 XaNAfDhXav kpvenaMGBFAQWbB 0xc0001e9c20 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [a7e514f3-ff8e-4a6d-ab6f-69c214f419d3 operator_to_artifact ec988c83-0629-4766-842a-dc97e2383fd7 ac3fdede-eb72-40d6-9544-125e9ab4dec2 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM operator WHERE id IN ($1,$2,$3) with args: [94b9f885-881f-4535-9ad9-4e79779fe0f6 18da3b93-997f-4006-9239-7848b18713f6 ec988c83-0629-4766-842a-dc97e2383fd7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_Exists
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [27d6a676-e728-4c73-9129-49b7f92a06da]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [27d6a676-e728-4c73-9129-49b7f92a06da NTuBpVOBoV kzCnVblUZNTNUtw 0xc0001e9f20 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [27d6a676-e728-4c73-9129-49b7f92a06da]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [00000000-0000-0000-0000-000000000000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [28985090-0fe4-4d89-a298-01811866730c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [28985090-0fe4-4d89-a298-01811866730c uyTNksynyu NMjmAsbvkzynUAH 0xc0005f8360 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,spec,execution_environment_id FROM operator WHERE id = $1; with args: [28985090-0fe4-4d89-a298-01811866730c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a3405361-a875-4799-8641-b243d6c1517a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a3405361-a875-4799-8641-b243d6c1517a tIfFrDXLLM RYDuTjZcuoElZjO 0xc0005f8780 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a72ac3cb-24c1-4e65-aad7-9078c818b04a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a72ac3cb-24c1-4e65-aad7-9078c818b04a JVGWYZTySt zhhOljYmdSzJpZP 0xc0005f8a80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [145fe39b-e256-43a0-aa12-b7737f260749]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [145fe39b-e256-43a0-aa12-b7737f260749 ogWaSWpnNK hiJLvMDlqQSildp 0xc0005f8d80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,spec,execution_environment_id FROM operator WHERE id IN ($1,$2,$3); with args: [a3405361-a875-4799-8641-b243d6c1517a a72ac3cb-24c1-4e65-aad7-9078c818b04a 145fe39b-e256-43a0-aa12-b7737f260749]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [19018c68-d9f7-4cb8-87cc-515d68c8afa4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [19018c68-d9f7-4cb8-87cc-515d68c8afa4  aqueduct-test  lYMapTagAKbVgOIlSaLOZAtqDFEpBFAdpnpgmyGhlHplSzZtTvwvTuERaKFs ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [a76351ff-8d45-4532-9270-55ae4860a34c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [a76351ff-8d45-4532-9270-55ae4860a34c 19018c68-d9f7-4cb8-87cc-515d68c8afa4 LpLgaFTryp iBXPLOExLHfecyW 0xc000437400 2023-05-30 17:14:54.402788 -0700 PDT m=+0.123603196 0xc00041c7f0 0xc0004168f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3 a76351ff-8d45-4532-9270-55ae4860a34c 2023-05-30 17:14:54.402946 -0700 PDT m=+0.123761342 0xc0002ac720 0xc00026d180]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [acd404f4-dfbf-49a4-93ec-f5e1b3bc9f10]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [acd404f4-dfbf-49a4-93ec-f5e1b3bc9f10 njmEyRbfdt gVlvebxmKKKBePJ 0xc0005f9920 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3 operator_to_artifact acd404f4-dfbf-49a4-93ec-f5e1b3bc9f10 1cf299b1-38e1-4885-8c08-ba536b7c0578 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ec665933-7836-43d8-ab4a-dcc217e22241]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ec665933-7836-43d8-ab4a-dcc217e22241 LNuGtsAdXo UVkDPVUTzSxCNyc 0xc0005f9c80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3 artifact_to_operator 1cf299b1-38e1-4885-8c08-ba536b7c0578 ec665933-7836-43d8-ab4a-dcc217e22241 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [f92b0d0e-9832-40e1-a881-ba96decfe1af]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [f92b0d0e-9832-40e1-a881-ba96decfe1af ercnaiNNln oEzsunKyBzxsqXJ 0xc0003b0060 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3 operator_to_artifact f92b0d0e-9832-40e1-a881-ba96decfe1af 1cf299b1-38e1-4885-8c08-ba536b7c0578 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,spec,execution_environment_id FROM operator WHERE id IN\n\t\t(\n\t\t\tSELECT from_id \n\t\t\tFROM workflow_dag_edge \n\t\t\tWHERE workflow_dag_id = $1 AND type = 'operator_to_artifact' \n\t\t\tUNION \n\t\t\tSELECT to_id \n\t\t\tFROM workflow_dag_edge \n\t\t\tWHERE workflow_dag_id = $1 AND type = 'artifact_to_operator'\n\t\t) with args: [6cdcd4f2-3687-4c2d-a400-f539e7563ea3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetByEngineResourceID
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [70f023f2-2bb0-4bfc-9c34-b7cfe37fba87]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [70f023f2-2bb0-4bfc-9c34-b7cfe37fba87  aqueduct-test  hWkslHkHKPRJJWaDjOIqIwYZMFGCakedERslKQmeDbFjgewNhcYBufIeUeSD ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [15d5489b-aec5-43ad-ab1e-8036e139cd4f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [15d5489b-aec5-43ad-ab1e-8036e139cd4f 70f023f2-2bb0-4bfc-9c34-b7cfe37fba87 InTwVnyAzn utycwsjsgvagJfq 0xc0004378c0 2023-05-30 17:14:54.404034 -0700 PDT m=+0.124849369 0xc0005f3018 0xc0004169f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [fb6c65b6-abd8-45fa-93c2-3472aa75fef9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [fb6c65b6-abd8-45fa-93c2-3472aa75fef9 15d5489b-aec5-43ad-ab1e-8036e139cd4f 2023-05-30 17:14:54.404171 -0700 PDT m=+0.124986781 0xc000212000 0xc0002a0640]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a0cd5373-fea6-456b-8800-e067db1eb45d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a0cd5373-fea6-456b-8800-e067db1eb45d lDQuCuVajb qquXjZMHUFqIlHd 0xc0003b0ba0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [fb6c65b6-abd8-45fa-93c2-3472aa75fef9 artifact_to_operator f0f87329-6cfc-4819-a361-3c72807506d3 a0cd5373-fea6-456b-8800-e067db1eb45d 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [bb7e6dd5-c7fb-49d3-a7e2-fc3d184946b1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [bb7e6dd5-c7fb-49d3-a7e2-fc3d184946b1 aVbuXmgLJv ZRAnoDNUiaopDms 0xc0003b0f00 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [fb6c65b6-abd8-45fa-93c2-3472aa75fef9 artifact_to_operator f0f87329-6cfc-4819-a361-3c72807506d3 bb7e6dd5-c7fb-49d3-a7e2-fc3d184946b1 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow_dag SET engine_config = $1 WHERE id = $2 RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [0xc0002a11d0 fb6c65b6-abd8-45fa-93c2-3472aa75fef9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc0002836f0 a0cd5373-fea6-456b-8800-e067db1eb45d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT DISTINCT operator.id,operator.name,operator.description,operator.spec,operator.execution_environment_id FROM\n\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\tworkflow_dag_edge.workflow_dag_id = workflow_dag.id\n\t\tAND (\n\t\t\tworkflow_dag_edge.from_id = operator.id\n\t\t\tOR workflow_dag_edge.to_id = operator.id\n\t\t)\n\t\tAND (\n\t\t\t(\n\t\t\t\tjson_extract(operator.spec, '$.engine_config') IS NULL\n\t\t\t\tAND (json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.lambda_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.airflow_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.k8s_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.databricks_config.integration_id'\n\t\t\t\t) = $1)\n\t\t\t)\n\t\t\tOR (json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.lambda_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.airflow_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.k8s_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.databricks_config.integration_id'\n\t\t\t\t) = $1)\n\t\t); with args: [f4b5607d-2b59-4940-8be0-d644c0d1ad69]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT DISTINCT operator.id,operator.name,operator.description,operator.spec,operator.execution_environment_id FROM\n\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\tworkflow_dag_edge.workflow_dag_id = workflow_dag.id\n\t\tAND (\n\t\t\tworkflow_dag_edge.from_id = operator.id\n\t\t\tOR workflow_dag_edge.to_id = operator.id\n\t\t)\n\t\tAND (\n\t\t\t(\n\t\t\t\tjson_extract(operator.spec, '$.engine_config') IS NULL\n\t\t\t\tAND (json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.airflow_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.k8s_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.databricks_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\tworkflow_dag.engine_config,\n\t\t\t\t\t'$.lambda_config.integration_id'\n\t\t\t\t) = $1)\n\t\t\t)\n\t\t\tOR (json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.airflow_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.k8s_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.databricks_config.integration_id'\n\t\t\t\t) = $1 OR json_extract(\n\t\t\t\t\toperator.spec,\n\t\t\t\t\t'$.engine_config.lambda_config.integration_id'\n\t\t\t\t) = $1)\n\t\t); with args: [7187f21c-5f0d-401a-b6a2-78deca68ab7f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetDistinctLoadOPsByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [7cd05416-56d5-44d7-819c-84159fa3104f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [7cd05416-56d5-44d7-819c-84159fa3104f  aqueduct-test  VkcgAXlOYoohlUaOxETzYTdrmvLQLZOOstbSfRfbqOJtqkqsTilcIPVIcDrn ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [9a86ee28-00f9-4e37-be20-77677d32d7a7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [9a86ee28-00f9-4e37-be20-77677d32d7a7 7cd05416-56d5-44d7-819c-84159fa3104f iskoDKSgvp VRTYjSKCqNOTGEQ 0xc000437f00 2023-05-30 17:14:54.405443 -0700 PDT m=+0.126258741 0xc000789960 0xc000416af8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [babe0e26-c40b-4223-aa5f-a151f1fd0d54]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [babe0e26-c40b-4223-aa5f-a151f1fd0d54 9a86ee28-00f9-4e37-be20-77677d32d7a7 2023-05-30 17:14:54.405587 -0700 PDT m=+0.126401844 0xc0002133e0 0xc0002a1a40]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [a08a8d17-8076-43fb-879a-e0f62d0adddb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [a08a8d17-8076-43fb-879a-e0f62d0adddb 7cd05416-56d5-44d7-819c-84159fa3104f aqueduct-test SQLite dTkhAMTSJu 0xc000416b20 2023-05-30 17:14:54.405712 -0700 PDT m=+0.126527417]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [45f3f121-6435-4b2c-9e93-7a4f96b0ca11]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [45f3f121-6435-4b2c-9e93-7a4f96b0ca11 hiNCNsvghQ DIjcqkmKeVLKscm 0xc0003b1c80 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [babe0e26-c40b-4223-aa5f-a151f1fd0d54 artifact_to_operator 45f9c7da-bc3d-4f39-bc7e-15f997de80ff 45f3f121-6435-4b2c-9e93-7a4f96b0ca11 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [826c87d4-b0dd-4c64-b6ec-d1a24044424c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [826c87d4-b0dd-4c64-b6ec-d1a24044424c 7cd05416-56d5-44d7-819c-84159fa3104f aqueduct-test SQLite SYXFeTfiYl 0xc000416b50 2023-05-30 17:14:54.406033 -0700 PDT m=+0.126847757]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [c6e49a26-8b09-4e0d-b72b-b505f3ddbf41]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [c6e49a26-8b09-4e0d-b72b-b505f3ddbf41 glDniqIKuX vLnJIWVhkMTKjsM 0xc000156000 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [babe0e26-c40b-4223-aa5f-a151f1fd0d54 operator_to_artifact c6e49a26-8b09-4e0d-b72b-b505f3ddbf41 45f9c7da-bc3d-4f39-bc7e-15f997de80ff 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [8087ab9c-a558-4937-8fa6-0f5e3b0eed41]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [8087ab9c-a558-4937-8fa6-0f5e3b0eed41 7cd05416-56d5-44d7-819c-84159fa3104f aqueduct-test SQLite ULvEpjwVet 0xc000416b80 2023-05-30 17:14:54.406352 -0700 PDT m=+0.127167176]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [35207d73-cd94-4b4a-b0fe-e1a0b7365ce4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [35207d73-cd94-4b4a-b0fe-e1a0b7365ce4 tMIWmDpOza dzwZvTrgRlsLBhl 0xc000156360 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [babe0e26-c40b-4223-aa5f-a151f1fd0d54 operator_to_artifact 35207d73-cd94-4b4a-b0fe-e1a0b7365ce4 45f9c7da-bc3d-4f39-bc7e-15f997de80ff 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [a08a8d17-8076-43fb-879a-e0f62d0adddb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [826c87d4-b0dd-4c64-b6ec-d1a24044424c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [8087ab9c-a558-4937-8fa6-0f5e3b0eed41]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tSELECT\n\t\toperator.id AS operator_id,\n\t\toperator.name AS operator_name, \n\t\tworkflow_dag.created_at AS modified_at,\n\t\tresource.name AS resource_name,\n\t\tCAST(json_extract(operator.spec, '$.load') AS BLOB) AS spec \t\n\tFROM \n\t\toperator, resource, workflow_dag_edge, workflow_dag\n\tWHERE (\n\t\tjson_extract(operator.spec, '$.type')='load' AND \n\t\tresource.id = json_extract(operator.spec, '$.load.integration_id') AND\n\t\t( \n\t\t\tworkflow_dag_edge.from_id = operator.id OR \n\t\t\tworkflow_dag_edge.to_id = operator.id \n\t\t) AND \n\t\tworkflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\tworkflow_dag.workflow_id = $1\n\t)\n\tGROUP BY\n\t\toperator.name,\n\t\tresource.name,\n\t\tjson_extract(operator.spec, '$.load')\t\n\tORDER BY modified_at DESC;\n\t with args: [9a86ee28-00f9-4e37-be20-77677d32d7a7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetEngineTypesMapByDagIDs
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [53c30154-4d4d-40b0-8ebd-3e288c628148]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [53c30154-4d4d-40b0-8ebd-3e288c628148  aqueduct-test  zjLxGoFxnZoHdnTEOoCoHWTLgYFnrKQiZvKsFzNDDHzPivuuqlHyflzToCde ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [27264142-fbb9-4194-8919-236d80a5d804]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [27264142-fbb9-4194-8919-236d80a5d804 53c30154-4d4d-40b0-8ebd-3e288c628148 ftIudXojLo ajIKOaeGNcEZJZi 0xc0002486c0 2023-05-30 17:14:54.407326 -0700 PDT m=+0.128141595 0xc0000e2650 0xc000416c70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [d6c1127c-a321-4103-8561-d6ce551e9058]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [d6c1127c-a321-4103-8561-d6ce551e9058 27264142-fbb9-4194-8919-236d80a5d804 2023-05-30 17:14:54.407492 -0700 PDT m=+0.128307474 0xc000411b00 0xc00012f180]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [b7025764-0060-4e19-9839-a6a47b4b6965]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [b7025764-0060-4e19-9839-a6a47b4b6965 27264142-fbb9-4194-8919-236d80a5d804 2023-05-30 17:14:54.407617 -0700 PDT m=+0.128432028 0xc000411d70 0xc00012f450]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [8c8c0796-70ae-4c88-9661-3876849f583e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [8c8c0796-70ae-4c88-9661-3876849f583e AdhHAZukcg ntldTbpeFudIInm 0xc000156e40 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [d6c1127c-a321-4103-8561-d6ce551e9058 artifact_to_operator 8645b984-f966-431f-9f94-8d7b25297b3e 8c8c0796-70ae-4c88-9661-3876849f583e 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc000283990 8c8c0796-70ae-4c88-9661-3876849f583e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [c5df2f98-b9be-404f-a938-4b188d56faf0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [c5df2f98-b9be-404f-a938-4b188d56faf0 DZQGZYtWTU tdojnSZUAyadHcv 0xc000157380 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [d6c1127c-a321-4103-8561-d6ce551e9058 artifact_to_operator d366bd7b-2490-4e38-b85e-eaad906c55bc c5df2f98-b9be-404f-a938-4b188d56faf0 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc000283c30 c5df2f98-b9be-404f-a938-4b188d56faf0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [1bd84b5b-7b39-4032-a13b-0668afc325ed]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [1bd84b5b-7b39-4032-a13b-0668afc325ed kwowKjTOaD aFXfWqUVWDafwks 0xc0001578c0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [b7025764-0060-4e19-9839-a6a47b4b6965 operator_to_artifact 1bd84b5b-7b39-4032-a13b-0668afc325ed 64e78610-e797-42b6-b980-9ede3269ca3b 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [6d044ce0-490c-4fc0-9b3a-492f7ea2c3c5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [6d044ce0-490c-4fc0-9b3a-492f7ea2c3c5 qKmvpPVCpk BUDTMLQPmLVlwrF 0xc000157c20 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [b7025764-0060-4e19-9839-a6a47b4b6965 artifact_to_operator 64e78610-e797-42b6-b980-9ede3269ca3b 6d044ce0-490c-4fc0-9b3a-492f7ea2c3c5 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc000283df0 1bd84b5b-7b39-4032-a13b-0668afc325ed]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT DISTINCT\n\t\t\tworkflow_dag_edge.workflow_dag_id as dag_id,\n\t\t\tifnull(\n\t\t\t\tjson_extract(operator.spec, '$.engine_config.type'),\n\t\t\t\t''\n\t\t\t) as engine_type\n\t\tFROM operator, workflow_dag_edge\n\t\tWHERE\n\t\t\t(workflow_dag_edge.from_id = operator.id\n\t\t\tOR workflow_dag_edge.to_id = operator.id)\n\t\t\tAND workflow_dag_edge.workflow_dag_id IN ($1,$2); with args: [d6c1127c-a321-4103-8561-d6ce551e9058 b7025764-0060-4e19-9839-a6a47b4b6965]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetLoadOPsByResource
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1  aqueduct-test  HdesTSxnVdBatPKxGrEhptcBJlosGCMAyoGkBPKQekGxlFVafiIMqCMmskWv ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [fc2712da-9764-4e16-ada9-f1c1bd1df101]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [fc2712da-9764-4e16-ada9-f1c1bd1df101 4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1 EfiSzHxqjp BpgYxZDpVrPvLHt 0xc000248e00 2023-05-30 17:14:54.409331 -0700 PDT m=+0.130146599 0xc000267ab8 0xc000416dd8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [10a24d9f-3418-4fae-926d-abf19e440732]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [10a24d9f-3418-4fae-926d-abf19e440732 fc2712da-9764-4e16-ada9-f1c1bd1df101 2023-05-30 17:14:54.409518 -0700 PDT m=+0.130333258 0xc0005dd530 0xc0000372c0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [fb436e26-3881-4187-ba56-2dfb52961cea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [fb436e26-3881-4187-ba56-2dfb52961cea 4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1 aqueduct-test SQLite aiNfuNRFad 0xc000416e00 2023-05-30 17:14:54.409684 -0700 PDT m=+0.130498941]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [031af397-e8d7-4685-b719-c386990d8a5b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [031af397-e8d7-4685-b719-c386990d8a5b AHNUhuBmLw ecdrtsTnIideilm 0xc00040e960 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [10a24d9f-3418-4fae-926d-abf19e440732 artifact_to_operator 940f6f82-2925-4e44-8dd4-a95a9610ed2f 031af397-e8d7-4685-b719-c386990d8a5b 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [b875f9d9-a69d-42a6-b073-2526fd961399]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [b875f9d9-a69d-42a6-b073-2526fd961399 4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1 aqueduct-test SQLite ddxgbRrFds 0xc000416e30 2023-05-30 17:14:54.410017 -0700 PDT m=+0.130832224]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [8e5524d8-c654-4e4e-ad71-30eea0395388]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [8e5524d8-c654-4e4e-ad71-30eea0395388 EWReczHVJu mOTmIwsLNkVGFUr 0xc00040ecc0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [10a24d9f-3418-4fae-926d-abf19e440732 artifact_to_operator 940f6f82-2925-4e44-8dd4-a95a9610ed2f 8e5524d8-c654-4e4e-ad71-30eea0395388 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [e16ab65b-15f2-408b-862a-eb8944aec24c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [e16ab65b-15f2-408b-862a-eb8944aec24c 4ebd9c0e-3220-4b60-ad1a-22fd028bcdc1 aqueduct-test SQLite QSTXbpDSnd 0xc000416e60 2023-05-30 17:14:54.410334 -0700 PDT m=+0.131148828]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [fa719046-2199-4bb7-8fdc-a0cf6cf8d184]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [fa719046-2199-4bb7-8fdc-a0cf6cf8d184 nGQaLktSLO fBkwSqrYPgiGYqJ 0xc00040f020 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [10a24d9f-3418-4fae-926d-abf19e440732 operator_to_artifact fa719046-2199-4bb7-8fdc-a0cf6cf8d184 940f6f82-2925-4e44-8dd4-a95a9610ed2f 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [fb436e26-3881-4187-ba56-2dfb52961cea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,name,description,spec,execution_environment_id FROM operator\n\t\tWHERE \n\t\t\tjson_extract(spec, '$.load.integration_id') = $1\n\t\t\tOR json_extract(spec, '$.extract.integration_id') = $2 with args: [fb436e26-3881-4187-ba56-2dfb52961cea fb436e26-3881-4187-ba56-2dfb52961cea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetLoadOPsByWorkflowAndResource
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [68427793-038a-42dd-8ca3-58aaab7907fd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [68427793-038a-42dd-8ca3-58aaab7907fd  aqueduct-test  rpqCzwMHdTGmdFVkuzcXAToQXNdHdKxFwhqgecYTCfZWlTGsOaRYBJgsyVcv ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [6547353d-964e-41f9-91ea-2ff5b5958848]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [6547353d-964e-41f9-91ea-2ff5b5958848 68427793-038a-42dd-8ca3-58aaab7907fd RSkxxarVfF hfZCXSlpTIoucCr 0xc000249bc0 2023-05-30 17:14:54.411123 -0700 PDT m=+0.131938217 0xc0000cd270 0xc000416f28]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [f152acf8-1f2a-4d14-93be-a935b2ce4313]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [f152acf8-1f2a-4d14-93be-a935b2ce4313 6547353d-964e-41f9-91ea-2ff5b5958848 2023-05-30 17:14:54.411271 -0700 PDT m=+0.132086435 0xc0007995f0 0xc00019c500]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [5ed0449e-c9dd-4708-bce4-e262b4095510]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [5ed0449e-c9dd-4708-bce4-e262b4095510 68427793-038a-42dd-8ca3-58aaab7907fd aqueduct-test SQLite vPCwIPDcnv 0xc000416f50 2023-05-30 17:14:54.411401 -0700 PDT m=+0.132215646]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [c3840148-9ef2-4839-be32-0022aafc2a95]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [c3840148-9ef2-4839-be32-0022aafc2a95 FbgssxVils pIzJULcVxvfUFjh 0xc00040f9e0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [f152acf8-1f2a-4d14-93be-a935b2ce4313 operator_to_artifact c3840148-9ef2-4839-be32-0022aafc2a95 4b46f14c-bdd6-41f6-b41d-c559f67a057a 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [ea6ed4e6-2db1-45a2-a4b5-0627efa2b1fa]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [ea6ed4e6-2db1-45a2-a4b5-0627efa2b1fa 68427793-038a-42dd-8ca3-58aaab7907fd aqueduct-test SQLite EfWKlsrHCd 0xc000416f80 2023-05-30 17:14:54.411743 -0700 PDT m=+0.132558494]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ee4552ef-a530-4239-9f76-e05760eaad5b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ee4552ef-a530-4239-9f76-e05760eaad5b nUdARZyWLG qecZRzAmGUeemmV 0xc00040fd40 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [f152acf8-1f2a-4d14-93be-a935b2ce4313 operator_to_artifact ee4552ef-a530-4239-9f76-e05760eaad5b 4b46f14c-bdd6-41f6-b41d-c559f67a057a 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [71c68f4f-6ade-4aa3-99f8-d4bb044bccca]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [71c68f4f-6ade-4aa3-99f8-d4bb044bccca 68427793-038a-42dd-8ca3-58aaab7907fd aqueduct-test SQLite QMOigyAWns 0xc000416fb0 2023-05-30 17:14:54.412048 -0700 PDT m=+0.132863369]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [454cf571-f757-4dac-a41d-32d9429b6538]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [454cf571-f757-4dac-a41d-32d9429b6538 cYosPZvNND fcgKOZzXQYSjktM 0xc000122ba0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [f152acf8-1f2a-4d14-93be-a935b2ce4313 artifact_to_operator 4b46f14c-bdd6-41f6-b41d-c559f67a057a 454cf571-f757-4dac-a41d-32d9429b6538 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [5ed0449e-c9dd-4708-bce4-e262b4095510]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tSELECT id,name,description,spec,execution_environment_id\n\tFROM operator\n\tWHERE\n\t\tjson_extract(spec, '$.type') = 'load' AND \n\t\t(\n\t\t\tjson_extract(spec, '$.load.parameters.table') = $1 OR\n\t\t\tjson_extract(spec, '$.load.parameters.filepath') = $1\n\t\t) AND\n\t\tjson_extract(spec, '$.load.integration_id') = $2 AND\n\t\tEXISTS \n\t\t(\n\t\t\tSELECT 1 \n\t\t\tFROM \n\t\t\t\tworkflow_dag_edge, workflow_dag \n\t\t\tWHERE \n\t\t\t( \n\t\t\t\tworkflow_dag_edge.from_id = operator.id OR \n\t\t\t\tworkflow_dag_edge.to_id = operator.id \n\t\t\t) AND \n\t\t\tworkflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\t\tworkflow_dag.workflow_id = $3\n\t\t); with args: [LTePvUfkwq 5ed0449e-c9dd-4708-bce4-e262b4095510 6547353d-964e-41f9-91ea-2ff5b5958848]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetNode
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [4ba66524-0ad8-4f4b-99b6-4a1178b98228]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [4ba66524-0ad8-4f4b-99b6-4a1178b98228  aqueduct-test  WcshYchWmOmJHZyXuFBwjJNmXqmmTsLtwRAzVjxFwDBQLRHyCljwweTVFWYM ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [84fc295a-f7e3-451d-aa82-6a463cb2c61b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [84fc295a-f7e3-451d-aa82-6a463cb2c61b 4ba66524-0ad8-4f4b-99b6-4a1178b98228 kplktRGKNI JovwfiGHRPPjKXC 0xc0005f4340 2023-05-30 17:14:54.416585 -0700 PDT m=+0.137400052 0xc0000f8958 0xc000417078]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [1d48cdfe-5f90-401e-be18-003c41072dfa]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa 84fc295a-f7e3-451d-aa82-6a463cb2c61b 2023-05-30 17:14:54.41675 -0700 PDT m=+0.137564703 0xc0000a55c0 0xc00019d630]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [18bd0060-9a68-4b86-9f7a-0492efbc53f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [18bd0060-9a68-4b86-9f7a-0492efbc53f8 extract tZCtGhJrVlXhMBv 0xc0001238c0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [ec6c1601-74aa-47ba-92b1-dc4cd8505dd8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [ec6c1601-74aa-47ba-92b1-dc4cd8505dd8 extract_artf bNfcEurKDdkwUxW untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact 18bd0060-9a68-4b86-9f7a-0492efbc53f8 ec6c1601-74aa-47ba-92b1-dc4cd8505dd8 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [e52c1cac-9e43-42bf-ac08-eacc6095fec5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [e52c1cac-9e43-42bf-ac08-eacc6095fec5 function_1 xhpjfBSVyYFFIej 0xc000123860 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [6997e455-b9de-4255-acc4-69687e028bf6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [6997e455-b9de-4255-acc4-69687e028bf6 function_1_artf WAwDbUOvtZRzLmf untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact e52c1cac-9e43-42bf-ac08-eacc6095fec5 6997e455-b9de-4255-acc4-69687e028bf6 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator ec6c1601-74aa-47ba-92b1-dc4cd8505dd8 e52c1cac-9e43-42bf-ac08-eacc6095fec5 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [43a6b4e3-0d36-45fb-9383-f63dbbb5f1f2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [43a6b4e3-0d36-45fb-9383-f63dbbb5f1f2 function_2 xaGVLMJqISFGHrs 0xc000123860 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [758aafb0-5e2a-4265-92f5-ebff1a637fc9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [758aafb0-5e2a-4265-92f5-ebff1a637fc9 function_2_artf hUYZhISiynbBxYG untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact 43a6b4e3-0d36-45fb-9383-f63dbbb5f1f2 758aafb0-5e2a-4265-92f5-ebff1a637fc9 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator ec6c1601-74aa-47ba-92b1-dc4cd8505dd8 43a6b4e3-0d36-45fb-9383-f63dbbb5f1f2 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [a0a45d3c-095b-48a5-9605-9b752c66dfdf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [a0a45d3c-095b-48a5-9605-9b752c66dfdf function_3 GuPpdCNfWhJLvmu 0xc000123860 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [dfaeee61-e33c-4de9-9de8-97c116d7dd62]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [dfaeee61-e33c-4de9-9de8-97c116d7dd62 function_3_artf diDIQfqBuBrGdHp untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact a0a45d3c-095b-48a5-9605-9b752c66dfdf dfaeee61-e33c-4de9-9de8-97c116d7dd62 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator 6997e455-b9de-4255-acc4-69687e028bf6 a0a45d3c-095b-48a5-9605-9b752c66dfdf 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator 758aafb0-5e2a-4265-92f5-ebff1a637fc9 a0a45d3c-095b-48a5-9605-9b752c66dfdf 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [8f0dc078-aa9f-4613-81cd-58cccaf8682c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [8f0dc078-aa9f-4613-81cd-58cccaf8682c metric_1 wLLsbLUQoblwIBR 0xc000123980 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [0f2e0239-34e2-4bc9-9a74-691046173ba8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [0f2e0239-34e2-4bc9-9a74-691046173ba8 metric_1_artf WXuwMDfBghHNxtO untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact 8f0dc078-aa9f-4613-81cd-58cccaf8682c 0f2e0239-34e2-4bc9-9a74-691046173ba8 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator 6997e455-b9de-4255-acc4-69687e028bf6 8f0dc078-aa9f-4613-81cd-58cccaf8682c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [61f9b319-ac61-4eb8-9686-cd8f409be08d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [61f9b319-ac61-4eb8-9686-cd8f409be08d metric_2 nFEtEIboLlNnznv 0xc000123980 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [19ac3fb8-72cb-4998-9d48-ca9db5187b94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [19ac3fb8-72cb-4998-9d48-ca9db5187b94 metric_2_artf gRfXuAWFMFfTlUZ untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact 61f9b319-ac61-4eb8-9686-cd8f409be08d 19ac3fb8-72cb-4998-9d48-ca9db5187b94 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator 758aafb0-5e2a-4265-92f5-ebff1a637fc9 61f9b319-ac61-4eb8-9686-cd8f409be08d 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [f50a6125-212a-4f49-b004-ea6558a5fd8c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [f50a6125-212a-4f49-b004-ea6558a5fd8c check zzPAWRasKoGpsrP 0xc0001239e0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [4592a46f-632a-491f-a441-956379917f88]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [4592a46f-632a-491f-a441-956379917f88 check_artf lDLKBLqtyQsUtrz untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa operator_to_artifact f50a6125-212a-4f49-b004-ea6558a5fd8c 4592a46f-632a-491f-a441-956379917f88 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [1d48cdfe-5f90-401e-be18-003c41072dfa artifact_to_operator 0f2e0239-34e2-4bc9-9a74-691046173ba8 f50a6125-212a-4f49-b004-ea6558a5fd8c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [18bd0060-9a68-4b86-9f7a-0492efbc53f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [e52c1cac-9e43-42bf-ac08-eacc6095fec5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [43a6b4e3-0d36-45fb-9383-f63dbbb5f1f2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [a0a45d3c-095b-48a5-9605-9b752c66dfdf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [8f0dc078-aa9f-4613-81cd-58cccaf8682c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [61f9b319-ac61-4eb8-9686-cd8f409be08d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE id IN ($1) with args: [f50a6125-212a-4f49-b004-ea6558a5fd8c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetNodesByDAG
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [7159f2e2-f762-4439-8f70-7635592fdbb1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [7159f2e2-f762-4439-8f70-7635592fdbb1  aqueduct-test  fhnYGnffNXDJrDpWvUHAUsXKYCyNADqjnCusSoVgXOTIjPeYfsLjPlUovOrD ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [c6068c1a-7352-431e-bad0-2863372d8842]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [c6068c1a-7352-431e-bad0-2863372d8842 7159f2e2-f762-4439-8f70-7635592fdbb1 GvsTGbiGxM dDLJgzznUaBcYoK 0xc0005f53c0 2023-05-30 17:14:54.427638 -0700 PDT m=+0.148453225 0xc0002505b8 0xc0004172c8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf c6068c1a-7352-431e-bad0-2863372d8842 2023-05-30 17:14:54.427793 -0700 PDT m=+0.148607499 0xc000021ec0 0xc0001a36d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [b098e6b6-f05a-4287-b21f-34bca09def9e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [b098e6b6-f05a-4287-b21f-34bca09def9e extract yWvsZPtPVTkcWSq 0xc00024a660 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [5be5b4cd-2264-4a7b-a66c-0b2a9dea5567]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [5be5b4cd-2264-4a7b-a66c-0b2a9dea5567 extract_artf jUzStEYEqkwJqSD untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact b098e6b6-f05a-4287-b21f-34bca09def9e 5be5b4cd-2264-4a7b-a66c-0b2a9dea5567 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [3b895e90-472f-4464-89b4-a806bcfc3de8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [3b895e90-472f-4464-89b4-a806bcfc3de8 function_1 rXeAjeHKTgDiEHs 0xc00024a600 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [eda7b41f-a780-4ba5-83af-0b0d397b96b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [eda7b41f-a780-4ba5-83af-0b0d397b96b0 function_1_artf sSokZiKxeHveyYv untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact 3b895e90-472f-4464-89b4-a806bcfc3de8 eda7b41f-a780-4ba5-83af-0b0d397b96b0 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator 5be5b4cd-2264-4a7b-a66c-0b2a9dea5567 3b895e90-472f-4464-89b4-a806bcfc3de8 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [2ec2b80d-1195-4dce-90d1-5bfb9acbc2f2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [2ec2b80d-1195-4dce-90d1-5bfb9acbc2f2 function_2 KJnwQOHdhjAaVrR 0xc00024a600 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [56ce8e36-f2ad-499e-8e7d-628e89206963]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [56ce8e36-f2ad-499e-8e7d-628e89206963 function_2_artf YTkHgHgGaGyayLB untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact 2ec2b80d-1195-4dce-90d1-5bfb9acbc2f2 56ce8e36-f2ad-499e-8e7d-628e89206963 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator 5be5b4cd-2264-4a7b-a66c-0b2a9dea5567 2ec2b80d-1195-4dce-90d1-5bfb9acbc2f2 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [7325075f-db75-420f-bd3d-d78e2b52bdbc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [7325075f-db75-420f-bd3d-d78e2b52bdbc function_3 sxMasdPdVUfAnXk 0xc00024a600 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [fd9242d2-19a9-44ea-9371-87020f66a0cd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [fd9242d2-19a9-44ea-9371-87020f66a0cd function_3_artf QqKwKSKbNUeYTKU untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact 7325075f-db75-420f-bd3d-d78e2b52bdbc fd9242d2-19a9-44ea-9371-87020f66a0cd 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator eda7b41f-a780-4ba5-83af-0b0d397b96b0 7325075f-db75-420f-bd3d-d78e2b52bdbc 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator 56ce8e36-f2ad-499e-8e7d-628e89206963 7325075f-db75-420f-bd3d-d78e2b52bdbc 1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [06532ba3-1554-4e85-8a93-f5849fc5e9eb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [06532ba3-1554-4e85-8a93-f5849fc5e9eb metric_1 egcZLmnUhRCVxrN 0xc00024a720 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [4f5192db-9411-48a3-a962-692635ea6173]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [4f5192db-9411-48a3-a962-692635ea6173 metric_1_artf FoMXBExyKWlZxuV untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact 06532ba3-1554-4e85-8a93-f5849fc5e9eb 4f5192db-9411-48a3-a962-692635ea6173 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator eda7b41f-a780-4ba5-83af-0b0d397b96b0 06532ba3-1554-4e85-8a93-f5849fc5e9eb 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [7cf8e832-de5e-4352-a98b-d5ea5aed33bb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [7cf8e832-de5e-4352-a98b-d5ea5aed33bb metric_2 zjYaIxiSdpfXyui 0xc00024a720 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [2e13cd8f-b1cb-4941-bd48-f9ed03ae239c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [2e13cd8f-b1cb-4941-bd48-f9ed03ae239c metric_2_artf dAyPsmKkWVxEwCc untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact 7cf8e832-de5e-4352-a98b-d5ea5aed33bb 2e13cd8f-b1cb-4941-bd48-f9ed03ae239c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator 56ce8e36-f2ad-499e-8e7d-628e89206963 7cf8e832-de5e-4352-a98b-d5ea5aed33bb 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [ca99aacf-3d68-4999-8bd6-b4dbfd906f8b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [ca99aacf-3d68-4999-8bd6-b4dbfd906f8b check sDicLtPykimeTwt 0xc00024a780 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM artifact WHERE id = $1 with args: [39a98490-b2af-4b1d-826f-c6878d93ea70]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO artifact (id, name, description, type, should_persist) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,type,should_persist; with args: [39a98490-b2af-4b1d-826f-c6878d93ea70 check_artf OwMSSIMWRXnxZas untyped true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf operator_to_artifact ca99aacf-3d68-4999-8bd6-b4dbfd906f8b 39a98490-b2af-4b1d-826f-c6878d93ea70 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf artifact_to_operator 4f5192db-9411-48a3-a962-692635ea6173 ca99aacf-3d68-4999-8bd6-b4dbfd906f8b 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: WITH operator_node AS (\n\tWITH op_with_outputs AS ( -- Aggregate outputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group to_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.to_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS outputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.from_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t),\n\top_with_inputs AS ( -- Aggregate inputs\n\t\tSELECT\n\t\t\toperator.id AS id,\n\t\t\tworkflow_dag.id AS dag_id,\n\t\t\toperator.name AS name,\n\t\t\toperator.description AS description,\n\t\t\toperator.spec AS spec,\n\t\t\toperator.execution_environment_id AS execution_environment_id,\n\t\t\tCAST( json_group_array( -- Group from_ids and idx into one array\n\t\t\t\tjson_object(\n\t\t\t\t\t'value', workflow_dag_edge.from_id,\n\t\t\t\t\t'idx', workflow_dag_edge.idx\n\t\t\t\t)\n\t\t\t) AS BLOB) AS inputs\n\t\tFROM\n\t\t\toperator, workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tworkflow_dag.id = workflow_dag_edge.workflow_dag_id\n\t\t\tAND operator.id = workflow_dag_edge.to_id\n\t\tGROUP BY\n\t\t\tworkflow_dag.id, operator.id\n\t)\n\tSELECT -- A full outer join to include operators without inputs / outputs.\n\t\top_with_outputs.id AS id,\n\t\top_with_outputs.dag_id AS dag_id,\n\t\top_with_outputs.name AS name,\n\t\top_with_outputs.description AS description,\n\t\top_with_outputs.spec AS spec,\n\t\top_with_outputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_outputs LEFT JOIN op_with_inputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tUNION ALL\n\tSELECT\n\t\top_with_inputs.id AS id,\n\t\top_with_inputs.dag_id AS dag_id,\n\t\top_with_inputs.name AS name,\n\t\top_with_inputs.description AS description,\n\t\top_with_inputs.spec AS spec,\n\t\top_with_inputs.execution_environment_id AS execution_environment_id,\n\t\top_with_outputs.outputs AS outputs,\n\t\top_with_inputs.inputs AS inputs\n\tFROM\n\t\top_with_inputs LEFT JOIN op_with_outputs\n\tON\n\t\top_with_outputs.id = op_with_inputs.id\n\t\tAND op_with_outputs.dag_id = op_with_inputs.dag_id\n\tWHERE op_with_outputs.outputs IS NULL\n) SELECT id,name,description,spec,execution_environment_id,dag_id,inputs,outputs FROM operator_node WHERE dag_id = $1 with args: [693840cd-6b0b-4a2c-bf24-e4350829efaf]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_GetUnusedCondaEnvNames
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [a3bd3b04-4a8f-4fea-b149-b96ce588c691]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [a3bd3b04-4a8f-4fea-b149-b96ce588c691  aqueduct-test  JSamyVpcxMqeDMzzGpVrfcuMOCnjoGbsRzDqqfoEgAVTZwEgdHTDeVsXROwG ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [99e8ab54-d97d-479d-8619-17a3fd925da5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [99e8ab54-d97d-479d-8619-17a3fd925da5 a3bd3b04-4a8f-4fea-b149-b96ce588c691 nhItSwTKZn vFtnmedfoIeJOjT 0xc000166a80 2023-05-30 17:14:54.432738 -0700 PDT m=+0.153552992 0xc000571aa0 0xc0004174d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [7cbb07b7-6147-41e7-b143-b39412132d44]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [7cbb07b7-6147-41e7-b143-b39412132d44 99e8ab54-d97d-479d-8619-17a3fd925da5 2023-05-30 17:14:54.434334 -0700 PDT m=+0.155148244 0xc0001d0090 0xc000616000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [5adc27df-9c31-4730-b817-81730f7a174b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [5adc27df-9c31-4730-b817-81730f7a174b 99e8ab54-d97d-479d-8619-17a3fd925da5 2023-05-30 17:14:54.434507 -0700 PDT m=+0.155321928 0xc0001d0300 0xc0006162d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [545d372f-e554-49b6-95d3-9adedc38913b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [545d372f-e554-49b6-95d3-9adedc38913b ieSzbXhpnk JGaeSlyroTmPGlT 0xc0006941e0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [7cbb07b7-6147-41e7-b143-b39412132d44 operator_to_artifact 545d372f-e554-49b6-95d3-9adedc38913b 82e84a7d-0088-4d58-b37f-89ea4ff0b96c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc000716030 545d372f-e554-49b6-95d3-9adedc38913b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [c5e4f743-f04a-4450-8954-a6923586ace4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [c5e4f743-f04a-4450-8954-a6923586ace4 LlHbSNyJup fnMyuLlgBRzmgYL 0xc000694720 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [5adc27df-9c31-4730-b817-81730f7a174b operator_to_artifact c5e4f743-f04a-4450-8954-a6923586ace4 82e84a7d-0088-4d58-b37f-89ea4ff0b96c 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET spec = $1 WHERE id = $2 RETURNING id,name,description,spec,execution_environment_id; with args: [0xc0007161f0 c5e4f743-f04a-4450-8954-a6923586ace4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tWITH latest_workflow_dag AS\n\t(\n\t\tSELECT \n\t\t\tworkflow_dag.id \n\t\tFROM\n\t\t\tworkflow_dag \n\t\tWHERE \n\t\t\tcreated_at IN (\n\t\t\t\tSELECT \n\t\t\t\t\tMAX(workflow_dag.created_at) \n\t\t\t\tFROM \n\t\t\t\t\tworkflow, workflow_dag \n\t\t\t\tWHERE \n\t\t\t\t\tworkflow.id = workflow_dag.workflow_id \n\t\t\t\tGROUP BY \n\t\t\t\t\tworkflow.id\n\t\t\t)\n\t),\n\tall_env_names AS\n\t(\n\t\tSELECT DISTINCT\n\t\t\tjson_extract(operator.spec, '$.engine_config.aqueduct_conda_config.env') AS name,\n\t\t\toperator.id as op_id\n\t\tFROM \n\t\t\tworkflow_dag_edge, operator\n\t\tWHERE\n\t\t\tworkflow_dag_edge.type = 'operator_to_artifact' \n\t\t\tAND \n\t\t\tworkflow_dag_edge.from_id = operator.id\n\t\t\tAND\n\t\t\tjson_extract(operator.spec, '$.engine_config.aqueduct_conda_config.env') IS NOT NULL\n\t),\n\tactive_env_names AS\n\t(\n\t\tSELECT DISTINCT\n\t\t\tall_env_names.name AS name\n\t\tFROM \n\t\t\tall_env_names, latest_workflow_dag, workflow_dag_edge\n\t\tWHERE\n\t\t\tlatest_workflow_dag.id = workflow_dag_edge.workflow_dag_id \n\t\t\tAND \n\t\t\tworkflow_dag_edge.type = 'operator_to_artifact' \n\t\t\tAND \n\t\t\tworkflow_dag_edge.from_id = all_env_names.op_id\n\t)\n\tSELECT \n\t\tall_env_names.name AS name\n\tFROM \n\t\tall_env_names LEFT JOIN active_env_names \n\t\tON all_env_names.name = active_env_names.name\n\tWHERE \n\t\tactive_env_names.name IS NULL;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [d7afa602-eef5-4201-96e4-d7c3f67d8e94]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [d7afa602-eef5-4201-96e4-d7c3f67d8e94  aqueduct-test  MxSsnqLSCBdcbszynxgbFRwcxACOBGAbKSdrjdikudgeedeWGcKMwcdGRYae ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [3af72914-dc9f-408b-a21f-7a175c1a3dce]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [3af72914-dc9f-408b-a21f-7a175c1a3dce d7afa602-eef5-4201-96e4-d7c3f67d8e94 dYXJWtSCvz wsfLwwKpjMeapPb 0xc000166040 2023-05-30 17:14:54.436594 -0700 PDT m=+0.157408569 0xc000570308 0xc000416028]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [7fe1b21a-7ea3-4f23-bb3e-072e8c74315a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [7fe1b21a-7ea3-4f23-bb3e-072e8c74315a 3af72914-dc9f-408b-a21f-7a175c1a3dce 2023-05-30 17:14:54.436763 -0700 PDT m=+0.157577251 0xc000170390 0xc000617270]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [fbc5d1ce-092f-41e3-9d5b-0129c2ecab3b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [fbc5d1ce-092f-41e3-9d5b-0129c2ecab3b d7afa602-eef5-4201-96e4-d7c3f67d8e94 aqueduct-test SQLite ZMRAsCJNDp 0xc000416068 2023-05-30 17:14:54.436896 -0700 PDT m=+0.157710510]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [886bed02-ebed-4d14-96b5-0698aa581c08]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [886bed02-ebed-4d14-96b5-0698aa581c08 KdJdltAzAX yfgJrRdWeRbuNuL 0xc0005664e0 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [7fe1b21a-7ea3-4f23-bb3e-072e8c74315a operator_to_artifact 886bed02-ebed-4d14-96b5-0698aa581c08 788cd76e-d4b0-4277-85f6-422c8034238f 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE operator SET (name, spec) = ($1, $2) WHERE id = $3 RETURNING id,name,description,spec,execution_environment_id; with args: [VkKZRGqcPP 0xc0005667e0 886bed02-ebed-4d14-96b5-0698aa581c08]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestOperator_ValidateOrg
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [7551880a-c038-48c7-b512-a03825ff8581]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [7551880a-c038-48c7-b512-a03825ff8581  aqueduct-test  xhCAjMtWHsNwuGhjBHkdJNBZSDTnhrkOgZmmJItBLwOQsYmeJlCUhTnyTJBG ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [691d4ac0-d1fa-41e2-8d0d-efa5fbfd79ec]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [691d4ac0-d1fa-41e2-8d0d-efa5fbfd79ec 7551880a-c038-48c7-b512-a03825ff8581 PjKxNeFgOO OYwoRbzUqBTjXft 0xc0001673c0 2023-05-30 17:14:54.437612 -0700 PDT m=+0.158426898 0xc000471af0 0xc000416188]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow_dag WHERE id = $1 with args: [ac7d2aa0-4019-4d9d-8d30-a297799c5548]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag (id, workflow_id, created_at, storage_config, engine_config) VALUES ($1, $2, $3, $4, $5) RETURNING id,workflow_id,created_at,storage_config,engine_config; with args: [ac7d2aa0-4019-4d9d-8d30-a297799c5548 691d4ac0-d1fa-41e2-8d0d-efa5fbfd79ec 2023-05-30 17:14:54.437752 -0700 PDT m=+0.158566143 0xc0001714d0 0xc000617b30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [edca2ffd-ad1a-4904-bfdb-c66a4e131e7a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [edca2ffd-ad1a-4904-bfdb-c66a4e131e7a 7551880a-c038-48c7-b512-a03825ff8581 aqueduct-test SQLite JooOBotgsk 0xc0004161c0 2023-05-30 17:14:54.437874 -0700 PDT m=+0.158688682]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM operator WHERE id = $1 with args: [aa926d51-1379-422b-b59c-7b1ad2f7c8d6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO operator (id, name, description, spec, execution_environment_id) VALUES ($1, $2, $3, $4, $5) RETURNING id,name,description,spec,execution_environment_id; with args: [aa926d51-1379-422b-b59c-7b1ad2f7c8d6 qdffbBmitl TKkKWcnrdKNuHyL 0xc000567140 <nil>]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_dag_edge (workflow_dag_id, type, from_id, to_id, idx) VALUES ($1, $2, $3, $4, $5) RETURNING workflow_dag_id,type,from_id,to_id,idx; with args: [ac7d2aa0-4019-4d9d-8d30-a297799c5548 operator_to_artifact aa926d51-1379-422b-b59c-7b1ad2f7c8d6 91f1eac0-422b-4c37-b098-aca8641f59ec 0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT COUNT(*) AS count \n\t\tFROM workflow_dag_edge, workflow_dag, workflow, app_user \n\t\tWHERE workflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\tworkflow_dag.workflow_id = workflow.id AND workflow.user_id = app_user.id AND \n\t\tapp_user.organization_id = $1 AND (workflow_dag_edge.from_id = $2 OR workflow_dag_edge.to_id = $2) with args: [aqueduct-test aa926d51-1379-422b-b59c-7b1ad2f7c8d6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT COUNT(*) AS count \n\t\tFROM workflow_dag_edge, workflow_dag, workflow, app_user \n\t\tWHERE workflow_dag_edge.workflow_dag_id = workflow_dag.id AND \n\t\tworkflow_dag.workflow_id = workflow.id AND workflow.user_id = app_user.id AND \n\t\tapp_user.organization_id = $1 AND (workflow_dag_edge.from_id = $2 OR workflow_dag_edge.to_id = $2) with args: [jDDbHpqhDk aa926d51-1379-422b-b59c-7b1ad2f7c8d6]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [29b74551-8605-4bf7-93aa-a8e89ead04a1]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [29b74551-8605-4bf7-93aa-a8e89ead04a1 aqueduct-test SQLite lgObbbCMVX 0xc0000d3bd8 2023-05-30 17:14:54.438492 -0700 PDT m=+0.159306374]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_CreateForUser
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [3a05fc54-56d0-4b0e-9a2f-e494ffa5d290]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [3a05fc54-56d0-4b0e-9a2f-e494ffa5d290 2fe86dab-9037-405c-9389-e5f4da85484a aqueduct-test SQLite GuWwePGxeV 0xc0000d3e58 2023-05-30 17:14:54.438794 -0700 PDT m=+0.159608467]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [16ee395c-eeab-4888-a3c9-c7b2f0089581]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [16ee395c-eeab-4888-a3c9-c7b2f0089581  aqueduct-test  BlvxNZxArOqupZQBiNKFbWVSARGmaoOPigIUOPTAwIzTGTcZLnbEfCBRdBVo ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [3159ee89-ce42-4b4f-a478-7a2a4d2db755]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [3159ee89-ce42-4b4f-a478-7a2a4d2db755 16ee395c-eeab-4888-a3c9-c7b2f0089581 aqueduct-test SQLite DVEqVPvGfu 0xc0004164d0 2023-05-30 17:14:54.439197 -0700 PDT m=+0.160011112]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM resource WHERE id = $1; with args: [3159ee89-ce42-4b4f-a478-7a2a4d2db755]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [045f86cd-766b-4e5b-ae18-0e70689f4e6d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [045f86cd-766b-4e5b-ae18-0e70689f4e6d  aqueduct-test  DbOfIErRjmjMFkVdQwpLiZarzgWeKGGwnCWUXVwMHZPEZzsgHOhRKCThsvRk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [a365ca0f-c7e4-45d2-a9aa-119bee7dbd1c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [a365ca0f-c7e4-45d2-a9aa-119bee7dbd1c 045f86cd-766b-4e5b-ae18-0e70689f4e6d aqueduct-test SQLite bijYUsnKpw 0xc0004165c0 2023-05-30 17:14:54.439634 -0700 PDT m=+0.160448627]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [a365ca0f-c7e4-45d2-a9aa-119bee7dbd1c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetBatch
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [4356ac04-6411-489c-b5e1-554273e58d35]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [4356ac04-6411-489c-b5e1-554273e58d35  aqueduct-test  qLKPmOwsDzDKSTCXYBEkSaBuXvgxEqdoXsIFcnhAyjWlOtsNdEDITIejYuMD ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [5f376114-cea0-459d-af80-663eb932d754]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [5f376114-cea0-459d-af80-663eb932d754 4356ac04-6411-489c-b5e1-554273e58d35 aqueduct-test SQLite qEVdZuzHEi 0xc0004166c0 2023-05-30 17:14:54.440208 -0700 PDT m=+0.161022396]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [58251f97-b270-4e91-8b20-5edf82b5037c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [58251f97-b270-4e91-8b20-5edf82b5037c 4356ac04-6411-489c-b5e1-554273e58d35 aqueduct-test SQLite onfYozdgzZ 0xc0004166f8 2023-05-30 17:14:54.440409 -0700 PDT m=+0.161223294]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [dfefe997-f874-404c-8357-8e36262be0ad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [dfefe997-f874-404c-8357-8e36262be0ad 4356ac04-6411-489c-b5e1-554273e58d35 aqueduct-test SQLite vosOGzJHvB 0xc000416738 2023-05-30 17:14:54.440552 -0700 PDT m=+0.161366360]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id IN ($1,$2,$3); with args: [5f376114-cea0-459d-af80-663eb932d754 58251f97-b270-4e91-8b20-5edf82b5037c dfefe997-f874-404c-8357-8e36262be0ad]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetByConfigField
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [e37411bc-dec8-4ab1-bf5b-842a74864006]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [e37411bc-dec8-4ab1-bf5b-842a74864006  aqueduct-test  THDJjuFBBzhMYpcALdCvrKtEQGvWgTDdPufLjbhngDXGHPUwUYpsAXwivZRk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [a5fa546b-7cbe-42a2-b23a-44fcdcce6640]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [a5fa546b-7cbe-42a2-b23a-44fcdcce6640 e37411bc-dec8-4ab1-bf5b-842a74864006 aqueduct-test SQLite yioAklXCDI 0xc0004167f0 2023-05-30 17:14:54.441175 -0700 PDT m=+0.161988995]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [9970f388-1a35-4d6b-b8be-484134b0d7a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [9970f388-1a35-4d6b-b8be-484134b0d7a0 e37411bc-dec8-4ab1-bf5b-842a74864006 aqueduct-test SQLite GADfwGNKLN 0xc000416820 2023-05-30 17:14:54.441304 -0700 PDT m=+0.162118035]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [ba84daa8-6261-4bf6-b781-980a164d55a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [ba84daa8-6261-4bf6-b781-980a164d55a0 e37411bc-dec8-4ab1-bf5b-842a74864006 aqueduct-test SQLite ezEGbzpkcQ 0xc000416850 2023-05-30 17:14:54.441433 -0700 PDT m=+0.162247675]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE json_extract(config, $1) = $2; with args: [$.wFynlefYrV ZxVbczIuVF]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE json_extract(config, $1) = $2; with args: [$.yVfYxEMsdP GzcnRUjCTG]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE json_extract(config, $1) = $2; with args: [$.WdVwlMEAds OnzJrEJrBb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetByNameAndUser
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [9e5ffd8e-df2e-4b3f-9fbb-4763861f9928]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [9e5ffd8e-df2e-4b3f-9fbb-4763861f9928  aqueduct-test  HrmTUKoHmZVbCITOPCkdubklEHkJCtpdHYKzhleuSyutpXMfuvtPDZoLKuaC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [deb66cc6-0e0a-4489-9efb-a0272bc75c3d]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [deb66cc6-0e0a-4489-9efb-a0272bc75c3d 9e5ffd8e-df2e-4b3f-9fbb-4763861f9928 aqueduct-test SQLite zEuFWIKAit 0xc000416908 2023-05-30 17:14:54.442058 -0700 PDT m=+0.162872688]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE name = $1 AND organization_id = $2 AND (user_id IS NULL OR user_id = $3); with args: [zEuFWIKAit aqueduct-test 9e5ffd8e-df2e-4b3f-9fbb-4763861f9928]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetByOrg
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [93e88792-59a7-4311-a74b-0845721c9819]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [93e88792-59a7-4311-a74b-0845721c9819  aqueduct-test  XlJqfrRnUGeAqOuzXUPwyxFSkeogxbtWUPTgcmGCAQaFPpFUVacVzbZdjSfq ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [4b0d4691-3bd7-4e7d-8415-4ac70fe43b15]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [4b0d4691-3bd7-4e7d-8415-4ac70fe43b15 93e88792-59a7-4311-a74b-0845721c9819 aqueduct-test SQLite OiLMprkvcr 0xc0004169b0 2023-05-30 17:14:54.442544 -0700 PDT m=+0.163358205]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [e56c5510-645e-4ff4-a4de-52c2511f7e05]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [e56c5510-645e-4ff4-a4de-52c2511f7e05 93e88792-59a7-4311-a74b-0845721c9819 aqueduct-test SQLite dtcdKMPpgd 0xc0004169c8 2023-05-30 17:14:54.442691 -0700 PDT m=+0.163505337]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [7498718a-abbd-45d7-9251-0db3ff0d007f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [7498718a-abbd-45d7-9251-0db3ff0d007f 93e88792-59a7-4311-a74b-0845721c9819 aqueduct-test SQLite psnRXXCZHB 0xc0004169e0 2023-05-30 17:14:54.442813 -0700 PDT m=+0.163627686]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE organization_id = $1 AND user_id IS NULL; with args: [aqueduct-test]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetByServiceAndUser
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [bce8933a-9e44-408a-b753-48d9a193dc50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [bce8933a-9e44-408a-b753-48d9a193dc50  aqueduct-test  TtoCEonjVCpZmTATivouGERIuJxawtTXiCoeFVvaFIrLoteeJziKSjmZNlcp ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [8763d4c4-fa56-4e39-b4b7-2546e1c1dfc2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [8763d4c4-fa56-4e39-b4b7-2546e1c1dfc2 bce8933a-9e44-408a-b753-48d9a193dc50 aqueduct-test SQLite ItPhdBTCkR 0xc000416a88 2023-05-30 17:14:54.443245 -0700 PDT m=+0.164059792]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [f13442e4-1181-446c-91f1-d36358623005]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [f13442e4-1181-446c-91f1-d36358623005 bce8933a-9e44-408a-b753-48d9a193dc50 aqueduct-test SQLite rYXibAVCzI 0xc000416aa0 2023-05-30 17:14:54.443373 -0700 PDT m=+0.164187162]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [7bc1febc-1b23-46ee-9f2d-adadcc9cc243]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [7bc1febc-1b23-46ee-9f2d-adadcc9cc243 bce8933a-9e44-408a-b753-48d9a193dc50 aqueduct-test SQLite vZKyhXwXWp 0xc000416ab8 2023-05-30 17:14:54.443493 -0700 PDT m=+0.164307116]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE service = $1 AND user_id = $2; with args: [SQLite bce8933a-9e44-408a-b753-48d9a193dc50]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_GetByUser
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [7668adde-84da-44d7-a4f3-ba1254229027]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [7668adde-84da-44d7-a4f3-ba1254229027  aqueduct-test  NIysXRsiWKMwEgXchWcyLPBAHWoKQMmkbGGrImiDjkRSafXdpehxmpBsEorA ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [441667a6-b372-40ca-848b-97279ba54a12]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [441667a6-b372-40ca-848b-97279ba54a12 7668adde-84da-44d7-a4f3-ba1254229027 aqueduct-test SQLite svsoVIzfts 0xc000416b60 2023-05-30 17:14:54.443995 -0700 PDT m=+0.164809686]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [d680c795-59b3-4142-9a3b-1ed111480429]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [d680c795-59b3-4142-9a3b-1ed111480429 7668adde-84da-44d7-a4f3-ba1254229027 aqueduct-test SQLite RiYKpVLcCU 0xc000416b78 2023-05-30 17:14:54.444143 -0700 PDT m=+0.164957369]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [9fbad64c-a302-4d94-a688-827f6d83ad3e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [9fbad64c-a302-4d94-a688-827f6d83ad3e 7668adde-84da-44d7-a4f3-ba1254229027 aqueduct-test SQLite zSTRUgNEZd 0xc000416b90 2023-05-30 17:14:54.444267 -0700 PDT m=+0.165081607]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE organization_id = $1 AND (user_id IS NULL OR user_id = $2); with args: [aqueduct-test 7668adde-84da-44d7-a4f3-ba1254229027]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [0c6f37f4-99a2-4f08-97ce-fe989c95141c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [0c6f37f4-99a2-4f08-97ce-fe989c95141c  aqueduct-test  bbvdseJUhLDRGVVFzNRLFJGxdxBuaszvLtWJpKbyLNSSdmHpDpRvTfZznfXm ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [b4bc1071-5f6b-4f1b-b627-bf59c80f9bf7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [b4bc1071-5f6b-4f1b-b627-bf59c80f9bf7 0c6f37f4-99a2-4f08-97ce-fe989c95141c aqueduct-test SQLite sFtCRzjlRK 0xc000416c40 2023-05-30 17:14:54.444759 -0700 PDT m=+0.165573765]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE resource SET (config, name) = ($1, $2) WHERE id = $3 RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [0xc000416c58 EvNGkOtwad b4bc1071-5f6b-4f1b-b627-bf59c80f9bf7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestResource_ValidateOwnership
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [f67a0ffa-b86d-469d-988f-1618b6fb5df3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [f67a0ffa-b86d-469d-988f-1618b6fb5df3  aqueduct-test  ChbydzUxwopvUxWoAGfKFdNydxfvToxEVyvWggeTfoxDxobeioulEfsDLBPk ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM resource WHERE id = $1 with args: [31df39b0-2a2b-4a33-99f7-86c5b5e825ea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO resource (id, user_id, organization_id, service, name, config, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING id,organization_id,user_id,service,name,config,created_at; with args: [31df39b0-2a2b-4a33-99f7-86c5b5e825ea f67a0ffa-b86d-469d-988f-1618b6fb5df3 aqueduct-test SQLite hCEGCrRoht 0xc000416cf0 2023-05-30 17:14:54.445265 -0700 PDT m=+0.166079260]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,organization_id,user_id,service,name,config,created_at FROM resource WHERE id = $1; with args: [31df39b0-2a2b-4a33-99f7-86c5b5e825ea]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(*) AS count FROM resource WHERE id = $1 AND organization_id = $2; with args: [31df39b0-2a2b-4a33-99f7-86c5b5e825ea aqueduct-test]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestSchemaVersion_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [29 yLJaaFDGdY true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestSchemaVersion_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [29 PuNgJsTISR true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM schema_version WHERE version = $1; with args: [29]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestSchemaVersion_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [29 pRFbFmyPsq true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version WHERE version = $1 with args: [29]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestSchemaVersion_GetCurrent
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [29 eIPOSKtAcr true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [30 IlPzXwRWpB true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [31 TOpqwhpwIw true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [32 oOWMoMTHZz true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [33 MekgsPYmdR true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT version,dirty,name FROM schema_version ORDER BY version DESC LIMIT 1;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestSchemaVersion_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO schema_version (version, name, dirty) VALUES ($1, $2, $3) RETURNING version,dirty,name; with args: [29 HECQSXPjYu true]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE schema_version SET name = $1 WHERE version = $2 RETURNING version,dirty,name; with args: [syPavFfsEE 29]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestStorageMigrationCurrent
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT * FROM storage_migration WHERE current = true;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [c8954c48-0e46-46a7-b386-8ba93c42d2ba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [c8954c48-0e46-46a7-b386-8ba93c42d2ba 2b1e0778-ff48-11ed-838a-acde48001122 0xc000212c00 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc000558de0 false c8954c48-0e46-46a7-b386-8ba93c42d2ba]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [095db8e8-c956-464d-839b-46ddb93ad26e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [095db8e8-c956-464d-839b-46ddb93ad26e <nil> 0xc000212f60 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc000558e90 false 095db8e8-c956-464d-839b-46ddb93ad26e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [dd77761e-7563-4a1e-9e0e-ebbaca154444]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [dd77761e-7563-4a1e-9e0e-ebbaca154444 2b1e1cb8-ff48-11ed-838a-acde48001122 0xc0002132c0 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (current, execution_state) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [false 0xc000558f40 dd77761e-7563-4a1e-9e0e-ebbaca154444]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [0501fb4e-be2f-4df3-a98c-edc7347c4942]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [0501fb4e-be2f-4df3-a98c-edc7347c4942 <nil> 0xc000213680 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc000558ff0 false 0501fb4e-be2f-4df3-a98c-edc7347c4942]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [cde798cb-b488-4cb6-9a1f-1bfe3a1665b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [cde798cb-b488-4cb6-9a1f-1bfe3a1665b0 2b1e2c4e-ff48-11ed-838a-acde48001122 0xc0002139e0 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc0005590a0 true cde798cb-b488-4cb6-9a1f-1bfe3a1665b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT * FROM storage_migration WHERE current = true;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestStorageMigrationList
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [1b2a8d10-b113-4a06-a1db-290cd2e45235]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [1b2a8d10-b113-4a06-a1db-290cd2e45235 2b1e3d24-ff48-11ed-838a-acde48001122 0xc000410750 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc000559200 false 1b2a8d10-b113-4a06-a1db-290cd2e45235]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [c50fbc3d-a687-43c7-9492-f054082edc37]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [c50fbc3d-a687-43c7-9492-f054082edc37 <nil> 0xc000410ab0 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc0005592b0 false c50fbc3d-a687-43c7-9492-f054082edc37]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [2baecf1c-e690-45cc-b1ee-d7707a37aad3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [2baecf1c-e690-45cc-b1ee-d7707a37aad3 2b1e4cf6-ff48-11ed-838a-acde48001122 0xc000410e10 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (current, execution_state) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [false 0xc000559360 2baecf1c-e690-45cc-b1ee-d7707a37aad3]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [117689e4-13f8-4667-881e-078b897c2216]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [117689e4-13f8-4667-881e-078b897c2216 <nil> 0xc000411170 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc000559410 false 117689e4-13f8-4667-881e-078b897c2216]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM storage_migration WHERE id = $1 with args: [fdff11b7-78a8-4e47-af91-3cbaec7d14ab]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO storage_migration (id, dest_integration_id, execution_state, current) VALUES ($1, $2, $3, $4) RETURNING id,dest_integration_id,execution_state,current; with args: [fdff11b7-78a8-4e47-af91-3cbaec7d14ab 2b1e5b4c-ff48-11ed-838a-acde48001122 0xc0004114d0 false]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE storage_migration SET (execution_state, current) = ($1, $2) WHERE id = $3 RETURNING id,dest_integration_id,execution_state,current; with args: [0xc0005594c0 true fdff11b7-78a8-4e47-af91-3cbaec7d14ab]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT * FROM storage_migration ORDER BY execution_state->>'timestamps'->>'registered_at' DESC;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestUser_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [e440e3e7-1d65-4f5b-b987-176baad7e39b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [e440e3e7-1d65-4f5b-b987-176baad7e39b  aqueduct-test  mioYzpXsNTjdKBQKcidHpsysGrWmYUNfrDRqJhYFcekqAKrXTgQudUGsxvii ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestUser_GetByAPIKey
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [af75c57b-06c0-492e-8916-3a46b164e987]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [af75c57b-06c0-492e-8916-3a46b164e987  aqueduct-test  fGhsKAsMzJVotpqEDsUjVNPpQNPvZuFaPNzuHOGcVYyrfrLfKFdfUrXMgRxt ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,email,organization_id,role,api_key,auth0_id FROM app_user WHERE api_key = $1; with args: [fGhsKAsMzJVotpqEDsUjVNPpQNPvZuFaPNzuHOGcVYyrfrLfKFdfUrXMgRxt]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestUser_ResetAPIKey
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [f80cf86a-ae07-43f2-aa5f-727c88feca8b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [f80cf86a-ae07-43f2-aa5f-727c88feca8b  aqueduct-test  glRBmtSSKfjRLrNkCbNMTwtifxVqaqifNQXznUDJkpWjgzOrOJfXLpXbpPPF ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: Transaction BEGIN"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,email,organization_id,role,api_key,auth0_id FROM app_user WHERE api_key = $1; with args: [4aeca66e8b2a4769f577cc06fae80d3bd4c482e3f71a9b7b5670a966de85]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE app_user SET api_key = $1 WHERE id = $2 RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [4aeca66e8b2a4769f577cc06fae80d3bd4c482e3f71a9b7b5670a966de85 f80cf86a-ae07-43f2-aa5f-727c88feca8b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: Transaction COMMIT"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWatcher_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [619b5de3-eea6-49ad-ad38-b22ef37fe7e4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [619b5de3-eea6-49ad-ad38-b22ef37fe7e4  aqueduct-test  OmqZGWmvDnBSXmxxgMKmevIIXhokgoqXairLuyPRzSdMKhygRtckQDkjsgUt ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [59a6fe66-5f6f-4e58-a3b3-e681603fb7bb]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [59a6fe66-5f6f-4e58-a3b3-e681603fb7bb 619b5de3-eea6-49ad-ad38-b22ef37fe7e4 ouZJMCoeMO bUnBbclyaLyJplE 0xc0005f5980 2023-05-30 17:14:54.450835 -0700 PDT m=+0.171648811 0xc0000f8f68 0xc000417450]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_watcher (workflow_id, user_id) VALUES ($1, $2) RETURNING workflow_id,user_id; with args: [59a6fe66-5f6f-4e58-a3b3-e681603fb7bb 619b5de3-eea6-49ad-ad38-b22ef37fe7e4]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWatcher_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [844554db-49e9-42a3-891b-deedbd01c43f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [844554db-49e9-42a3-891b-deedbd01c43f  aqueduct-test  cwZAkaKCNPDjXnIRmnCLLzncYiswRhMHtUqqYZCapuJRcUMBRbcguzXzErOG ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [55217aac-cc58-4e50-990a-dfaa771d362a]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [55217aac-cc58-4e50-990a-dfaa771d362a 844554db-49e9-42a3-891b-deedbd01c43f INjOGuvqLs woNgeWeDWEKZZaw 0xc0005f5b80 2023-05-30 17:14:54.451341 -0700 PDT m=+0.172155429 0xc0000f9e80 0xc000417500]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_watcher (workflow_id, user_id) VALUES ($1, $2) RETURNING workflow_id,user_id; with args: [55217aac-cc58-4e50-990a-dfaa771d362a 844554db-49e9-42a3-891b-deedbd01c43f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_watcher\n\tWHERE (workflow_id, user_id) = ($1, $2); with args: [55217aac-cc58-4e50-990a-dfaa771d362a 844554db-49e9-42a3-891b-deedbd01c43f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWatcher_DeleteByWorkflow
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [6179013e-532d-4338-9c88-f10a1652f040]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [6179013e-532d-4338-9c88-f10a1652f040  aqueduct-test  JLvNCjVKYRwrlixxqCahQipoirlkyAOrLcuChwZkizjuhieGuUoKWiMJIywh ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [09c2dd20-0c15-4fa4-abe1-29465e4dd396]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [09c2dd20-0c15-4fa4-abe1-29465e4dd396 6179013e-532d-4338-9c88-f10a1652f040 iyQQjhyrer FCMePwisAXLyDwn 0xc0005f5dc0 2023-05-30 17:14:54.451884 -0700 PDT m=+0.172698067 0xc000174d80 0xc0004175b0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow_watcher (workflow_id, user_id) VALUES ($1, $2) RETURNING workflow_id,user_id; with args: [09c2dd20-0c15-4fa4-abe1-29465e4dd396 6179013e-532d-4338-9c88-f10a1652f040]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow_watcher\n\tWHERE workflow_id = $1; with args: [09c2dd20-0c15-4fa4-abe1-29465e4dd396]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_Create
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [9f01c054-4298-4224-8f83-f08009f0b4fe]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [9f01c054-4298-4224-8f83-f08009f0b4fe  aqueduct-test  fesugMsEgvGlQNdVsuTMkKYDdeXfdtImuEQsXyuHmStIGiOieOAXcvZEWTiN ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [dc0deb8d-55b5-428b-842e-13d685723d33]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [dc0deb8d-55b5-428b-842e-13d685723d33 9f01c054-4298-4224-8f83-f08009f0b4fe rVYxsIOgTl xEJxYxwZYygqvqHjJMGQ 0xc0005e0040 2023-05-30 17:14:54.456372 -0700 PDT m=+0.177186588 0xc0005e0090 0xc0005e0098]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_Delete
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [3db4bbd0-f816-4d78-b65f-f0f8fa734cdc]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [3db4bbd0-f816-4d78-b65f-f0f8fa734cdc  aqueduct-test  vHnFnMnEFSPSkSlfcoUwDVlwmAqBPwAasJLQhDSHVlVHjMAXyQfbdciCIPVy ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [e066e657-0249-4ed9-9ec4-7cabf370cb84]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [e066e657-0249-4ed9-9ec4-7cabf370cb84 3db4bbd0-f816-4d78-b65f-f0f8fa734cdc hynwMkenJe EJLOvZABDTGWNce 0xc000418800 2023-05-30 17:14:54.456912 -0700 PDT m=+0.177725871 0xc000196a90 0xc0004176f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: DELETE FROM workflow WHERE id = $1; with args: [e066e657-0249-4ed9-9ec4-7cabf370cb84]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_Exists
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [2ac40ecb-3d1b-402f-8e75-76557c93b244]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [2ac40ecb-3d1b-402f-8e75-76557c93b244  aqueduct-test  ZmAoCRlQJEgpsKHaCCbxGvlBPqbJulorNTsUHMUryjxexawqqxFSIRbpAPho ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [bd546f91-2cd4-4b65-8cba-07e9f276edca]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [bd546f91-2cd4-4b65-8cba-07e9f276edca 2ac40ecb-3d1b-402f-8e75-76557c93b244 qutxgYBcaz hTWEGbYOgbrBJMv 0xc000418a00 2023-05-30 17:14:54.457379 -0700 PDT m=+0.178192984 0xc000197808 0xc0004177a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [bd546f91-2cd4-4b65-8cba-07e9f276edca]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [00000000-0000-0000-0000-000000000000]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_Get
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [da2ccba0-8b4e-4a90-a981-ea8e9066994e]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [da2ccba0-8b4e-4a90-a981-ea8e9066994e  aqueduct-test  CWfCQfNtCVFMvdbtrYmCMEzWEBQzhnQxGRvOMJXqmYZWFgfQVOsTSQBGyXnS ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [38205dd2-48b6-4d28-84df-f0f479f9fb8f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [38205dd2-48b6-4d28-84df-f0f479f9fb8f da2ccba0-8b4e-4a90-a981-ea8e9066994e xZSqCPhKHX xXorJrUeEcvhYmq 0xc000418c40 2023-05-30 17:14:54.457883 -0700 PDT m=+0.178697105 0xc0001aa700 0xc000417850]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,user_id,name,description,schedule,created_at,retention_policy,notification_settings FROM workflow WHERE id = $1; with args: [38205dd2-48b6-4d28-84df-f0f479f9fb8f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_GetByOwnerAndName
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b313a1eb-97a7-4fd9-8cef-ee1223a13988]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b313a1eb-97a7-4fd9-8cef-ee1223a13988  aqueduct-test  ElmQypnILMYMFEFueVUzBUaodpCzErVtmUEwiiVDsPuSLkJQrDkjNlkIvPqe ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [a68f5110-f6c2-4ca7-8883-2a8245e77144]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [a68f5110-f6c2-4ca7-8883-2a8245e77144 b313a1eb-97a7-4fd9-8cef-ee1223a13988 guOvQrOhrO pxsrnIjAaxpWCWY 0xc000418e40 2023-05-30 17:14:54.458385 -0700 PDT m=+0.179199115 0xc0001ab7c8 0xc0004178f8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,user_id,name,description,schedule,created_at,retention_policy,notification_settings FROM workflow WHERE user_id = $1 and name = $2; with args: [b313a1eb-97a7-4fd9-8cef-ee1223a13988 guOvQrOhrO]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_GetByScheduleTrigger
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [64032ec1-ada5-4133-9e2e-e9b24b22ac3b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [64032ec1-ada5-4133-9e2e-e9b24b22ac3b  aqueduct-test  qLMiqWLcOHHYczCUIeMdHCzqyjfZnJbhQjWTyMMdsrSGeETlbXMVluQRvJEX ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [ec6d446d-281a-4b99-a7d4-b5402d9e8b89]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [ec6d446d-281a-4b99-a7d4-b5402d9e8b89 64032ec1-ada5-4133-9e2e-e9b24b22ac3b GlZGHWbEOT CSNXbNvSZCFflcZ 0xc0004190c0 2023-05-30 17:14:54.458933 -0700 PDT m=+0.179747110 0xc0001bc988 0xc0004179a0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [b1f2875c-2693-45ed-b6b5-421d8dd028b7]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [b1f2875c-2693-45ed-b6b5-421d8dd028b7 64032ec1-ada5-4133-9e2e-e9b24b22ac3b bDfjZWDiKQ CKYbzEBtvHRngBt 0xc0004191c0 2023-05-30 17:14:54.459072 -0700 PDT m=+0.179886173 0xc0001bced8 0xc0004179b8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [599c840b-312c-4765-a820-954d91a794f5]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [599c840b-312c-4765-a820-954d91a794f5 64032ec1-ada5-4133-9e2e-e9b24b22ac3b kpdinATfpA EhIHUDoAZTjXhKZ 0xc000419480 2023-05-30 17:14:54.459207 -0700 PDT m=+0.180020599 0xc0001bd430 0xc0004179d0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,user_id,name,description,schedule,created_at,retention_policy,notification_settings FROM workflow WHERE\n\t\t\tjson_extract(schedule, '$.trigger') = $1;\n\t\t with args: [cascade]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_GetLatestStatusesByOrg
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_GetTargets
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [4b5a3909-14bd-4b5f-a130-c63cd02ee84c]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [4b5a3909-14bd-4b5f-a130-c63cd02ee84c  aqueduct-test  rJatvbYjHucnrAVhjFapSnserElnvCldpvjktncsJeZiwLiQOLceIIFkTEyU ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [49b07929-9d21-47aa-8437-680d276a85d9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [49b07929-9d21-47aa-8437-680d276a85d9 4b5a3909-14bd-4b5f-a130-c63cd02ee84c qcteJkNpKo ernXpyzOTAadBaF 0xc0004196c0 2023-05-30 17:14:54.459869 -0700 PDT m=+0.180682767 0xc0001e2c20 0xc000417af0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [e9798357-4eab-439f-ba7f-ee365a19f2df]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [e9798357-4eab-439f-ba7f-ee365a19f2df 4b5a3909-14bd-4b5f-a130-c63cd02ee84c llJfXBTWro wXbLpbCRCrdUStZ 0xc0004197c0 2023-05-30 17:14:54.460024 -0700 PDT m=+0.180838126 0xc0001e3150 0xc000417b08]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [3bd2781d-e370-4faa-9175-9071c23d0336]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [3bd2781d-e370-4faa-9175-9071c23d0336 4b5a3909-14bd-4b5f-a130-c63cd02ee84c dHRMvqPxyo eyicGUagiPECksB 0xc0004198c0 2023-05-30 17:14:54.460175 -0700 PDT m=+0.180988568 0xc0001e3628 0xc000417b20]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\t\tSELECT id FROM workflow\n\t\tWHERE\n\t\t\tjson_extract(schedule, '$.trigger') = $1\n\t\t\tAND json_extract(schedule, '$.source_id') = $2\n\t\t; with args: [cascade 49b07929-9d21-47aa-8437-680d276a85d9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_List
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [8816f8c3-f17b-4a99-a352-c5aacf05b3c9]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [8816f8c3-f17b-4a99-a352-c5aacf05b3c9  aqueduct-test  gKdgtKhsfcBFBAmZIiunTFEzIiVVhsBIFbHgElOmCKYUJINvUtukFVSFQJUI ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [d5e8116b-ed40-4b27-b518-cdac258eccee]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [d5e8116b-ed40-4b27-b518-cdac258eccee 8816f8c3-f17b-4a99-a352-c5aacf05b3c9 KsITXrDepY YbJmeuufzshWZTk 0xc000419ac0 2023-05-30 17:14:54.460638 -0700 PDT m=+0.181452441 0xc0001fe478 0xc000417bc8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [c0d7bdb2-097e-48b5-98ee-6debe4a83065]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [c0d7bdb2-097e-48b5-98ee-6debe4a83065 8816f8c3-f17b-4a99-a352-c5aacf05b3c9 GJuemggmmu BStmDuSXHcECxRn 0xc000419bc0 2023-05-30 17:14:54.460793 -0700 PDT m=+0.181606939 0xc0001fe9b8 0xc000417be0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,user_id,name,description,schedule,created_at,retention_policy,notification_settings FROM workflow;"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_RemoveNotificationFromSettings
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [cc2bb3bf-9e5e-454b-bb8c-f5bd9382e0fd]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [cc2bb3bf-9e5e-454b-bb8c-f5bd9382e0fd  aqueduct-test  DjLwKSTRNEchfXkDTVkLlnkbJGSTNqyHKLZdoyWtMPGBGBRJGbqHrTIpwvjC ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [d7b61913-a073-462f-8952-3f7663f4b48b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [d7b61913-a073-462f-8952-3f7663f4b48b cc2bb3bf-9e5e-454b-bb8c-f5bd9382e0fd   0xc0005e1080 2023-05-30 17:14:54.461289 -0700 PDT m=+0.182103291 0xc0005e10d0 0xc0005e10d8]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tUPDATE workflow\n\tSET\n\t\tnotification_settings=CAST(\n\t\t\tjson_remove(\n\t\t\t\tnotification_settings,\n\t\t\t\t$1\n\t\t\t) AS BLOB\n\t\t)\n\tWHERE\n\t\tnotification_settings IS NOT NULL\n\t\tAND json_extract(\n\t\t\tnotification_settings,\n\t\t\t$1\n\t\t) IS NOT NULL; with args: [$.settings.cc620dde-b9ef-40b6-9f30-0706a88d84d2]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT id,user_id,name,description,schedule,created_at,retention_policy,notification_settings FROM workflow WHERE id = $1; with args: [d7b61913-a073-462f-8952-3f7663f4b48b]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_Update
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [3a34f8c2-390a-4a3f-87e5-2c853c09d296]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [3a34f8c2-390a-4a3f-87e5-2c853c09d296  aqueduct-test  oouPpMgtzvXLfVlZkLaGUIuxAdosfOidZoJMmyUNMORjMqdmCzTdrIeruwMa ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [653c2667-7bf8-42b5-b62c-7e71d8eab60f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [653c2667-7bf8-42b5-b62c-7e71d8eab60f 3a34f8c2-390a-4a3f-87e5-2c853c09d296 dwaJEsmKYv kWnBApAwXjgQNLy 0xc000262040 2023-05-30 17:14:54.461838 -0700 PDT m=+0.182651953 0xc00024eec0 0xc000417d30]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: UPDATE workflow SET (name, schedule, notification_settings) = ($1, $2, $3) WHERE id = $4 RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [new_workflow_name 0xc000262140 0xc000417d48 653c2667-7bf8-42b5-b62c-7e71d8eab60f]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
=== RUN   TestDatabaseSuite/TestWorkflow_ValidateOrg
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM app_user WHERE id = $1 with args: [b3c1cf86-4f4b-4d7e-8146-34bbc34c7591]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO app_user (id, email, organization_id, role, api_key, auth0_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING id,email,organization_id,role,api_key,auth0_id; with args: [b3c1cf86-4f4b-4d7e-8146-34bbc34c7591  aqueduct-test  QlgrlaiAPKbELPdXNtIuozozpYLYIvUmcMknrPjaczfSIMuoYxxkTiCzAqlR ]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: SELECT COUNT(1) AS count FROM workflow WHERE id = $1 with args: [57e0df64-da0f-43f9-9afb-0383b83c68af]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: INSERT INTO workflow (id, user_id, name, description, schedule, created_at, retention_policy, notification_settings) VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING id,user_id,name,description,schedule,created_at,retention_policy,notification_settings; with args: [57e0df64-da0f-43f9-9afb-0383b83c68af b3c1cf86-4f4b-4d7e-8146-34bbc34c7591 ZCmTLLZnGs GnYsNJYCeWbnnoh 0xc000262380 2023-05-30 17:14:54.462425 -0700 PDT m=+0.183239415 0xc00026a060 0xc000417de0]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tSELECT \n\t\tCOUNT(*) AS count \n\tFROM \n\t\tworkflow INNER JOIN app_user ON workflow.user_id = app_user.id\n\tWHERE\n\t\tworkflow.id = $1\n\t\tAND app_user.organization_id = $2; with args: [57e0df64-da0f-43f9-9afb-0383b83c68af aqueduct-test]"
time="2023-05-30T17:14:54-07:00" level=info msg="Executing query: \n\tDELETE FROM app_user;\n\tDELETE FROM artifact;\n\tDELETE FROM artifact_result;\n\tDELETE FROM execution_environment;\n\tDELETE FROM resource;\n\tDELETE FROM notification;\n\tDELETE FROM operator;\n\tDELETE FROM operator_result;\n\tDELETE FROM schema_version;\n\tDELETE FROM storage_migration;\n\tDELETE FROM workflow;\n\tDELETE FROM workflow_dag;\n\tDELETE FROM workflow_dag_edge;\n\tDELETE FROM workflow_dag_result;\n\t;\n\t"
--- FAIL: TestDatabaseSuite (0.17s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_CreateWithExecStateAndMetadata (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetByArtifact (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetByArtifactAndDAGResult (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetByArtifactAndWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetByArtifactBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_GetByDAGResults (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifactResult_UpdateBatchStatusByStatus (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_Exists (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_GetByDAG (0.00s)
    --- FAIL: TestDatabaseSuite/TestArtifact_GetMetricsByUpstreamArtifactBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_GetNode (0.01s)
    --- PASS: TestDatabaseSuite/TestArtifact_GetNodesByDAG (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestArtifact_ValidateOrg (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGEdge_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGEdge_DeleteByDAGBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGEdge_GetArtifactToOperatorByDAG (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGEdge_GetByDAGBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGEdge_GetOperatorToArtifactByDAG (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_GetByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_GetKOffsetByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_GetWorkflowMetadataBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestDAGResult_UpdateBatchStatusByStatus (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetByArtifactResultBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetByDAGResult (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetByOperator (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetLatestByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_GetLatestIDsByOrgAndEngine (0.00s)
    --- PASS: TestDatabaseSuite/TestDAG_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_GetByHash (0.00s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_GetByOperatorBatch (0.01s)
    --- PASS: TestDatabaseSuite/TestExecutionEnvironment_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestNotification_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestNotification_GetByReceiverAndStatus (0.00s)
    --- PASS: TestDatabaseSuite/TestNotification_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestNotification_ValidateUser (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_GetByDAGResultAndOperator (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_GetByDAGResultBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_GetCheckStatusByArtifactBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_GetStatusByDAGResultAndArtifactBatch (0.01s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestOperatorResult_UpdateBatchStatusByStatus (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_DeleteBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_Exists (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetByDAG (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetByEngineResourceID (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetDistinctLoadOPsByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetEngineTypesMapByDagIDs (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetLoadOPsByResource (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_GetLoadOPsByWorkflowAndResource (0.01s)
    --- PASS: TestDatabaseSuite/TestOperator_GetNode (0.01s)
    --- PASS: TestDatabaseSuite/TestOperator_GetNodesByDAG (0.01s)
    --- PASS: TestDatabaseSuite/TestOperator_GetUnusedCondaEnvNames (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestOperator_ValidateOrg (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_CreateForUser (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetBatch (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetByConfigField (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetByNameAndUser (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetByOrg (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetByServiceAndUser (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_GetByUser (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestResource_ValidateOwnership (0.00s)
    --- PASS: TestDatabaseSuite/TestSchemaVersion_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestSchemaVersion_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestSchemaVersion_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestSchemaVersion_GetCurrent (0.00s)
    --- PASS: TestDatabaseSuite/TestSchemaVersion_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestStorageMigrationCurrent (0.00s)
    --- PASS: TestDatabaseSuite/TestStorageMigrationList (0.00s)
    --- PASS: TestDatabaseSuite/TestUser_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestUser_GetByAPIKey (0.00s)
    --- PASS: TestDatabaseSuite/TestUser_ResetAPIKey (0.00s)
    --- PASS: TestDatabaseSuite/TestWatcher_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestWatcher_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestWatcher_DeleteByWorkflow (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_Create (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_Delete (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_Exists (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_Get (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_GetByOwnerAndName (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_GetByScheduleTrigger (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_GetLatestStatusesByOrg (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_GetTargets (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_List (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_RemoveNotificationFromSettings (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_Update (0.00s)
    --- PASS: TestDatabaseSuite/TestWorkflow_ValidateOrg (0.00s)
FAIL
FAIL	github.com/aqueducthq/aqueduct/lib/repos/tests	0.534s
FAIL
